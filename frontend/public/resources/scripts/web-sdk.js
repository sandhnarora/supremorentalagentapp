/*!
 * Copyright (c) 2025 Oracle and/or its affiliates.
 * All rights reserved. Oracle Digital Assistant Client Web SDK, Release: 24.12
 */
!function(e,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("WebSDK",[],factory):"object"==typeof exports?exports.WebSDK=factory():e.WebSDK=factory();e.WebSDK=factory()}(self,(()=>(()=>{"use strict";var e={8557:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(7607),t)},7607:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.RecognitionLocale=t.CoreSpeechRecognitionService=void 0;const o=s(6064),r=s(6246);Object.defineProperty(t,"RecognitionLocale",{enumerable:!0,get:function(){return r.RecognitionLocale}});const a=s(5565);class n{static getInstance(){return this._||(this._=new n),this._}constructor(){this.O=a.UserAudioProviderService.getInstance(),this.$=!1,this.C=[],this.I=e=>{try{this.T(e)}catch(e){this.P(r.RecognitionError.RecognitionProcessingFailure),this.L()}},this.F=e=>{var t;null===(t=this.R)||void 0===t||t.trigger(r.SpeechRecognitionServiceEvent.ASRVisualData,e)},this.N=()=>i(this,void 0,void 0,(function*(){var e;if(this.V.tokenGenerator){const t=yield this.U.get();null===(e=this.B)||void 0===e||e.send(`Bearer ${t.token}`)}this.W()})),this.q=()=>{this.$&&this.L()},this.G=e=>{try{const t=JSON.parse(e.data);if(!t.event&&t.code)return;const s=function(e){let t,s;const i=e.requestId,o=e.nbest;"partialResult"===e.event?(t="partial",s=o[0].utterance):(null==o?void 0:o.length)?(t="final",s=o[0].utterance):(t="error",s=e.resultCode?r.RecognitionError.RecognitionTooMuchSpeechTimeout:r.RecognitionError.RecognitionNoSpeechTimeout);return{requestId:i,type:t,text:s,message:e}}(t);this.Y(s)}catch(e){this.P(r.RecognitionError.RecognitionProcessingFailure),this.L()}},this.J=()=>{var e;this.K()&&(this.P(r.RecognitionError.RecognitionProcessingFailure),null===(e=this.B)||void 0===e||e.close())},this.O.on(a.UserAudioEvent.AnalyserData,this.F),this.O.on(a.UserAudioEvent.AudioData,this.I)}startRecognition(){return i(this,void 0,void 0,(function*(){var e;if(!this.$){if(this.$=!0,this.B){const e=this.B.readyState;if(e===r.ConnectionState.Closing||e===r.ConnectionState.Connecting)return}yield this.O.start(),null===(e=this.R)||void 0===e||e.trigger(r.SpeechRecognitionServiceEvent.ASRStart),this.X||(yield this.ee()),this.B=this.te(this.X)}}))}stopRecognition(){return i(this,void 0,void 0,(function*(){return this.se()}))}setConfig(e){return i(this,void 0,void 0,(function*(){return e.recognitionLocale||(e.recognitionLocale=r.RecognitionLocale.EN_US),e.tokenGenerator&&(this.U=o.AuthTokenService.getInstance()),this.V=e,this.R=e.dispatcher,this.ee()}))}setLocale(e){(0,r.isValidLocale)(e)&&this.V&&(this.V.recognitionLocale=e,this.ee().catch((e=>{console.warn("[WebSDK][RecognitionService] - Failed to get server URL",e)})))}T(e){var t;this.K()&&!this.C.length?null===(t=this.B)||void 0===t||t.send(e):this.C.push(e)}Y(e){var t;null===(t=this.R)||void 0===t||t.trigger(r.SpeechRecognitionServiceEvent.ASRResponse,e),["final","error"].includes(e.type)&&this.L()}ee(){return i(this,void 0,void 0,(function*(){this.X=yield c(this.V,this.U)}))}te(e){var t;try{const t=new WebSocket(e);return t.onopen=this.N,t.onclose=this.q,t.onmessage=this.G,t.onerror=this.J,t}catch(e){const s=new Error(r.RecognitionError.RecognitionNotReady);throw null===(t=this.R)||void 0===t||t.trigger(r.SpeechRecognitionServiceEvent.ASRError,s),s}}P(e){var t;null===(t=this.R)||void 0===t||t.trigger(r.SpeechRecognitionServiceEvent.ASRResponse,{requestId:"",text:e,type:"error"})}W(){var e;if(this.K())for(;this.C.length;){const t=this.C.shift();t&&(null===(e=this.B)||void 0===e||e.send(t))}}K(){var e;return(null===(e=this.B)||void 0===e?void 0:e.readyState)===r.ConnectionState.Open}L(){this.se().catch((e=>{console.warn("[WebSDK][EndRecognition]",e)}))}se(){return i(this,void 0,void 0,(function*(){var e;if(!this.$)return;this.$=!1;const t=this.B;this.K()&&(null==t||t.send("Done")),null==t||t.close(),this.B=void 0,this.C=[],yield this.O.stop(),null===(e=this.R)||void 0===e||e.trigger(r.SpeechRecognitionServiceEvent.ASRStop)}))}}t.CoreSpeechRecognitionService=n;const c=(e,t)=>i(void 0,void 0,void 0,(function*(){if(e.tokenGenerator){const s=yield t.get();e.channelId=s.getClaim("channelId"),e.userId=s.getClaim("userId")}if(!e.channelId||!e.userId)throw Error(r.RecognitionError.RecognitionNotReady);return function(e){const{channelId:t,userId:s,tokenGenerator:i,URI:r}=e,a=`ws${e.isTLS?"s":""}://`,n=`${l}/${e.recognitionLocale}/${h}`,c=Object.assign({channelId:t,userId:s,encodeURI:"audio/raw"},i&&{jwtInBody:"true"});return(0,o.buildURL)(a,r,c,n)}(e)})),l="/voice/stream/recognize",h="generic"},1794:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.CoreSpeechSynthesisService=void 0;const o=s(6246),r=s(6064);let a=1,n=1,c=1;const l=window,h=l.addEventListener,d=l.speechSynthesis,p=l.SpeechSynthesisUtterance,u=l.navigator,g=clearTimeout;function m(){return new Promise((e=>{b(e),d.addEventListener("voiceschanged",(()=>{b(e)}))}))}function b(e){const t=d.getVoices();if(t.length){e(function(e){if(!Array.isArray(e))return e.ie;return e}(v(t)))}}t.CoreSpeechSynthesisService=class{constructor(){if(this.$=!1,this.R=(0,r.generateEventDispatcher)(),!l||!d||!p)throw Error("TTSNoWebAPI");w().then((e=>{this.oe=e})).catch((()=>{this.oe=void 0})),h("beforeunload",(e=>{d.cancel(),g(this.re),delete e.returnValue})),h("click",(()=>{d&&(d.cancel(),d.resume(),d.speak(new p(" ")))}),{once:!0})}setConfig(e){return Promise.resolve()}speak(e){if(this.oe){const t=new p(e);t.voice=this.oe,t.pitch=a,t.rate=n,t.volume=c,d.paused&&d.resume(),this.$||(this.$=!0,this.R.trigger(o.SpeechSynthesisServiceEvent.TTSStart)),d.speak(t),this.oe.localService||(g(this.re),k((e=>this.re=e)))}}cancel(){d.speaking&&(d.cancel(),g(this.re))}getVoices(){return i(this,void 0,void 0,(function*(){return m()}))}setVoice(e){return i(this,void 0,void 0,(function*(){return function(e){const t=e.map((e=>Object.assign({lang:"",name:""},e)));return m().then((e=>{for(const s of t)for(const t of e)if(y(s.lang,t.lang)&&y(s.name,t.name))return t;for(const s of t)for(const t of e)if(y(s.lang,t.lang))return t;for(const s of t)for(const t of e)if(t.lang.includes(s.lang))return t;return w()}))}(e).then((e=>{var t,s,i;this.oe=e,a=null!==(t=e.pitch)&&void 0!==t?t:1,n=null!==(s=e.rate)&&void 0!==s?s:1,c=null!==(i=e.volume)&&void 0!==i?i:1}))}))}getVoice(){return this.oe}on(e,t){this.R.bind(e,t)}off(e,t){this.R.unbind(e,t)}};const f=["Albert","Bad News","Bahh","Bells","Boing","Bubbles","Cellos","Good News","Jester","Organ","Superstar","Trinoids","Whisper","Wobble","Zarvox"],v=e=>e.filter((e=>!f.includes(e.name)));function w(){return m().then((e=>{let t;const s=e.filter((e=>e.default));if(1===s.length&&(t=s[0]),!t){const s=null==u?void 0:u.language;s&&(t=e.find((e=>y(e.lang,s))))}if(!t){const s=null==u?void 0:u.language.substring(0,2);s&&(t=e.find((e=>_(e.lang).includes(s))))}return t||(t=e[0]),t}))}const x=1e4;function k(e){const t=l.setTimeout((()=>{d.speaking&&(d.pause(),d.resume(),k(e))}),x);e(t)}function y(e,t){return _(e)===_(t)}const _=e=>e.toLowerCase()},1606:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},5214:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.BaseChatConnection=void 0;const i=s(8203),o=s(1668);t.BaseChatConnection=class{constructor(e){this.dispatcher=e,this.state=i.ConnectionState.Closed}getState(){return this.state}isOpen(){return this.state===i.ConnectionState.Open}isClosed(){return this.state===i.ConnectionState.Closed}on(e,t){this.dispatcher.bind(e,t)}off(e,t){this.dispatcher.unbind(e,t)}setState(e){this.state=e,this.dispatcher.trigger(o.CoreEvent.State,e)}}},8203:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.ConnectionState=void 0;t.ConnectionState={Connecting:0,Open:1,Closing:2,Closed:3}},9170:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},3747:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(5214),t),o(s(8203),t),o(s(9170),t)},5573:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.CoreError=t.CoreApiError=void 0;const i=s(6064),o=s(97),r={ConnectionNone:"ConnectionNone",ConnectionExplicitClose:"ConnectionExplicitClose",MessageInvalid:"MessageInvalid",NetworkFailure:"NetworkFailure",NetworkOffline:"NetworkOffline",ProfileInvalid:"ProfileInvalid",TtsNotAvailable:"TtsNotAvailable",TTSNoWebAPI:"TTSNoWebAPI",SuggestionsEmptyRequest:"SuggestionsEmptyRequest",SuggestionsInvalidRequest:"SuggestionsInvalidRequest",SuggestionsTimeout:"SuggestionsTimeout",UploadBadFile:"UploadBadFile",UploadMaxSize:"UploadMaxSize",UploadNetworkFail:"UploadNetworkFail",UploadNotAvailable:"UploadNotAvailable",UploadUnauthorized:"UploadUnauthorized",UploadZeroSize:"UploadZeroSize",LocationNoAPI:"LocationNoAPI",LocationNotAvailable:"LocationNotAvailable",LocationTimeout:"LocationTimeout",LocationInvalid:"LocationInvalid"};t.CoreApiError=r;const a=Object.assign(Object.assign(Object.assign({},r),i.AuthError),o.RecognitionError);t.CoreError=a},8539:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.CoreEvent=t.ConnectionEvent=void 0;const i=s(97),o=s(6129),r={Open:"open",Close:"close",Error:"error",Message:"message",MessageReceived:"message:received",MessageSent:"message:sent",State:"state"};t.ConnectionEvent=r;const a=Object.assign(Object.assign(Object.assign(Object.assign({},i.SpeechSynthesisServiceEvent),i.SpeechRecognitionServiceEvent),r),o.ExecuteActionType);t.CoreEvent=a},2239:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},1668:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(5573),t),o(s(8539),t),o(s(2239),t)},6246:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(1606),t),o(s(3747),t),o(s(1668),t),o(s(6129),t),o(s(97),t),o(s(3743),t)},4834:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(2950),t),o(s(1811),t),o(s(3506),t),o(s(9583),t)},2950:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.appendRequestId=void 0,t.buildPostbackMessage=function(e){var t;let s;s="label"in e?e.label:null!==(t=e.text)&&void 0!==t?t:l;const i={text:s,postback:e.postback,type:o.MessageType.Postback};return a(i)},t.buildUserAttachmentMessage=function(e,t,s){const i=function(e){const t=e.split("/")[0].toLowerCase();switch(t){case o.AttachmentType.Audio:case o.AttachmentType.Image:case o.AttachmentType.Video:return t;default:return o.AttachmentType.File}}(e),r={type:o.MessageType.Attachment,attachment:{type:i,url:t,title:s}};return a(r)},t.buildUserMessage=a,t.buildUserTextMessage=function(e,t){const s=a({text:e,type:o.MessageType.Text});t&&(s.sdkMetadata?s.sdkMetadata.speechId=t:s.sdkMetadata={speechId:t});return s},t.getUtteranceText=function(e,t){const s=e.messagePayload;let r=l;if(s.voice)return x(function(e){var t;const s=[null===(t=e.voice)||void 0===t?void 0:t.text];switch(e.type){case o.MessageType.Card:s.push(function(e){if(!(null==e?void 0:e.length))return l;return e.filter((e=>e.voice)).map((e=>{var t;const s=[];return e.voice&&s.push(null===(t=e.voice)||void 0===t?void 0:t.text),s.push(w(e.actions)),s.filter(Boolean).join(c)})).filter(Boolean).join(c)}(e.cards));break;case o.MessageType.Form:case o.MessageType.TableForm:s.push(function(e){if(!(null==e?void 0:e.length))return l;return e.filter(Boolean).map((e=>e.voice&&e.voice.text)).filter(Boolean).join(c)}(e.forms))}return s.push(w(e.actions)),s.push(w(e.globalActions)),s.filter(Boolean).join(c)}(e.messagePayload));switch(s.type){case o.MessageType.Attachment:r=function(e,t){return t[`${e.type}_${e.attachment.type}`]}(s,t);break;case o.MessageType.Card:r=function(e,t){const s=e.cards;let i=l;if(null==s?void 0:s.length){const e=t.card,o=e?e.includes("{0}")?e:`${e} {0}`:l,r=s.length>1;i=s.filter((e=>e.title)).map(((e,t)=>{const s=[r?o.replace("{0}",`${t+1}`):l];return e.voice?s.push(e.voice.text):(s.push(e.title),s.push(e.description)),s.push(u(e.actions)),s.filter(Boolean).join(c)})).filter(Boolean).join(c)}return i}(s,t);break;case o.MessageType.Location:r=function(e){const t=e.location;return`${t.title?`${t.title}${c}`:l}${t.latitude},${t.longitude}`}(s);break;case o.MessageType.Text:case o.MessageType.TextStream:r=s.text;break;case o.MessageType.Table:r=function(e,t){return g(e.paginationInfo)+e.rows.filter((e=>{var t;return null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.length})).map(((e,s)=>b(e,s,t))).filter(Boolean).join(c)}(s,t);break;case o.MessageType.Form:r=function(e,t){return g(e.paginationInfo)+e.forms.filter((e=>e)).map(((e,s)=>{const i=(e.title?`${e.title}: `:l)+m(e,t);return i?`${(t.itemIterator||l).replace("{0}",`${s+1}`)}: ${i}`:l})).filter(Boolean).join(c)}(s,t);break;case o.MessageType.TableForm:r=function(e,t){return g(e.paginationInfo)+e.rows.filter((e=>{var t;return null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.length})).map(((s,i)=>b(s,i,t)+c+m(e.forms[i],t))).filter(Boolean).join(c)}(s,t);break;case o.MessageType.EditForm:r=function(e){var t,s;return null!==(s=null!==(t=e.errorMessage)&&void 0!==t?t:e.title)&&void 0!==s?s:l}(s)}return(0,i.pipe)(function(e,t){if(e.type===o.MessageType.EditForm&&e.errorMessage)return t;const s=[];return s.push(e.headerText),s.push(t),s.push(u(e.actions)),s.push(e.footerText),s.push(u(e.globalActions)),s.filter(Boolean).join(c)}(s,r),x,k,v)};const i=s(6064),o=s(1683),r=s(9583);function a(e){return n({messagePayload:e})}const n=e=>e.requestId?e:Object.assign(Object.assign({},e),{requestId:(0,i.generateID)({prefix:"wsreq",separator:"/"})});t.appendRequestId=n;const c="; ",l="",h=/<[^>]+>/g,d=/&#(\d+);/g,p=/&#[xX]([\da-fA-F]+);/g;function u(e){return e?e.filter((e=>e.type!==o.ActionType.SubmitForm)).map((e=>e.voice?e.voice.text:e.label||l)).filter(Boolean).join(c):l}function g(e){if(e&&e.totalCount>e.rangeSize){const t=e.status;return t?t+c:l}return l}function m(e,t){let s=u(e.actions);return s&&(s=c+s),(0,r.isFormEntityWithFields)(e)?f(e.fields,t)+s:e.formRows.filter((e=>null==e?void 0:e.columns.length)).map((e=>e.columns.filter((e=>null==e?void 0:e.fields.length)).map((e=>f(e.fields,t))).filter(Boolean).join(c))).filter(Boolean).join(c)+s}function b(e,t,s){return`${(s.itemIterator||l).replace("{0}",`${t+1}`)}: ${f(e.fields,s)}`}function f(e,t){return(null==e?void 0:e.length)?e.filter((e=>e)).map((e=>function(e,t){var s;const i=null!==(s=e.label)&&void 0!==s?s:l,r=i?`${i}: `:l;switch(e.displayType){case o.ReadOnlyDisplayType.Text:return r+(e.value||l);case o.ReadOnlyDisplayType.Link:return r+(t.linkField||l).replace("{0}",i);case o.ReadOnlyDisplayType.Action:const s=e.action;return r+(s.voice?s.voice.text:s.label)||l;default:return i}}(e,t))).filter(Boolean).join(c):l}function v(e){if(null==e?void 0:e.length){const t=e.replace((0,i.resetRegex)(d),((e,t)=>String.fromCharCode(t))).replace((0,i.resetRegex)(p),((e,t)=>{const s=Number.parseInt(`0x${t}`,16);return String.fromCharCode(s)}));return(0,i.removeDisplayNoneAndDecode)(t).replace((0,i.resetRegex)(h),l)}return l}function w(e){return(null==e?void 0:e.length)?e.filter((e=>e.type!==o.ActionType.SubmitForm)).map((e=>e.voice&&e.voice.text)).filter(Boolean).join(c):l}const x=e=>e.replaceAll(/([-.,?:;!]);/g,"$1"),k=e=>e.replaceAll(/\r|\n|<br\/?>/gim,c)},1811:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.isDisplayableMessage=t.isDelegatableMessage=void 0;const i=s(1683),o=[i.MessageType.Attachment,i.MessageType.Card,i.MessageType.EditForm,i.MessageType.Error,i.MessageType.Form,i.MessageType.Location,i.MessageType.Postback,i.MessageType.Raw,i.MessageType.Table,i.MessageType.TableForm,i.MessageType.Text,i.MessageType.TextStream];t.isDisplayableMessage=e=>{const t=e.messagePayload.type;return o.includes(t)};t.isDelegatableMessage=e=>{let t=!0;const s=e.messagePayload;if(s){s.type===i.MessageType.TextStream&&(t=!1)}return t}},3506:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.isReadOnlyField=p,t.isValidMessage=function(e){const t=!1;if(!(0,r.isMessage)(e))return t;const s=e.messagePayload;if(!(0,r.isMessagePayload)(s))return t;if(s.actions&&!a(s.actions))return t;if(s.globalActions&&!a(s.globalActions))return t;return Boolean(function(e){switch(e.type){case o.MessageType.Attachment:return function(e){const t=e.attachment;return!(!(null==t?void 0:t.type)||!t.url)}(e);case o.MessageType.Card:return function(e){let t=!1;if(e.layout&&e.cards.length){t=!0;for(const t of e.cards){if(!t.title)return!1;if(t.actions&&!a(t.actions))return!1}}return t}(e);case o.MessageType.CloseSession:case o.MessageType.SessionClosed:return!0;case o.MessageType.Location:return function(e){const t=e.location;return!(!(null==t?void 0:t.latitude)||!t.longitude)}(e);case o.MessageType.Postback:return function(e){return!!e.postback}(e);case o.MessageType.Text:return function(e){return!!e.text}(e);case o.MessageType.TextStream:return function(e){return"string"==typeof e.text&&!!e.streamState}(e);case o.MessageType.Table:return n(e);case o.MessageType.Form:return c(e);case o.MessageType.TableForm:return function(e){return n(e)&&c(e)}(e);case o.MessageType.EditForm:return function(e){const t=e.fields,s=e.formColumns,i=e.formRows;return(null==t?void 0:t.length)>0&&t.every((e=>function(e){const t=e.displayType,s=e;return t&&Object.values(o.DisplayType).includes(t)&&(function(e){const t=e.id;let s=!1;switch(e.displayType){case o.DisplayType.SingleSelect:case o.DisplayType.MultiSelect:s=function(e){const t=e.layoutStyle,s=e.options;return void 0!==t&&"string"==typeof t&&t.length>0&&void 0!==s&&s.length>0&&s.every((e=>function(e){const t=e.label,s=e.value;return void 0!==t&&"string"==typeof t&&t.length>0&&void 0!==s}(e)))}(e);break;case o.DisplayType.Toggle:s=function(e){const t=e.valueOn,s=e.valueOff;return void 0!==t&&"string"==typeof t&&t.length>0&&void 0!==s&&"string"==typeof s&&s.length>0}(e);break;case o.DisplayType.DatePicker:case o.DisplayType.TimePicker:case o.DisplayType.TextInput:case o.DisplayType.NumberInput:s=!0}return s&&void 0!==t&&t.length>0}(s)||h(e))}(e)))&&"number"==typeof s&&s>0||(null==i?void 0:i.length)>0}(e);case o.MessageType.FormSubmission:return function(e){return!!e.submittedFields}(e);case o.MessageType.InboundEvent:case o.MessageType.OutboundEvent:return function(e){return!!e.eventType&&!!e.eventVersion&&!!e.eventData}(e);case o.MessageType.Status:return function(e){return e.type===o.MessageType.Status&&"status"in e}(e);case o.MessageType.Command:return function(e){return e.type===o.MessageType.Command&&"command"in e}(e);case o.MessageType.UpdateApplicationContextCommand:return function(e){const{context:t,source:s}=e;return void 0!==t&&"string"==typeof t&&u.includes(s)}(e);case o.MessageType.GetDebugInfoCommand:return function(e){return void 0!==e.infoTypes&&e.infoTypes.length>0}(e);case o.MessageType.Error:return g(e)}return!1}(s))},t.isValidProfileMessage=function(e){return(0,i.isObject)(e)&&(0,i.isObject)(e.profile)};const i=s(6064),o=s(1683),r=s(9583);function a(e){for(const t of e)if(!t.type||!(t.label&&"string"==typeof t.label||t.imageUrl&&"string"==typeof t.imageUrl))return!1;return!0}function n(e){const t=e.headings,s=e.rows;return t&&t.length>0&&s&&s.length>0&&t.every((e=>function(e){const t=e.label;return void 0!==t&&t.length>0}(e)))&&s.every((e=>l(e)))}function c(e){const t=e.forms;return t&&t.length>0&&t.every((e=>(0,r.isFormEntityWithFields)(e)&&l(e)||(0,r.isFormEntityWithRows)(e)))}function l(e){const t=e.fields;return t&&t.length>0&&t.every((e=>h(e)))}function h(e){return!!e.displayType&&p(e)}const d=Object.values(o.ReadOnlyDisplayType);function p(e){return e&&d.includes(e.displayType)}const u=Object.values(o.ContextSource);const g=e=>!!e.errorMessage},9583:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.isSuggestionPayload=t.isSuggestionMessage=t.isStateMessage=t.isPostbackPayload=t.isPong=t.isPing=t.isMessagePayload=t.isMessage=t.isFormEntityWithRows=t.isFormEntityWithFields=t.isEventPayload=t.isEditFormPayloadWithRows=t.isEditFormPayloadWithFields=void 0;const i=s(6064),o=s(1683),r=e=>(0,i.isObject)(e)&&"messagePayload"in e;t.isMessage=r;const a=e=>(0,i.isObject)(e)&&"type"in e;t.isMessagePayload=a;t.isPostbackPayload=e=>a(e)&&e.type===o.MessageType.Postback;t.isEventPayload=e=>a(e)&&(e.type===o.MessageType.InboundEvent||e.type===o.MessageType.OutboundEvent);t.isFormEntityWithFields=e=>void 0!==e.fields;t.isFormEntityWithRows=e=>void 0!==e.formRows;t.isEditFormPayloadWithFields=e=>void 0!==e.fields;t.isEditFormPayloadWithRows=e=>void 0!==e.formRows;const n=e=>a(e)&&e.type===o.MessageType.Suggest;t.isSuggestionPayload=n;t.isSuggestionMessage=e=>r(e)&&n(e.messagePayload);const c=e=>(0,i.isObject)(e)&&"state"in e;t.isStateMessage=c;t.isPing=e=>c(e)&&e.state.type===o.StateType.Ping;t.isPong=e=>c(e)&&e.state.type===o.StateType.Pong},6129:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(4834),t),o(s(1683),t)},3183:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.ActionType=void 0;t.ActionType={Call:"call",Client:"client",Location:"location",Popup:"popup",Postback:"postback",Share:"share",SubmitForm:"submitForm",Url:"url",Webview:"webview"}},3123:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.ActionStyle=t.ActionDisplayType=void 0;t.ActionStyle={Primary:"primary",Danger:"danger",Default:"default"};t.ActionDisplayType={Button:"button",Icon:"icon",Link:"link"}},734:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},5835:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.ClientActionType=void 0;const i=s(4018),o=Object.assign(Object.assign({},i.ExecuteActionType),{COPY_MESSAGE_TEXT:"copyMessageText"});t.ClientActionType=o},7662:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(3183),t),o(s(3123),t),o(s(734),t),o(s(5835),t),o(s(4539),t),o(s(4566),t),o(s(7833),t),o(s(7180),t),o(s(5507),t),o(s(1083),t),o(s(6805),t)},4539:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},4566:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},7833:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},7180:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},5507:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},1083:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},6805:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},1683:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(7662),t),o(s(4771),t),o(s(4018),t),o(s(235),t),o(s(7446),t),o(s(8256),t),o(s(4620),t)},373:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},2426:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},3617:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},6465:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},8130:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},6880:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},8402:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},8421:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},3081:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},4771:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(373),t),o(s(2426),t),o(s(3617),t),o(s(6465),t),o(s(8130),t),o(s(6880),t),o(s(8402),t),o(s(8421),t),o(s(3081),t),o(s(9131),t),o(s(9957),t),o(s(8673),t),o(s(6781),t),o(s(3166),t),o(s(4564),t),o(s(1259),t),o(s(2658),t),o(s(3568),t)},9131:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},9957:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},8673:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},6781:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.pongMessage=t.pingMessage=t.TokenType=t.StateType=void 0,t.StateType={Auth:"auth",Ping:"ping",Pong:"pong",Token:"token"},t.TokenType={JWT:"jwt"},t.pingMessage={state:{type:t.StateType.Ping}},t.pongMessage={state:{type:t.StateType.Pong}}},3166:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},4564:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},1259:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},2658:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},3568:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},8799:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},994:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.AttachmentType=void 0;t.AttachmentType={Image:"image",Video:"video",Audio:"audio",File:"file"}},1168:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},570:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},5187:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},673:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},4426:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(994),t),o(s(1168),t),o(s(570),t),o(s(5187),t),o(s(673),t),o(s(8934),t)},8934:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},7485:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.ReadOnlyDisplayType=t.DisplayType=void 0;const s={Text:"text",Link:"link",Action:"action",Media:"media"};t.ReadOnlyDisplayType=s;const i=Object.assign(Object.assign({},s),{SingleSelect:"singleSelect",MultiSelect:"multiSelect",DatePicker:"datePicker",TimePicker:"timePicker",Toggle:"toggle",TextInput:"textInput",NumberInput:"numberInput"});t.DisplayType=i},3592:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},6757:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},125:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},3965:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},9359:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},916:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},3802:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.ExecuteActionType=void 0,t.ExecuteActionType={NAVIGATE:"navigate",QUERY:"query",UPDATE_FIELDS:"updateFields",CUSTOM:"custom"}},796:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},2813:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},1946:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.InfoType=void 0,t.InfoType={llmCalls:"llmCalls",semanticIndexCalls:"semanticIndexCalls",variables:"variables",applicationContext:"applicationContext",llmConversationHistory:"llmConversationHistory"}},4018:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(8799),t),o(s(4426),t),o(s(7485),t),o(s(3592),t),o(s(6757),t),o(s(125),t),o(s(3965),t),o(s(9359),t),o(s(916),t),o(s(3802),t),o(s(796),t),o(s(2813),t),o(s(1946),t),o(s(9985),t),o(s(2315),t),o(s(5638),t),o(s(2715),t),o(s(1962),t),o(s(6248),t),o(s(9274),t),o(s(3623),t),o(s(2240),t),o(s(8193),t),o(s(5290),t),o(s(431),t)},9985:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},2315:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},5638:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.MessageType=void 0;t.MessageType={Attachment:"attachment",Card:"card",Location:"location",Postback:"postback",Raw:"raw",Suggest:"suggest",Text:"text",CloseSession:"closeSession",SessionClosed:"sessionClosed",Table:"table",Form:"form",TableForm:"tableForm",Status:"status",EditForm:"editForm",FormSubmission:"formSubmission",InboundEvent:"inboundEvent",OutboundEvent:"outboundEvent",TextStream:"textStream",Command:"command",Error:"error",UpdateApplicationContextCommand:"updateApplicationContextCommand",ExecuteApplicationActionCommand:"executeApplicationActionCommand",GetDebugInfoCommand:"getDebugInfoCommand"}},2715:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},1962:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},6248:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},9274:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},3623:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},2240:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},8193:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},5290:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},431:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.ContextSource=void 0,t.ContextSource={ChatWindow:"chatWindow",CompactChat:"compactChat",UIWidget:"UIWidget",Skill:"skill"}},235:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.SkillMessageSource=t.SenderType=void 0;t.SenderType={Skill:"bot",User:"user"};t.SkillMessageSource={Agent:"AGENT",Bot:"BOT"}},7446:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},8256:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},4620:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},97:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(6143),t),o(s(6271),t),o(s(1866),t)},6143:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.RecognitionError=void 0;t.RecognitionError={RecognitionNotAvailable:"RecognitionNotAvailable",RecognitionNotReady:"RecognitionNotReady",RecognitionNoAPI:"RecognitionNoAPI",RecognitionProcessingFailure:"RecognitionProcessingFailure",RecognitionTooMuchSpeechTimeout:"RecognitionTooMuchSpeechTimeout",RecognitionNoSpeechTimeout:"RecognitionNoSpeechTimeout",RecognitionMultipleConnection:"RecognitionMultipleConnection"}},6271:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.SpeechRecognitionServiceEvent=t.RecognitionLocale=void 0,t.isValidLocale=function(e){return i.includes(e)};const s={DE_DE:"de-de",EN_AU:"en-au",EN_GB:"en-gb",EN_IN:"en-in",EN_US:"en-us",ES_ES:"es-es",FR_FR:"fr-fr",HI_IN:"hi-in",IT_IT:"it-it",PT_BR:"pt-br"};t.RecognitionLocale=s;t.SpeechRecognitionServiceEvent={ASRStart:"asr:start",ASRStop:"asr:stop",ASRError:"asr:error",ASRResponse:"asr:response",ASRVisualData:"asr:visualdata"};const i=Object.keys(s).map((e=>s[e]))},1866:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.SpeechSynthesisServiceEvent=void 0;t.SpeechSynthesisServiceEvent={TTSStart:"tts:start",TTSStop:"tts:stop"}},3743:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.getCurrentPosition=function(){if(!c)return a(o.CoreError.LocationNoAPI);return new Promise(((e,t)=>{c.getCurrentPosition((t=>{const s=t.coords,i=Object.assign(Object.assign({},s),{latitude:h(s.latitude),longitude:h(s.longitude)});e(i)}),(e=>{let s;switch(e.code){case e.POSITION_UNAVAILABLE:s=o.CoreError.LocationNotAvailable;break;case e.TIMEOUT:s=o.CoreError.LocationTimeout;break;case e.PERMISSION_DENIED:default:s=o.CoreError.LocationNoAPI}t(r(s))}),{enableHighAccuracy:!0,timeout:5e3})}))},t.getError=r,t.getRejectPromiseError=a,t.isValidLocation=function(e){const{latitude:t,longitude:s}=e;return(0,i.isNumber)(t)&&(0,i.isNumber)(s)&&(0,i.isBetween)(t,d,p)&&(0,i.isBetween)(s,u,g)};const i=s(6064),o=s(1668);function r(e){return Error(e)}function a(e){return Promise.reject(r(e))}const n=navigator,c=null==n?void 0:n.geolocation,l=1e5,h=e=>Math.round(e*l)/l;const d=-90,p=90,u=-180,g=180},1340:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.MAX_MB=t.CoreAttachmentService=void 0;const o=s(6064),r=s(6246);t.MAX_MB=25;const a="/chat/v1/attachments",n="channelId",c="userId";class l{static getInstance(){return this._||(this._=new l),this._}setConfig(e){return i(this,void 0,void 0,(function*(){if(this.ae=e,e.tokenGenerator){this.U=o.AuthTokenService.getInstance();const t=yield this.U.get();e[n]=t.getClaim(n),e[c]=t.getClaim(c)}this.ne=function(e){const t=`http${e.isTLS?"s":""}://`,{URI:s,channelId:i,userId:r}=e;return(0,o.buildURL)(t,s,{channelId:i,userId:r},a)}(e)}))}upload(e,t){return i(this,void 0,void 0,(function*(){if(!this.ne)throw Error(r.CoreError.UploadNotAvailable);const s=e.size;if(0===s)throw Error(r.CoreError.UploadZeroSize);if(s>26214400)throw Error(r.CoreError.UploadMaxSize);const i=new XMLHttpRequest,a=new Promise(((e,t)=>{const s=()=>t(Error(r.CoreError.UploadNetworkFail));(0,o.requestOn)(i,"readystatechange",(()=>{if(4===i.readyState)switch(i.status){case 200:{const t=JSON.parse(i.responseText);e(t);break}case 413:t(Error(r.CoreError.UploadMaxSize));break;case 415:t(Error(r.CoreError.UploadBadFile));break;default:s()}})),(0,o.requestOn)(i,"abort",s),(0,o.requestOn)(i,"error",s),(0,o.requestOn)(i,"timeout",s)})),n={file:e,options:t};if(this.ae.tokenGenerator){const e=yield this.U.get();n.token=e.token}return this.ce(i,n),a}))}ce(e,{file:t,options:s,token:i}){const r=new FormData;r.append("attachment",t,encodeURI(t.name)),e.open("POST",this.ne),(0,o.setRequestHeader)(e,"x-oda-meta-file-size",t.size.toString()),i&&((0,o.setRequestHeader)(e,"Authorization",`Bearer ${i}`),this.ae.enableAttachmentSecurity&&((0,o.setRequestHeader)(e,"x-oda-meta-file-isProtected","True"),(0,o.setRequestHeader)(e,"x-oda-meta-file-authType","ChannelClientAuth"))),e.send(r),(null==s?void 0:s.onInitUpload)&&s.onInitUpload(e)}}t.CoreAttachmentService=l},5383:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(1340),t),o(s(2712),t)},2712:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.FILE_TYPES=void 0,t.FILE_TYPES={AUDIO:".aac, .amr, .m4a, .mp3, .mp4a, .mpga, .oga, .ogg, .wav, audio/*",FILE:".7z, .csv, .doc, .docx, .eml, .ics, .key, .log, .msg, .neon, .numbers, .odt, .pages, .pdf, .pps, .ppsx, .ppt, .pptx, .rtf, .txt, .vcf, .xls, .xlsx, .xml, .yml, .yaml, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document",IMAGE:".gif, .jfif, .jpeg, .jpg, .png, .svg, .tif, .tiff, .webp, image/*",VIDEO:".3g2, .3gp, .avi, .m4v, .mov, .mp4, .mpeg, .mpg, .ogv, .qt, .webm, .wmv, video/*",ALL:""},t.FILE_TYPES.ALL=`${t.FILE_TYPES.AUDIO},${t.FILE_TYPES.FILE},${t.FILE_TYPES.IMAGE},${t.FILE_TYPES.VIDEO}`},468:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.ChatConnectionController=void 0;const o=s(6064),r=s(8147),a=s(3278);t.ChatConnectionController=class{constructor(e){this.le=e,this.he=0,this.pe=()=>i(this,void 0,void 0,(function*(){try{yield this.ue.close(),this.ue=this.ge,yield this.open()}catch(e){}})),e.isLongPoll&&(this.le.retryInterval=2e3,this.le.retryMaxAttempts=5),this.R=e.dispatcher,this.ge=new a.WebSocketConnection({authService:e.authService,url:(0,o.getWebSocketURL)(e.baseURL,e.searchParams,e.isTLS,e.channel),retryInterval:e.retryInterval,retryMaxAttempts:e.retryMaxAttempts,dispatcher:this.R}),this.ue=this.ge}open(){return i(this,void 0,void 0,(function*(){try{yield this.ue.open(),this.le.isLongPoll&&this.ue===this.ge&&this.me()}catch(e){if(this.le.isLongPoll&&this.ue!==this.be)return this.ue=this.fe(),yield this.ue.open(),void this.ve();throw e}}))}close(){return clearInterval(this.he),this.ue.close()}send(e){return this.ue.send(e)}isOpen(){return this.ue.isOpen()}isClosed(){return this.ue.isClosed()}getState(){return this.ue.getState()}updateConnectionUrl(e){var t;this.le=Object.assign(Object.assign({},this.le),{baseURL:e.URI,searchParams:{channelId:e.channelId,userId:e.userId},isTLS:e.isTLS,channel:e.channel}),this.ge.updateConnectionUrl(e),null===(t=this.be)||void 0===t||t.updateConnectionUrl(e)}on(e,t){this.R.bind(e,t)}off(e,t){this.R.unbind(e,t)}setSuggestionPromise(e){this.ge.setSuggestionPromise(e)}me(){var e;clearInterval(this.he),(null===(e=this.be)||void 0===e?void 0:e.isOpen())&&this.be.close()}fe(){return this.be||(this.be=new r.LongPollConnection({url:(0,o.getLongPollURL)(this.le.baseURL,this.le.searchParams,this.le.isTLS),authService:this.le.authService,dispatcher:this.R})),this.be}ve(){this.he=window.setInterval((()=>{this.pe()}),3e5)}}},9694:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.ChatServerService=void 0;const o=s(6064),r=s(6246),a=s(468),n=s(7022);t.ChatServerService=class{constructor(e){this.we=()=>{this.open().catch((e=>{var t;null===(t=this.V.dispatcher)||void 0===t||t.trigger(r.CoreEvent.Error,e)}))},this.xe=()=>{this.close().catch((e=>{var t;null===(t=this.V.dispatcher)||void 0===t||t.trigger(r.CoreEvent.Error,e)}))},this.ke=(e,t,s)=>!!e&&e!==this.V.URI||!!t&&t!==this.V.channelId||!!s&&s!==this.V.userId,this.V=Object.assign(Object.assign({},n.defaultConfig),e);const t=this.V;t.tokenGenerator&&(this.U=o.AuthTokenService.getInstance()),this.B=new a.ChatConnectionController({baseURL:t.URI,isLongPoll:t.isLongPoll,isTLS:t.isTLS,channel:t.channel,retryInterval:void 0!==t.retryInterval&&t.retryInterval>=0?1e3*t.retryInterval:5e3,retryMaxAttempts:void 0!==t.retryMaxAttempts&&t.retryMaxAttempts>=0?t.retryMaxAttempts:5,searchParams:{channelId:t.channelId,userId:t.userId},authService:this.U,dispatcher:t.dispatcher}),window.addEventListener("online",this.we),window.addEventListener("offline",this.xe)}open(e){return i(this,void 0,void 0,(function*(){const{URI:t,userId:s,channelId:i}=null!=e?e:{};if(this.isOpen()){if(!this.ke(t,i,s)&&!this.U)return;yield Promise.all([this.ye(t,i,s),this.close()])}else yield this.ye(t,i,s);yield this.B.open()}))}close(){return this.B.close()}getState(){return this.B.getState()}isOpen(){return this.B.isOpen()}send(e,t,s){return i(this,void 0,void 0,(function*(){let i;if(i="string"==typeof e?(0,r.buildUserTextMessage)(e,t):(0,r.isPostbackPayload)(e)?(0,r.buildPostbackMessage)(e):(0,r.isMessagePayload)(e)?(0,r.buildUserMessage)(e):e,!(0,r.isValidMessage)(i))throw Error(r.CoreError.MessageInvalid);if(s){const{sdkMetadata:e,threadId:t}=s;e&&(i=this._e(i,e)),t&&(i.threadId=t)}return i.userId=this.V.userId,this.V.enableCancelResponse?i=(0,r.appendRequestId)(i):delete i.requestId,this.B.send(i)}))}updateUser(e,t){return i(this,void 0,void 0,(function*(){let s=e;return(null==t?void 0:t.sdkMetadata)&&(s=this._e(e,t.sdkMetadata)),this.B.send(s)}))}sendDeviceToken(e,t){return i(this,void 0,void 0,(function*(){const s={state:{type:"token",deviceToken:e,deviceType:t,"store.undelivered.messages":!1,"notify.undelivered.skill.messages":!1}};yield this.B.send(s)}))}cancelRequest(e){console.debug("Requested to cancel",e)}getSuggestions(e){return i(this,void 0,void 0,(function*(){const t=new o.Deferred;this.B.setSuggestionPromise(t);let s={messagePayload:{query:e,threshold:30,type:r.MessageType.Suggest}};return this.V.enableCancelResponse&&(s=(0,r.appendRequestId)(s)),this.B.send(s).catch(null==t?void 0:t.reject),setTimeout((()=>{null==t||t.reject((0,r.getError)(r.CoreError.SuggestionsTimeout))}),1e4),null==t?void 0:t.promise}))}on(e,t){this.B.on(e,t)}off(e,t){this.B.off(e,t)}_e(e,t){return t&&(e.sdkMetadata=Object.assign(Object.assign({},e.sdkMetadata),t)),e}ye(e,t,s){return i(this,void 0,void 0,(function*(){const i=this.V;if((0,o.isNonEmptyString)(e)&&(i.URI=e),this.U){const e=yield this.U.get();i.channelId=e.getClaim("channelId"),i.userId=e.getClaim("userId")}else(0,o.isNonEmptyString)(t)&&(i.channelId=t),(0,o.isNonEmptyString)(s)&&(i.userId=s);this.B.updateConnectionUrl({URI:i.URI,channelId:i.channelId,userId:i.userId,isTLS:i.isTLS,channel:i.channel})}))}}},7022:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.defaultConfig=void 0;t.defaultConfig={isLongPoll:!1,isTLS:!0}},782:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(468),t),o(s(9694),t),o(s(7022),t),o(s(8147),t),o(s(3278),t)},8147:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.LongPollConnection=void 0;const o=s(6246),r=s(6064);class a extends o.BaseChatConnection{constructor(e){super(e.dispatcher),this.Oe=null,this.je=null,this.Me=0,this.url=e.url,this.authService=e.authService}open(){return i(this,void 0,void 0,(function*(){if(!this.isOpen()){if(navigator.onLine)return this.ze();throw Error(o.CoreError.NetworkOffline)}}))}close(){return i(this,void 0,void 0,(function*(){if(!this.isClosed())return this.$e()}))}send(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,s)=>{if(this.isOpen()){const i=new XMLHttpRequest;i.open("POST",this.url),(0,r.setRequestHeader)(i,"Content-Type","application/json"),i.onload=()=>{i.status>=200&&i.status<300?t(e):s(Error(i.responseText))},i.onerror=()=>{s(Error(o.CoreError.NetworkFailure))},this.Ce(i,JSON.stringify(e)).catch(s)}else s(Error(o.CoreError.ConnectionNone))}))}))}updateConnectionUrl(e){this.url=(0,r.getLongPollURL)(e.URI,{channelId:e.channelId,userId:e.userId},e.isTLS)}ze(){return i(this,void 0,void 0,(function*(){var e;if(!this.Oe){this.Oe=new r.Deferred,this.setState(o.ConnectionState.Connecting);try{yield this.Se(),this.N(),this.Ie()}catch(e){this.Oe&&(this.Oe.reject(e),this.Oe=null),this.q()}}return null===(e=this.Oe)||void 0===e?void 0:e.promise}))}$e(){return this.je||(this.Te.abort(),this.je=new r.Deferred,this.setState(o.ConnectionState.Closing),setTimeout((()=>{this.q()}),100)),this.je.promise}Se(){return new Promise(((e,t)=>{const s=new XMLHttpRequest;s.open("POST",this.url),(0,r.setRequestHeader)(s,"Content-Type","application/json"),s.onload=()=>{s.status>=200&&s.status<300?e():t(Error(s.responseText))},s.onerror=()=>{t(Error(o.CoreError.NetworkFailure))},this.Ce(s,JSON.stringify(o.pingMessage)).catch((e=>{t(e)}))}))}Ie(){this.isOpen()&&(this.Me>=5&&(this.Me=0,this.close().catch((()=>{}))),this.Te=new XMLHttpRequest,this.Te.open("GET",this.url),this.Te.onload=()=>{this.Me=0,200===this.Te.status&&this.Ae(this.Te.responseText),this.Ie()},this.Te.onerror=()=>{this.Me++,this.Ie()},this.Ce(this.Te).catch((()=>{this.Ie()})))}Ce(e,t){return i(this,void 0,void 0,(function*(){if(this.authService){const t=yield this.authService.get();(0,r.setRequestHeader)(e,"Authorization",`Bearer ${t.token}`)}e.send(t)}))}Ae(e){try{JSON.parse(e).forEach((e=>{this.G(JSON.parse(e))}))}catch(e){this.J(e)}}N(){var e,t;null===(e=this.Oe)||void 0===e||e.resolve(),this.Oe=null,null===(t=this.je)||void 0===t||t.reject(),this.je=null,this.setState(o.ConnectionState.Open),this.dispatcher.trigger(o.CoreEvent.Open)}q(){var e;null===(e=this.je)||void 0===e||e.resolve(),this.je=null,this.Oe=null,this.setState(o.ConnectionState.Closed),this.dispatcher.trigger(o.CoreEvent.Close)}G(e){this.dispatcher.trigger(o.CoreEvent.Message,e),this.dispatcher.trigger(o.CoreEvent.MessageReceived,e);const t=e.messagePayload;if(t.type===o.MessageType.ExecuteApplicationActionCommand){const e=t;this.dispatcher.trigger(e.actionType,e)}}J(e){this.dispatcher.trigger(o.CoreEvent.Error,e)}}t.LongPollConnection=a},3278:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.WebSocketConnection=void 0;const o=s(6246),r=s(6064),a=3e6,n=window;class c extends o.BaseChatConnection{constructor(e){super(e.dispatcher),this.Oe=null,this.je=null,this.Ee=!1,this.Pe=!1,this.Le=!1,this.Fe=0,this.Re=!1,this.Se=()=>{try{this.De=new WebSocket(this.url),this.De.onopen=this.Ne,this.De.onclose=this.He,this.De.onerror=this.Ve,this.De.onmessage=this.Ue}catch(e){this.Be()}},this.Ne=()=>i(this,void 0,void 0,(function*(){this.Re=!1,this.authService&&(yield this.We()),this.setState(o.ConnectionState.Open),this.N()})),this.He=e=>{this.qe(),this.Ee?(this.setState(o.ConnectionState.Closed),this.Ge(o.CoreError.ConnectionExplicitClose,e)):this.authService&&!this.Le&&1006!==e.code?(this.setState(o.ConnectionState.Closed),this.Ge(o.CoreError.AuthExpiredToken,e)):this.Re||this.Be(e)},this.Ve=e=>{this.Be(),this.Re=!0,this.J(e)},this.Ue=e=>{try{const t=JSON.parse(e.data);if((0,o.isPong)(t))this.Pe=!0;else if(h(t)&&this.Ze)this.Ze.resolve(t.suggestions);else{this.dispatcher.trigger(o.CoreEvent.Message,t),this.dispatcher.trigger(o.CoreEvent.MessageReceived,t);const e=t.messagePayload;if(e.type===o.MessageType.ExecuteApplicationActionCommand){const t=e;this.dispatcher.trigger(t.actionType,t)}}}catch(e){this.J(e)}},this.J=e=>{this.dispatcher.trigger(o.CoreEvent.Error,e)},this.De=null,this.url=e.url,this.authService=e.authService,this.Ye=e.retryInterval,this.Je=e.retryMaxAttempts}open(){return i(this,void 0,void 0,(function*(){if(!this.isOpen()){if(navigator.onLine)return this.Oe||(this.Oe=new r.Deferred,this.setState(o.ConnectionState.Connecting),this.Se()),this.Oe.promise;throw Error(o.CoreError.NetworkOffline)}}))}close(){return i(this,void 0,void 0,(function*(){var e;if(!this.isClosed())return this.Ee=!0,clearTimeout(this.Ke),this.je||(null===(e=this.De)||void 0===e||e.close(),this.je=new r.Deferred,this.setState(o.ConnectionState.Closing)),this.je.promise}))}send(e){return i(this,void 0,void 0,(function*(){var t;if((null===(t=this.De)||void 0===t?void 0:t.readyState)!==o.ConnectionState.Open)throw Error(o.CoreError.ConnectionNone);this.Le=!0;try{return this.De.send(JSON.stringify(e)),(0,o.isPing)(e)||(this.dispatcher.trigger(o.CoreEvent.Message,e),this.dispatcher.trigger(o.CoreEvent.MessageSent,e)),Promise.resolve(e)}catch(e){throw Error(o.CoreError.NetworkFailure)}}))}updateConnectionUrl(e){this.url=(0,r.getWebSocketURL)(e.URI,{channelId:e.channelId,userId:e.userId},e.isTLS,e.channel)}setSuggestionPromise(e){this.Ze=e}Be(e){this.setState(o.ConnectionState.Connecting),this.Fe<this.Je?(this.Fe++,this.Ke=n.setTimeout(this.Se,this.Ye)):(this.setState(o.ConnectionState.Closed),this.Ge(o.CoreError.NetworkFailure,e))}Ge(e,t){var s;null===(s=this.Oe)||void 0===s||s.reject(Error(e)),this.Oe=null,this.q(t)}We(){return i(this,void 0,void 0,(function*(){var e,t;this.Le=!1;try{const e=yield this.authService.get();yield this.send((t=e.token,{state:{token:t,tokenType:o.TokenType.JWT,type:o.StateType.Auth}})),setTimeout((()=>this.Le=!0),1e4)}catch(t){null===(e=this.Oe)||void 0===e||e.reject(Error(t)),this.Oe=null;try{yield this.close()}catch(e){}}}))}N(){var e,t,s;this.qe(),clearTimeout(this.Ke),this.Xe=this.Qe(),this.et=(s=this,n.setTimeout((()=>{l(s)}),a)),this.Fe=0,this.Ee=!1,this.Le=!1,null===(e=this.Oe)||void 0===e||e.resolve(),this.Oe=null,null===(t=this.je)||void 0===t||t.reject(),this.je=null,this.dispatcher.trigger(o.CoreEvent.Open)}q(e){var t;this.Fe=0,this.Ee=!1,this.Le=!1,null===(t=this.je)||void 0===t||t.resolve(),this.je=null,this.dispatcher.trigger(o.CoreEvent.Close,e)}Qe(){return n.setInterval((()=>{this.send(o.pingMessage).then((()=>{this.Pe=!1,this.tt()})).catch((()=>{}))}),3e4)}tt(){this.st=n.setTimeout((()=>{this.isOpen()&&!this.Pe&&l(this)}),1e4)}qe(){clearTimeout(this.et),clearInterval(this.Xe),clearTimeout(this.st)}}function l(e){return i(this,void 0,void 0,(function*(){try{yield e.close(),yield e.open()}catch(t){l(e)}}))}t.WebSocketConnection=c;const h=e=>(0,r.isObject)(e)&&"suggestions"in e},4261:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.isValidProfileMessage=t.isValidMessage=t.isValidLocale=t.isPostbackPayload=t.isMessagePayload=t.isFormEntityWithRows=t.isFormEntityWithFields=t.isEditFormPayloadWithRows=t.isEditFormPayloadWithFields=t.getUtteranceText=t.getCurrentPosition=t.buildUserTextMessage=t.buildUserMessage=t.buildUserAttachmentMessage=t.buildPostbackMessage=t.WebCore=t.SpeechSynthesisServiceEvent=t.SkillMessageSource=t.SenderType=t.RecognitionLocale=t.MessageType=t.MAX_MB=t.FILE_TYPES=t.DisplayType=t.CoreTTS=t.CoreEvent=t.CoreError=t.ConnectionState=t.AttachmentType=t.ActionType=void 0;const o=s(6246);Object.defineProperty(t,"ActionType",{enumerable:!0,get:function(){return o.ActionType}}),Object.defineProperty(t,"AttachmentType",{enumerable:!0,get:function(){return o.AttachmentType}}),Object.defineProperty(t,"ConnectionState",{enumerable:!0,get:function(){return o.ConnectionState}}),Object.defineProperty(t,"CoreError",{enumerable:!0,get:function(){return o.CoreError}}),Object.defineProperty(t,"CoreEvent",{enumerable:!0,get:function(){return o.CoreEvent}}),Object.defineProperty(t,"DisplayType",{enumerable:!0,get:function(){return o.DisplayType}}),Object.defineProperty(t,"MessageType",{enumerable:!0,get:function(){return o.MessageType}}),Object.defineProperty(t,"RecognitionLocale",{enumerable:!0,get:function(){return o.RecognitionLocale}}),Object.defineProperty(t,"SenderType",{enumerable:!0,get:function(){return o.SenderType}}),Object.defineProperty(t,"SkillMessageSource",{enumerable:!0,get:function(){return o.SkillMessageSource}}),Object.defineProperty(t,"SpeechSynthesisServiceEvent",{enumerable:!0,get:function(){return o.SpeechSynthesisServiceEvent}}),Object.defineProperty(t,"buildPostbackMessage",{enumerable:!0,get:function(){return o.buildPostbackMessage}}),Object.defineProperty(t,"buildUserAttachmentMessage",{enumerable:!0,get:function(){return o.buildUserAttachmentMessage}}),Object.defineProperty(t,"buildUserMessage",{enumerable:!0,get:function(){return o.buildUserMessage}}),Object.defineProperty(t,"buildUserTextMessage",{enumerable:!0,get:function(){return o.buildUserTextMessage}}),Object.defineProperty(t,"getCurrentPosition",{enumerable:!0,get:function(){return o.getCurrentPosition}}),Object.defineProperty(t,"getUtteranceText",{enumerable:!0,get:function(){return o.getUtteranceText}}),Object.defineProperty(t,"isEditFormPayloadWithFields",{enumerable:!0,get:function(){return o.isEditFormPayloadWithFields}}),Object.defineProperty(t,"isEditFormPayloadWithRows",{enumerable:!0,get:function(){return o.isEditFormPayloadWithRows}}),Object.defineProperty(t,"isFormEntityWithFields",{enumerable:!0,get:function(){return o.isFormEntityWithFields}}),Object.defineProperty(t,"isFormEntityWithRows",{enumerable:!0,get:function(){return o.isFormEntityWithRows}}),Object.defineProperty(t,"isMessagePayload",{enumerable:!0,get:function(){return o.isMessagePayload}}),Object.defineProperty(t,"isPostbackPayload",{enumerable:!0,get:function(){return o.isPostbackPayload}}),Object.defineProperty(t,"isValidLocale",{enumerable:!0,get:function(){return o.isValidLocale}}),Object.defineProperty(t,"isValidMessage",{enumerable:!0,get:function(){return o.isValidMessage}}),Object.defineProperty(t,"isValidProfileMessage",{enumerable:!0,get:function(){return o.isValidProfileMessage}});const r=s(6064),a=s(8557),n=s(1794),c=s(6637),l=s(5383);Object.defineProperty(t,"FILE_TYPES",{enumerable:!0,get:function(){return l.FILE_TYPES}}),Object.defineProperty(t,"MAX_MB",{enumerable:!0,get:function(){return l.MAX_MB}});const h=s(782),d={oracle:"oracle",platform:"platform"};t.CoreTTS=d;const p=d.oracle;class u{constructor(e){var t,s,i,o;this.V=e,this.ot=null,this.rt=new Map,this.nt=!1,null!==(t=(i=this.V).dispatcher)&&void 0!==t||(i.dispatcher=(0,r.generateEventDispatcher)()),this.V.URI=(0,r.stripHTTP)(e.URI),e.tokenGenerator||null!==(s=(o=this.V).userId)&&void 0!==s||(o.userId=(0,r.generateID)({prefix:"user"})),this.ct(e)}connect(e){return e&&(this.nt=!0,e.URI&&(e.URI=(0,r.stripHTTP)(e.URI)),this.V=Object.assign(Object.assign({},this.V),e)),this.lt.open(e)}disconnect(){return this.lt.close()}getState(){return this.lt.getState()}isConnected(){return this.lt.isOpen()}sendMessage(e,t){return i(this,void 0,void 0,(function*(){var s,i;if(!e)throw Error(o.CoreError.MessageInvalid);let r="",a="";if("string"==typeof e)a=e;else if((0,o.isMessagePayload)(e)){a=e.text}return(null===(s=this.ot)||void 0===s?void 0:s.text)===a&&(r=this.ot.requestId),this.ot=null,this.lt.send(e,r,Object.assign(Object.assign({},t),{threadId:null!==(i=null==t?void 0:t.threadId)&&void 0!==i?i:this.ht}))}))}sendAttachment(e,t){return i(this,void 0,void 0,(function*(){const s=yield this.uploadAttachment(e,t);return this.lt.send(s,"",{sdkMetadata:null==t?void 0:t.sdkMetadata})}))}sendLocation(e){return i(this,void 0,void 0,(function*(){if(!this.isConnected())throw Error(o.CoreError.ConnectionNone);if(!e){const{latitude:t,longitude:s}=yield(0,o.getCurrentPosition)();e={latitude:t,longitude:s}}if(!(0,o.isValidLocation)(e))throw Error(o.CoreError.LocationInvalid);const t={messagePayload:{type:o.MessageType.Location,location:e}};return this.lt.send(t)}))}sendDeviceToken(e,t){return i(this,void 0,void 0,(function*(){return this.lt.sendDeviceToken(e,t)}))}sendUserTypingStatus(e,t){return i(this,void 0,void 0,(function*(){return this.sendMessage((0,o.buildUserMessage)({partyType:"user",source:"sdk",status:e,type:o.MessageType.Status,text:t}))}))}updateChatContext(e,t,s,r){return i(this,void 0,void 0,(function*(){return this.sendMessage({messagePayload:Object.assign({type:o.MessageType.UpdateApplicationContextCommand,source:o.ContextSource.ChatWindow,context:e},t)},{sdkMetadata:r,threadId:s})}))}updateUser(e,t){return i(this,void 0,void 0,(function*(){if(!(0,o.isValidProfileMessage)(e))throw Error(o.CoreError.ProfileInvalid);return this.lt.updateUser(e,Object.assign(Object.assign({},t),{threadId:this.ht}))}))}uploadAttachment(e,t){return i(this,void 0,void 0,(function*(){if(!this.isConnected())throw Error(o.CoreError.ConnectionNone);if(!this.dt)throw Error(o.CoreError.UploadNotAvailable);const{fileName:s,type:i,url:r}=yield this.dt.upload(e,t);return(0,o.buildUserAttachmentMessage)(i,r,s)}))}getSuggestions(e){return i(this,void 0,void 0,(function*(){if(!e)throw Error(o.CoreError.SuggestionsEmptyRequest);if("string"!=typeof e)throw Error(o.CoreError.SuggestionsInvalidRequest);return this.lt.getSuggestions(e)}))}setCurrentThreadId(e){this.ht=e}cancelRequest(e){this.lt.cancelRequest(e)}destroy(){this.disconnect();for(const e in this)this[e]&&delete this[e]}setTTSService(e){this.ut="string"==typeof e?this.gt(e):e}getTTSService(){return this.ut}getTTSVoices(){return i(this,void 0,void 0,(function*(){if(!this.ut)throw Error(o.CoreError.TtsNotAvailable);return this.ut.getVoices()}))}setTTSVoice(e){return i(this,void 0,void 0,(function*(){if(!this.ut)throw Error(o.CoreError.TtsNotAvailable);return this.ut.setVoice(e)}))}getTTSVoice(){if(!this.ut)throw Error(o.CoreError.TtsNotAvailable);return this.ut.getVoice()}speakTTS(e,t){if(this.ut){let s;if("string"==typeof e)s=e;else{if(!(0,o.isValidMessage)(e))return;s=(0,o.getUtteranceText)(e,t)}this.ut.speak(s)}}cancelTTS(){var e;null===(e=this.ut)||void 0===e||e.cancel()}startRecognition(e){return i(this,void 0,void 0,(function*(){if(!this.bt)throw Error(o.CoreError.RecognitionNotAvailable);if(!this.isConnected())throw Error(o.CoreError.ConnectionNone);const t=t=>{"final"===t.type&&(this.ot=t),null==e||e.onRecognitionText(t)},s=t=>{var s;null===(s=null==e?void 0:e.onVisualData)||void 0===s||s.call(e,t)},i=()=>{this.off(o.CoreEvent.ASRResponse,t),this.off(o.CoreEvent.ASRVisualData,s),this.off(o.CoreEvent.ASRStop,i)};return this.on(o.CoreEvent.ASRResponse,t),this.on(o.CoreEvent.ASRVisualData,s),this.on(o.CoreEvent.ASRStop,i),this.bt.startRecognition()}))}stopRecognition(){return i(this,void 0,void 0,(function*(){if(!this.bt)throw Error(o.CoreError.RecognitionNotAvailable);return this.bt.stopRecognition()}))}setRecognitionLocale(e){e&&"string"==typeof e&&this.bt&&this.bt.setLocale(e.toLowerCase())}on(e,t){var s;switch(e){case o.SpeechSynthesisServiceEvent.TTSStart:case o.SpeechSynthesisServiceEvent.TTSStop:null===(s=this.ut)||void 0===s||s.on(e,t);break;default:this.lt.on(e,t)}}off(e,t){var s;switch(e){case o.SpeechSynthesisServiceEvent.TTSStart:case o.SpeechSynthesisServiceEvent.TTSStop:null===(s=this.ut)||void 0===s||s.off(e,t);break;default:this.lt.off(e,t)}}getAuthToken(){var e;return null===(e=this.U)||void 0===e?void 0:e.get()}ct(e){this.ft(e),this.vt(e),this.wt(e),this.xt(e),this.bt=a.CoreSpeechRecognitionService.getInstance()}ft(e){e.tokenGenerator&&(this.U=r.AuthTokenService.getInstance(),this.U.setFetch(e.tokenGenerator))}vt(e){this.lt=new h.ChatServerService(e),this.lt.on(o.CoreEvent.Open,(()=>{var e,t,s;const i=this.V;null===(e=this.dt)||void 0===e||e.setConfig(i).catch((e=>{console.warn(e)})),null===(t=this.bt)||void 0===t||t.setConfig(i).catch((e=>{console.warn(e)})),this.nt&&(null===(s=this.ut)||void 0===s||s.setConfig(i).catch((e=>{console.warn(e)})),this.nt=!1)}))}wt(e){e.enableAttachment&&(this.dt=l.CoreAttachmentService.getInstance())}xt(e){if(e.isTTS){let t;const s=e.TTSService;t=s?"string"==typeof s?this.gt(s):s:this.gt(p),this.ut=t}}gt(e){const t=this.rt.get(e);if(t)return t;let s;try{e===d.oracle?s=new c.OracleTTSService(this.V):e===d.platform&&(s=new n.CoreSpeechSynthesisService),this.rt.set(e,s)}catch(e){console.log(e)}return s}}t.WebCore=u,u.TTS=d},6637:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.OracleTTSService=void 0;const o=s(6064),r=s(6246),a=s(4076),n="speak",c="channelId",l="userId",h=/<[\w]+/g,d=n;t.OracleTTSService=class{constructor(e){this.kt="",this.yt=[],this._t=!1,this.$=!1,this.Ot=new AbortController,this.R=(0,o.generateEventDispatcher)(),this.V=e=>{this.ae=e,this.kt=`${e.URI}/tts/`,e.tokenGenerator&&(this.U=o.AuthTokenService.getInstance())},this.jt=e=>i(this,void 0,void 0,(function*(){let t=e;e.match(h)&&(t=`<${d}>${e}</${d}>`);const s=Object.assign({text:encodeURIComponent(t),stream:"chunked"},this.oe&&{voice:this.oe.name}),i=yield this.Mt(n,s);return this.zt(i)})),this.Mt=(e,...t)=>i(this,[e,...t],void 0,(function*(e,t={}){const s=this.ae;if(s)if(s.tokenGenerator){const e=yield this.U.get();t[c]=e.getClaim(c),t[l]=e.getClaim(l)}else t[c]=s.channelId,t[l]=s.userId;return(0,o.buildURL)("https://",this.kt,t,e)})),this.zt=(e,...t)=>i(this,[e,...t],void 0,(function*(e,t=!0){var s;const i=t?this.Ot.signal:void 0,o={};if(null===(s=this.ae)||void 0===s?void 0:s.tokenGenerator){const e=yield this.U.get();o.Authorization=`Bearer ${e.token}`}return fetch(e,{signal:i,headers:o})})),this.$t=e=>{if(null==e?void 0:e.body){const t=e.body.getReader();this.Ct(),this.$||(this.$=!0,this.R.trigger(r.SpeechSynthesisServiceEvent.TTSStart)),this.St(t)}},this.St=e=>i(this,void 0,void 0,(function*(){try{const{done:t,value:s}=yield e.read();if(t)return void this.It.next();let i=s.buffer;if(this._t||(this._t=!0,this.Tt.config(m(i)),i=g(i)),void 0!==this.At){const e=new Uint8Array(i),t=new Uint8Array(e.length+1);t[0]=this.At,t.set(e,1),i=u(t),this.At=void 0}if(i.byteLength%2){const e=new Uint8Array(i),t=new Uint8Array(e.length-1);t.set(e.slice(0,e.length-1)),i=u(t),this.At=e[e.length-1]}this.Tt.play(i),this.St(e)}catch(e){this.It.next()}})),this.Ct=()=>{this._t=!1,this.At=void 0},this.Et=()=>{this.$&&(this.$=!1,this.R.trigger(r.SpeechSynthesisServiceEvent.TTSStop))},this.Pt=()=>i(this,void 0,void 0,(function*(){const e=yield this.getVoices();this.oe=e.find((e=>e.default))})),this.V(e),this.It=p(this.$t,(()=>{})),this.Tt=(0,a.player)({sampleRate:22050,numChannels:1}),this.Tt.onEnd(this.Et),this.Pt().catch((()=>{})),window.addEventListener("beforeunload",(()=>{this.cancel()}))}setConfig(e){return i(this,void 0,void 0,(function*(){this.V(e),this.yt=[],yield this.Pt()}))}speak(e){"string"==typeof e&&e.trim().length&&this.It.push(this.jt(e))}cancel(){this.Ot.abort(),this.Ot=new AbortController,this.It.cancel(),this.$&&this.Tt.stop().catch((()=>{}))}getVoices(){return i(this,void 0,void 0,(function*(){let e=this.yt;if(e.length)return e;if(this.Lt)return this.Lt;return this.Lt=this.Mt("voices").then((t=>i(this,void 0,void 0,(function*(){try{const s=(yield(yield this.zt(t,!1)).json()).voices||[];return e=s.map((e=>({name:e.name,lang:b(e.culture),default:!!e.default}))),this.yt=e,e}catch(t){return e}})))).catch((()=>e)),setTimeout((()=>{this.Lt=void 0})),this.Lt}))}getVoice(){return this.oe}setVoice(e){return i(this,void 0,void 0,(function*(){if(!e||!Array.isArray(e)||!e.length)throw Error("TTSEmptyParam");if(this.oe&&1===e.length&&!e[0].name&&b(e[0].lang)===this.oe.lang)return;const t=yield this.getVoices();if(!t.length)throw Error("TTSNoVoices");if(!e.find((e=>{var s;let i,o=!1;if(e.name){const s=b(e.name);i=t.find((e=>s===b(e.name)))}if(!i&&e.lang){const o=b(e.lang);let r=t.filter((e=>o===e.lang));r.length||(r=t.filter((e=>o===e.lang.split("-")[0]))),i=null!==(s=r.find((e=>e.default)))&&void 0!==s?s:r[0]}return i&&(this.oe=i,o=!0),o})))throw Error("TTSNoMatch")}))}on(e,t){this.R.bind(e,t)}off(e,t){this.R.unbind(e,t)}};const p=(e,t)=>{const s=[],i=()=>{s.length&&s[0].then(e).catch(t)};return{push:e=>{e.catch((()=>{const t=s.indexOf(e);t>0&&s.splice(t,1)})),s.push(e),1===s.length&&i()},cancel:()=>{s.length=0},next:()=>{s.shift(),i()}}},u=e=>e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset),g=e=>{const t=new Uint8Array(e),s=new Uint8Array(t.length-44);return s.set(t.slice(44,t.length)),u(s)},m=e=>{const t=new DataView(e,0,44),s=!0;return{numChannels:t.getUint16(22,s),sampleRate:t.getUint32(24,s)}},b=e=>e.toLowerCase()},4076:function(e,t){var s=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.player=function(e){let t,l,h,d=e,p=[],u=()=>{},g=0,m=!0;const b=()=>s(this,void 0,void 0,(function*(){t||(t=new AudioContext),t.state===a&&(yield t.resume())})),f=()=>{p.forEach((e=>{e.removeEventListener(r,x),e.stop(),e.disconnect()})),p=[]},v=()=>s(this,void 0,void 0,(function*(){(null==t?void 0:t.state)!==a&&(yield null==t?void 0:t.suspend()),h=new Float32Array,m=!0,g=0,p=[]})),w=()=>{if(!t||!h.length)return;if(m&&h.length<i)return void(m=!1);m=!1;const e=h.length,s=new AudioBuffer({sampleRate:d.sampleRate,length:e});for(let t=0;t<d.numChannels;t++){const i=s.getChannelData(t);for(let t=0;t<e;t++)i[t]=h[t]}g<t.currentTime&&(g=t.currentTime),l&&l.removeEventListener(r,x),l=new AudioBufferSourceNode(t,{buffer:s}),l.connect(t.destination),l.addEventListener(r,x),l.start(g),g+=s.duration,p.push(l),h=new Float32Array},x=()=>{g=0,setTimeout((()=>{g||(v().catch((()=>{})),u())}),o)};return(()=>{const e=document.body,s=["touchend","click"],i=3;let o=!0,r=0;const a=()=>{o&&(t=new AudioContext,"closed"!==t.state&&t.resume().then((()=>{n(),r=0})).catch((e=>{r++,r<i?a():console.error(e)})))},n=()=>{s.forEach((t=>{e.removeEventListener(t,a)})),o=!1};s.forEach((t=>{e.addEventListener(t,a)}))})(),{play:e=>s(this,void 0,void 0,(function*(){h=h?n(h,e):c(e),yield b(),w()})),stop:()=>s(this,void 0,void 0,(function*(){t&&(f(),yield v(),u())})),config:e=>{d=Object.assign(Object.assign({},d),e)},onEnd:e=>{u=e}}};const i=4096,o=250,r="ended",a="suspended";const n=(e,t)=>new Float32Array([...e,...c(t)]),c=e=>Float32Array.from(new Int16Array(e),(e=>e/32768))},1540:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.stopAudioInput=t.getAudioInputUserMedia=t.getAudioInput=t.isAudioInputAvailable=t.AudioInputSourceType=void 0,t.AudioInputSourceType={DEFAULT:0,VOICE_RECOGNITION:6};t.isAudioInputAvailable=()=>void 0!==(0,t.getAudioInput)();t.getAudioInput=()=>window.audioinput;t.getAudioInputUserMedia=e=>new Promise(((e,s)=>{(0,t.getAudioInput)().checkMicrophonePermission((i=>{i?e():(0,t.getAudioInput)().getMicrophonePermission(((t,i)=>{t?e():s(i)}))}))})).then((()=>((0,t.getAudioInput)().start(e),(0,t.getAudioInput)())));t.stopAudioInput=()=>new Promise((e=>{(0,t.getAudioInput)().isCapturing()?((0,t.getAudioInput)().stop(e),(0,t.getAudioInput)().disconnect()):e()}))},1786:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.ChatEvent=void 0;const i=s(6246),o=Object.assign(Object.assign(Object.assign({},i.SpeechSynthesisServiceEvent),{CHAT_LANG:"chatlanguagechange",CLICK_AUDIO_RESPONSE_TOGGLE:"click:audiotoggle",CLICK_ERASE:"click:erase",CLICK_VOICE_TOGGLE:"click:voicetoggle",DESTROY:"destroy",CHAT_END:"chatend",MESSAGE:"message",MESSAGE_RECEIVED:"message:received",MESSAGE_SENT:"message:sent",NETWORK:"networkstatuschange",READY:"ready",TYPING:"typing",UNREAD:"unreadCount",WIDGET_CLOSED:"widget:closed",WIDGET_OPENED:"widget:opened",WIDGET_SHOW:"widget:show",WIDGET_HIDE:"widget:hide"}),i.ExecuteActionType);t.ChatEvent=o},9268:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.CONNECTION_STATE=void 0;t.CONNECTION_STATE={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},4787:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.Constants=t.SEC_MULTIPLIER=t.ATTACHMENT_MAX_HEIGHT=t.MESSAGE_BLOCK_THRESOLD=t.ATTACHMENT_MAX_SIZE=t.BYTE_MULTIPLIER=t.SDK_VERSION=void 0;class s{}t.Constants=s,s.GEOLOCATION_REQUEST_DENIED=1,s.CHAT_SCROLL_DELAY=300,s.WEBSOCKET_READY_STATE=["CONNECTING","OPEN","CLOSING","CLOSED"],s.WEBSOCKET_CLOSE_EVENT={CODE:{ABNORMAL_CLOSURE:1006}},s.ATTACHMENT_HEADER={AUTHORIZATION:"Authorization",FILE_AUTH_TYPE:"x-oda-meta-file-authType",FILE_IS_PROTECTED:"x-oda-meta-file-isProtected",FILE_SIZE:"x-oda-meta-file-size"},s.MAX_SUGGESTIONS_COUNT=5,s.MIN_SUGGESTIONS_COUNT=1,s.SUGGESTIONS_COUNT_THRESHOLD=30,s.TIME={MIN_FIFTY:3e6};t.SDK_VERSION="24.12",t.BYTE_MULTIPLIER=1024,t.ATTACHMENT_MAX_SIZE=25*t.BYTE_MULTIPLIER*t.BYTE_MULTIPLIER,t.MESSAGE_BLOCK_THRESOLD=1e4,t.ATTACHMENT_MAX_HEIGHT=211,t.SEC_MULTIPLIER=1e3},865:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.defaultSettings=void 0;const i=s(6246),o=s(5430),r="Please try sharing it again, or else type it in.";t.defaultSettings={badgePosition:{right:"-5px",top:"-5px"},clientAuthEnabled:!1,conversationBeginPosition:"bottom",disablePastActions:"all",displayActionsAsPills:!1,searchBarMode:!1,sidepanel:!1,embedded:!1,embeddedVideo:!0,enableAgentSneakPreview:!1,enableAttachment:!0,enableAttachmentSecurity:!1,enableHeaderActionCollapse:!0,enableAutocomplete:!1,enableAutocompleteClientCache:!1,enableBotAudioResponse:!1,enableCancelResponse:!1,enableClearMessage:!1,enableDefaultClientResponse:!1,enableEndConversation:!0,enableHeadless:!1,enableLocalConversationHistory:!1,enableLongPolling:!1,enableResizableWidget:!1,enableSendTypingStatus:!1,enableSecureConnection:!0,enableSpeech:!1,enableSpeechAutoSend:!0,enableTabsSync:!0,enableVoiceOnlyMode:!1,focusOnNewMessage:"input",height:"620px",i18n:{en:{agent:"Agent",agentMessage:"{0} says",attachment_audio:"Audio attachment",attachment_file:"File attachment",attachment_image:"Image attachment",attachment_video:"Video attachment",attachmentAudioFallback:"Your browser does not support embedded audio. However you can {0}download it{/0}.",attachmentVideoFallback:"Your browser does not support embedded video. However you can {0}download it{/0}.",audioResponseOff:"Turn audio response on",audioResponseOn:"Turn audio response off",avatarAgent:"Agent icon",avatarBot:"Bot icon",avatarUser:"User icon",cancelResponse:"Cancel response",card:"Card {0}",cardImagePlaceholder:"Card image",cardNavNext:"Next card",cardNavPrevious:"Previous card",chatTitle:"Chat",clear:"Clear conversation",close:"Close widget",closing:"Closing",connected:"Connected",connecting:"Connecting",connectionFailureMessage:"Sorry, the assistant is unavailable right now. If the issue persists, contact your help desk.",connectionRetryLabel:"Try Again",copyFailureMessage:"Sorry, copying is not available on this device.",copySuccessMessage:"Successfully copied the response text to the clipboard.",defaultGreetingMessage:"Hey, Nice to meet you! Allow me a moment to get back to you.",defaultWaitMessage:"I'm still working on your request. Thank you for your patience!",defaultSorryMessage:"I'm sorry. I can't get you the right content. Please try again.",disconnected:"Disconnected",download:"Download",editFieldErrorMessage:"Field input is invalid",editFormErrorMessage:"Some of the fields need your attention",endConversation:"End Conversation",endConversationConfirmMessage:"Are you sure you want to end the conversation?",endConversationDescription:"This will also clear your conversation history.",errorSpeechInvalidUrl:"ODA URL for connection is not set. Please pass 'URI' parameter during SDK initialization.",errorSpeechMultipleConnection:"Another voice recognition is ongoing. Can't start a new one.",errorSpeechTooMuchTimeout:"The voice message is too long to recognize and generate text.",errorSpeechUnavailable:"To allow voice messaging, update your browser settings to enable access to your microphone.",errorSpeechUnsupportedLocale:"The locale set for voice recognition is not supported. Please use a valid locale in 'speechLocale' setting.",inputPlaceholder:"Type a message",imageViewerClose:"Close image viewer",imageViewerOpen:"Open image viewer",itemIterator:"Item {0}",language_ar:"Arabic",language_de:"German",language_detect:"Detect Language",language_en:"English",language_es:"Spanish",language_fr:"French",language_hi:"Hindi",language_it:"Italian",language_nl:"Dutch",language_pt:"Portuguese",languageSelectDropdown:"Select chat language",linkField:"Click on the highlighted text to open Link for {0}",noResultText:"No more results",noSpeechTimeout:"The voice could not be detected to perform recognition.",noText:"No",openMap:"Open Map",previousChats:"End of previous conversation",ratingStar:"Rate {0} star",recognitionTextPlaceholder:"Speak your message",relTimeDay:"{0}d ago",relTimeHr:"{0}hr ago",relTimeMin:"{0}min ago",relTimeMoment:"A few seconds ago",relTimeMon:"{0}mth ago",relTimeNow:"Now",relTimeYr:"{0}yr ago",requestLocation:"Requesting location",requestLocationDeniedPermission:"To allow sharing your location, update your browser settings to enable access to your location. You can also type in the location instead.",requestLocationDeniedTimeout:`It is taking too long to get your location. ${r}`,requestLocationDeniedUnavailable:`Your current location is unavailable. ${r}`,requiredTip:"Required",retryMessage:"Try again",send:"Send message",shareAudio:"Share Audio",shareFailureMessage:"Sorry, sharing is not available on this device.",shareFile:"Share File",shareLocation:"Share Location",shareVisual:"Share Image/Video",skillMessage:"Skill says",showOptions:"Show Options",speak:"Speak a message",typingIndicator:"Waiting for response",upload:"Share popup",uploadFailed:"Upload Failed.",uploadFileNetworkFailure:"Upload not completed due to network failure.",uploadFileSizeLimitExceeded:"File size should not be more than {0}MB.",uploadFileSizeZeroByte:"Files of size zero bytes can't be uploaded.",uploadUnauthorized:"Upload request is unauthorized.",uploadUnsupportedFileType:"Unsupported file type.",userMessage:"I say",utteranceGeneric:"Message from skill.",webViewAccessibilityTitle:"In-widget WebView to display links",webViewClose:"Done",webViewErrorInfoDismiss:"Dismiss",webViewErrorInfoText:"Don't see the page? {0}Click here{/0} to open it in a browser.",yesText:"Yes"},ar:{language_ar:""},de:{language_de:"Deutsch"},es:{language_es:"Espaol"},fr:{language_fr:"Franais"},hi:{language_hi:""},it:{language_it:"Italiano"},nl:{language_nl:"Nederlands"},pt:{language_pt:"Portugus"}},initBotAudioMuted:!0,initMessageOptions:{sendAt:"expand"},disableInlineCSS:!1,isDebugMode:!1,locale:"en",messageCacheSizeLimit:2e3,name:"oda-chat",openChatOnLoad:!1,openLinksInNewWindow:!1,reconnectInterval:5,reconnectMaxAttempts:5,shareMenuItems:[o.ShareCategory.AUDIO,o.ShareCategory.FILE,o.ShareCategory.LOCATION,o.ShareCategory.VISUAL],showConnectionStatus:!1,showPrevConvStatus:!0,showTypingIndicator:!0,speechLocale:i.RecognitionLocale.EN_US,theme:o.WidgetTheme.DEFAULT,timestampMode:"default",timestampHeaderMode:"absolute",defaultGreetingTimeout:5,defaultWaitMessageInterval:5,typingIndicatorTimeout:30,typingStatusInterval:3,typingDelay:0,upgradeToWebSocketInterval:300,webViewConfig:{},width:"375px",actionsLayout:"vertical",globalActionsLayout:"vertical",cardActionsLayout:"vertical",formActionsLayout:"vertical",wcfsEnableEndConversationButtonToClose:!1}},9731:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.Deferred=void 0;t.Deferred=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),Object.freeze(this)}}},3010:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.DOMUtil=void 0,t.addChild=function(e,t){e.appendChild(t)},t.on=h,t.off=function(e,t,s,i){e.removeEventListener(t,s,i)};const i=s(6064),o=s(5430),r=s(8291),a="aria-expanded",n="aria-activedescendant",c="expand",l=!0;function h(e,t,s,i){e.addEventListener(t,s,i)}t.DOMUtil=class{get cssPrefix(){return this.Ft}constructor(e){this.Rt={},this.Dt=[],this.Ft=e.name}addCSSClass(e,...t){e.classList?t.forEach((t=>e.classList.add(`${this.Ft}-${t}`))):e.setAttribute("class",t.reduce(((e,t)=>`${e} ${this.Ft}-${t}`),""))}createAnchor(e,t,s=[],i=!1,o){const r=this.createElement("a",s,l);r.rel="noreferrer noopener";let a=!1;return r.href=e,r.innerText=t,o&&(o.onclick&&(r.onclick=o.onclick.bind(r),a=!0),o.target&&(r.target=o.target,a=!0)),a||(i?r.addEventListener("click",(t=>(window.open(e,"","height=450px,width=800px,menubar,toolbar,personalbar,status,resizable,noopener,noreferrer"),t.preventDefault(),t.stopPropagation(),!1))):r.target="_blank"),r}createButton(e=[]){const t="button",s=this.createElement(t,["widget-button",...e,"flex"],l);return s.type=t,s}createDiv(e=[]){return this.createElement("div",e)}createElement(e,t=[],s=!1){const i=document.createElement(e);return this.Nt(i,t),s&&(i.dir="auto"),i}createElementFromString(e,t=[]){const s=this.createDiv();s.innerHTML=e.trim();const i=s.firstElementChild;return t&&this.Nt(s.firstElementChild,t),i}createIconButton({css:e,icon:t,title:s,iconCss:i}){const o=this.createButton(["icon",...e]);o.innerHTML="",o.title=s;const r=this.createImageIcon({icon:t,iconCss:i});return o.appendChild(r),o}createImage(e,t=[],s=""){const i=this.createElement("img",t);return e&&(i.src=e),i.alt=s,i.setAttribute("draggable","false"),i}createImageIcon({icon:e,iconCss:t}){if((0,r.isSVG)(e)){const s=this.createElementFromString(e,t);return s.setAttribute("role","presentation"),s.setAttribute("focusable","false"),s}return this.createImage(e,t)}createInputElement(e,t=[]){const s=this.createElement("input",["input",...t],!0);return this.setAttributes(s,e),s}createLabel(e=[]){return this.createElement("label",["label",...e],l)}createTextDiv(e=[]){return this.createElement("div",e,l)}createTextSpan(e=[]){return this.createElement("span",e,l)}setAttributes(e,t){const s=["valueOn","valueOff"];Object.keys(t).forEach((i=>{const o=t[i];o&&("errorMsg"===i?e.setAttribute("data-error",o):s.includes(i)?e.setAttribute(i,o):e[i]=o)}))}createListItem(e,t,s,i,o,r,a=!1,n=!0){const c=this.createElement("li",["li",o,a&&"with-sub-menu"],!0);if(c.id=e,c.tabIndex=-1,c.setAttribute("role","menuitem"),s&&c.setAttribute("data-value",s),i){const e=this.createImageIcon({icon:i,iconCss:["icon",`${o}-icon`]});c.appendChild(e)}const l=this.createTextSpan(["text",`${o}-text`,n?"ellipsis":""]);return l.innerText=t,c.appendChild(l),r&&h(c,"click",r),c}createMedia(e,t,s=[]){const i=this.createElement(e,s,!0);return t&&(i.src=t),i.autoplay=!1,i}getMenu(e){const t=this.createElement("ul",["popup",...e.menuClassList]);t.id=e.menuId,t.tabIndex=-1,t.setAttribute("role","menu"),t.setAttribute("aria-labelledby",e.buttonId),t.ariaHidden="true";const s=e.menuItems;if(s.forEach((e=>t.appendChild(e))),e.defaultValue){const s=t.querySelector(`[data-value="${e.defaultValue}"]`);this.addCSSClass(s,"active")}return h(t,"click",(()=>this.Ht(t,e.menuButton))),h(t,"keydown",(o=>{let r=!1;if(!(o.ctrlKey||o.altKey||o.metaKey)){if(o.shiftKey&&o.code===i.KeyCode.Tab)this.Ht(e.menuButton,t);else switch(o.code){case i.KeyCode.Return:case i.KeyCode.Space:o.target.click(),r=!0;break;case i.KeyCode.Esc:case i.KeyCode.Tab:this.Ht(e.menuButton,t),o.code===i.KeyCode.Esc&&(e.menuButton.focus(),r=!0);break;case i.KeyCode.Up:this.Vt(t),r=!0;break;case i.KeyCode.Down:this.Ut(t),r=!0;break;case i.KeyCode.Home:case i.KeyCode.PageUp:this.Bt(t,s),r=!0;break;case i.KeyCode.End:case i.KeyCode.PageDown:this.Wt(t,s),r=!0}r&&(o.stopPropagation(),o.preventDefault())}})),t}getMenuButton(e){const t=e.button,s=e.menu,o=s.querySelectorAll("li"),r=t.classList.contains(`${this.Ft}-with-sub-menu`),n=e.widget;return t.setAttribute("role","button"),t.setAttribute("aria-haspopup","true"),t.setAttribute(a,"false"),t.setAttribute("aria-controls",e.menuId),h(t,"click",(()=>{const s=document.getElementById(e.menuId);"true"===t.getAttribute(a)?this.Ht(t,s):this.qt(t,s,n,r)})),h(t,"keydown",(e=>{let a=!1;switch(e.code){case i.KeyCode.Return:case i.KeyCode.Down:case i.KeyCode.Space:this.qt(t,s,n,r),this.Bt(s,o),a=!0;break;case i.KeyCode.Up:this.qt(t,s,n,r),this.Wt(s,o),a=!0}a&&(e.stopPropagation(),e.preventDefault())})),t}getMessage(e,t=!1){const s="message",i=this.createDiv([s]),o=this.createDiv([`${s}-wrapper`]),r=this.createDiv([`${s}-bubble`,t&&"error"]);return r.appendChild(e),o.appendChild(r),i.appendChild(o),i}wrapMessageBlock(e,t,s=o.MESSAGE_SIDE.LEFT){const i="message",r=this.createDiv([`${i}-block`,"flex",s]),a=this.createDiv([`${i}s-wrapper`]),n=this.createDiv([`${i}-list`,"flex","col"]);if(t){const e=this.createImageIcon({icon:t,iconCss:["message-icon"]}),s=this.createDiv(["icon-wrapper"]);s.appendChild(e),r.appendChild(s)}return n.appendChild(e),a.appendChild(n),r.appendChild(a),r}getMessageBlock(e,t,s,i=!1){return this.wrapMessageBlock(this.getMessage(t,i),s,e)}removeCSSClass(e,...t){var s,i;if(e.classList)t.forEach((t=>e.classList.remove(`${this.Ft}-${t}`)));else{const t="class",o=null!==(i=null===(s=e.getAttribute(t))||void 0===s?void 0:s.split(" "))&&void 0!==i?i:[];if(o.length){const s=o.filter((e=>!o.includes(`${this.Ft}-${e}`))).join(" ");e.setAttribute(t,s)}}}setChatWidgetWrapper(e){this.Gt=e;for(const[e,t]of Object.entries(this.Rt))this.updateCSSVar(e,t)}updateCSSVar(e,t){this.Rt[e]=t,this.Gt&&this.Gt.style.setProperty(e,t)}Nt(e,t=[]){return t&&this.addCSSClass(e,...t),e}Ht(e,t){e.getAttribute(a)&&(this.removeCSSClass(t,c),t.ariaHidden="true",e.setAttribute(a,"false"))}Bt(e,t){this.Zt(t[0],e)}Wt(e,t){this.Zt(t[t.length-1],e)}Vt(e){const t=e.getAttribute(n),s=e.querySelector(`#${t}`);this.Zt(s.previousSibling||e.lastChild,e)}Ut(e){const t=e.getAttribute(n),s=e.querySelector(`#${t}`);this.Zt(s.nextSibling||e.firstChild,e)}Zt(e,t){e.focus(),t.setAttribute(n,e.id)}qt(e,t,s,i=!1){if("false"===e.getAttribute(a)){this.addCSSClass(t,c),e.setAttribute(a,"true");const o=s.getBoundingClientRect(),r=e.getBoundingClientRect(),n="rtl"===window.getComputedStyle(t).direction;if(i){const i=48;t.style.top=`${e.offsetTop+e.offsetHeight+60}px`,n?t.style.left=`${i}px`:t.style.right=`${i}px`,t.style.maxWidth=s.offsetWidth-i+"px"}else{let e=o.right-r.right;n?(e=r.left-o.left,t.style.left=`${e}px`):t.style.right=`${e}px`,t.style.maxWidth=s.offsetWidth-e+"px"}setTimeout((()=>{t.ariaHidden="false";const s=document.querySelectorAll(`.${this.Ft}-with-sub-menu`);document.addEventListener("click",(i=>{let o=!1;s.forEach((e=>{e.contains(i.target)&&(o=!0)})),o?this.Dt.push({menu:t,menuButton:e}):(this.Dt.length&&(this.Dt.forEach((e=>{this.Ht(e.menuButton,e.menu)})),this.Dt=[]),this.Ht(e,t))}),{once:!0})}),400)}}}},4494:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.DragAndDrop=void 0;const i=s(8291),o=100;t.DragAndDrop=class{constructor(e,t,s){this.Yt=e,this.handle=t,this.moveElement=s,this.active=!1,this.dragged=!1,this.currentX=0,this.currentY=0,this.initialX=0,this.initialY=0,this.pointerEventsDefault=null,this.dragBound=this.drag.bind(this),this.dragEndBound=this.dragEnd.bind(this)}makeElementDraggable(){void 0===this.moveElement&&(this.moveElement=this.handle),this.handle.style.userSelect="none";const e=(0,i.debounce)((()=>{document.body.contains(this.moveElement)?(this.moveBackInScreen(0,0),this.moveElement.style.transform=`translate(${this.currentX}px, ${this.currentY}px)`):window.removeEventListener("resize",e)}),500);window.addEventListener("resize",e),this.handle.addEventListener("touchstart",this.dragStart.bind(this)),this.handle.addEventListener("mousedown",this.dragStart.bind(this))}moveBackInScreen(e,t){const s=this.handle.getBoundingClientRect(),i=s.width>o?s.width:o,r=s.height>o?s.height:o;s.left-e+(i-o)<0&&(this.currentX=this.currentX-(s.left-e)-(i-o)),s.right-e-(i-o)>document.body.clientWidth&&(this.currentX=this.currentX-(s.right-document.body.clientWidth)+e+(i-o)),s.top-t+(r-o)<0&&(this.currentY=this.currentY-(s.top-t)-(r-o)),s.bottom-t-(r-o)>window.innerHeight&&(this.currentY=this.currentY-(s.bottom-window.innerHeight)+t+(r-o))}dragStart(e){let t,s;"touchstart"===e.type?(t=e.touches[0].clientX,s=e.touches[0].clientY):(t=e.clientX,s=e.clientY),this.initialX=t-this.currentX,this.initialY=s-this.currentY,this.active=!0,document.addEventListener("touchmove",this.dragBound),document.addEventListener("mousemove",this.dragBound),document.addEventListener("touchend",this.dragEndBound),document.addEventListener("mouseup",this.dragEndBound)}drag(e){let t,s;if(this.active){"touchmove"===e.type?(t=e.touches[0].clientX,s=e.touches[0].clientY):(t=e.clientX,s=e.clientY);const i=t-this.currentX,o=s-this.currentY,r=this.currentX-(t-this.initialX),a=this.currentY-(s-this.initialY);this.currentX=t-this.initialX,this.currentY=s-this.initialY,(i>=5||o>=5||i<=-5||o<=-5)&&(this.moveBackInScreen(r,a),this.Yt.addCSSClass(this.moveElement,"drag"),this.moveElement.style.transform=`translate(${this.currentX}px, ${this.currentY}px)`,this.dragged||(this.pointerEventsDefault=this.handle.style.pointerEvents,this.handle.style.pointerEvents="none"),this.dragged=!0)}}dragEnd(){this.dragged&&(this.handle.style.pointerEvents=this.pointerEventsDefault,this.handle.focus(),this.dragged=!1),this.active=!1,document.removeEventListener("touchmove",this.dragBound),document.removeEventListener("mousemove",this.dragBound),document.removeEventListener("touchend",this.dragEndBound),document.removeEventListener("mouseup",this.dragEndBound)}}},8098:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(1540),t),o(s(1786),t),o(s(9268),t),o(s(4787),t),o(s(865),t),o(s(9731),t),o(s(3010),t),o(s(4494),t),o(s(4074),t),o(s(9424),t),o(s(4914),t),o(s(1660),t),o(s(8291),t),o(s(2436),t)},4074:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.linkify=t.getEmbeddedVideo=void 0;const o=s(6064),r=/\b(?:(?:https?|ftp):\/\/|(www\.))[-a-z0-9+&@#/%?=~_|!:,.;]*[-a-z0-9+&@#/%=~_|]/gim;t.linkify=(e,t,s)=>{const i=a(e).replace((0,o.resetRegex)(r),u(s,t)),n=O(i,t);return h(n)};const a=e=>{let t;try{t=(0,o.parseDOM)(e)}catch(t){return e}return n(t),c(t),(0,o.decodeHTMLEntites)(t.innerHTML)},n=e=>(e.querySelectorAll("a").forEach((e=>{e.outerHTML=l(e.outerHTML)})),e),c=e=>{e.querySelectorAll("*").forEach((e=>{if("A"!==e.tagName){const t=e.attributes;for(let e=0;e<t.length;e++){const s=t[e];s.value=l(s.value)}}}))},l=e=>e.replace(/(https?|www)/gim,p),h=e=>{let t=e;return d.forEach(((e,s)=>{t=t.replace(new RegExp(s,"g"),e)})),d.clear(),t},d=new Map,p=e=>{const t=performance.now().toString(36).replace(".","_")+Math.random().toString(36).substring(2);return d.set(t,e),t},u=(e,t)=>(s,i)=>{if(e){const e=g(s,t);if(e)return e}return`<a href="${i?`https://${s}`:s}" target="_blank" rel="noreferrer">${s}</a>`},g=(e,t)=>{let s,i;try{const t=e.toLowerCase().startsWith("https")?new URL(e):new URL(`https://${e}`);s=t.hostname.toLowerCase()}catch(e){return i}return y.some((r=>{const a=s.includes(r.name);if(a){const s=(0,o.generateID)();"videohub"!==r.name&&m(r.url,e,t,s),i=r.getEmbed(r.getId(e),s,t)}return a})),i};t.getEmbeddedVideo=g;const m=(e,t,s,r)=>i(void 0,void 0,void 0,(function*(){const i=`${e}?url=${t}`;try{const e=yield fetch(i);if(!e.ok)return;const t=yield e.json();if(null==t?void 0:t.html){const e=t.html.replace("<iframe",`<iframe class="${s}-video-wrapper"`),i=document.getElementById(r);null==i||i.replaceWith((0,o.stringToHTML)(e))}}catch(e){}})),b=/(?:youtu.*be.*)\/(?:watch\?v=|embed\/|v\/|shorts|)(.*?((?=[&#?])|$))/gm,f=/(?:https?:\/\/)?videohub\.oracle\.com\/media\/\S+\/([\w]+)/gim,v=/^(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)(?:|\/\?)/gim,w=/^(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com\/(?:video|embed)|dai.ly)\/([a-z0-9]+)/gim,x="allow",k=`${x}="autoplay *; fullscreen *; encrypted-media *" sandbox="${x}-downloads ${x}-forms ${x}-same-origin ${x}-scripts ${x}-top-navigation ${x}-pointer-lock ${x}-popups ${x}-modals ${x}-orientation-lock ${x}-popups-to-escape-sandbox ${x}-presentation ${x}-top-navigation-by-user-activation" height="auto"`,y=[{name:"youtu",url:"https://www.youtube.com/oembed",getEmbed:(e,t,s)=>j(`src="https://www.youtube.com/embed/${e}" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture"`,t,s,"youtube"),getId:e=>_(e,b)},{name:"videohub",url:"",getEmbed:(e,t,s)=>{const i="flashvars";return j(`src="https://cdnapisec.kaltura.com/p/2171811/sp/217181100/embedIframeJs/uiconf_id/35965902/partner_id/2171811?iframeembed=true&playerId=kaltura_player&entry_id=${e}&${i}[streamerType]=auto&amp;${i}[localizationCode]=en&amp;${i}[sideBarContainer.plugin]=true&amp;${i}[sideBarContainer.position]=left&amp;${i}[sideBarContainer.clickToClose]=true&amp;${i}[chapters.plugin]=true&amp;${i}[chapters.layout]=vertical&amp;${i}[chapters.thumbnailRotator]=false&amp;${i}[streamSelector.plugin]=true&amp;${i}[EmbedPlayer.SpinnerTarget]=videoHolder&amp;${i}[dualScreen.plugin]=true&amp;${i}[hotspots.plugin]=1&amp;${i}[Kaltura.addCrossoriginToIframe]=true&amp;&wid=1_yz4xoltb" ${k}`,t,s,"ovh")},getId:e=>_(e,f)},{name:"vimeo",url:"https://vimeo.com/api/oembed.json",getEmbed:(e,t,s)=>j(`src="https://player.vimeo.com/video/${e}" allow="fullscreen; picture-in-picture"`,t,s,"vimeo"),getId:e=>_(e,v)},{name:"dai",url:"https://www.dailymotion.com/services/oembed",getEmbed:(e,t,s)=>j(`src="https://geo.dailymotion.com/player.html?video=${e}" allow="fullscreen; picture-in-picture; web-share"`,t,s,"dailymotion"),getId:e=>_(e,w)}],_=(e,t)=>{let s;return e.replace((0,o.resetRegex)(t),((e,t)=>((null==t?void 0:t.length)&&(s=t),e))),s},O=(e,t)=>{const s=(0,o.parseDOM)(e);if(!s)return e;const i=s.querySelectorAll("video"),r=`${t}-video-wrapper`;return i.forEach((e=>{e.classList.add(r)})),(0,o.decodeHTMLEntites)(s.innerHTML)},j=(e,t,s,i)=>`<div class="${s}-${i}-wrapper"><iframe id="${t}" class="${s}-video-wrapper" ${e} allowfullscreen frameborder="0"></iframe></div>`},9424:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.Resize=void 0;const s="resize",i=[`nw-${s}`,`se-${s}`,`nwse-${s}`,`w-${s}`,`e-${s}`],o=[`ne-${s}`,`sw-${s}`,`nesw-${s}`,`e-${s}`,`w-${s}`];t.Resize=class{constructor(e,t,s){this.Jt=e,this.Kt=t,this.Yt=s,this.Xt=200,this.Qt=375,this.ts=!1,this.os=!1}makeWidgetResizable(){const e=this.Jt,t=this.Yt,i=t.createDiv(["resizable",`top-${s}`]);i.addEventListener("mousedown",this.rs()),e.appendChild(i);const o=t.createDiv(["resizable",`left-${s}`]);o.addEventListener("mousedown",this.ns()),e.appendChild(o);const r=t.createDiv(["resizable",`right-${s}`]);r.addEventListener("mousedown",this.ns(!1)),e.appendChild(r);const a=t.createDiv(["resizable",`left-${s}`,"corner"]);a.addEventListener("mousedown",this.ns(!0,!0)),a.addEventListener("mousedown",this.rs(!0)),e.appendChild(a);const n=t.createDiv(["resizable",`right-${s}`,"corner"]);n.addEventListener("mousedown",this.ns(!1,!0)),n.addEventListener("mousedown",this.rs(!0)),e.appendChild(n)}ns(e=!0,t=!1){const r=this.Jt,a=e?i:o;let n;const c=i=>{const o=parseInt(getComputedStyle(r).maxWidth),c=r.offsetWidth;let l=n-i.x;e||(l=-l);const h=c+l;if(c<this.Qt&&(this.Qt=c),n=i.x,h<=this.Qt?document.body.style.cursor=t?this.ts?a[0]:a[2]:a[3]:document.body.style.cursor=h>=o?t?this.os?a[1]:a[2]:a[4]:t?a[2]:`col-${s}`,h>=this.Qt&&h<=o){const e=`${h}px`;r.style.width=e,this.Kt(e)}i.preventDefault()},l=()=>{document.removeEventListener("mouseup",l,!1),document.removeEventListener("mousemove",c,!1),document.body.style.removeProperty("cursor")};return e=>{e.preventDefault(),n=e.x,document.addEventListener("mouseup",l,!1),document.addEventListener("mousemove",c,!1)}}rs(e=!1){const t=this.Jt;let i;const o=o=>{const r=i-o.y,a=parseInt(getComputedStyle(t).maxHeight),n=t.offsetHeight,c=n+r;n<this.Xt&&(this.Xt=n),i=o.y,c<=this.Xt?(this.ts=!0,e||(document.body.style.cursor=`n-${s}`)):c>=a?(this.os=!0,e||(document.body.style.cursor=`s-${s}`)):(this.ts=!1,this.os=!1,e||(document.body.style.cursor=`row-${s}`)),c>=this.Xt&&c<=a&&(t.style.height=`${c}px`),o.preventDefault()},r=()=>{document.removeEventListener("mouseup",r,!1),document.removeEventListener("mousemove",o,!1),document.body.style.removeProperty("cursor")};return e=>{e.preventDefault(),i=e.y,document.addEventListener("mouseup",r,!1),document.addEventListener("mousemove",o,!1)}}}},4914:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.Response=void 0;class s{}t.Response=s,s.STATUS={OK:200}},1660:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.iconStartOver=t.iconInlineError=t.iconInlineLogo=t.iconInlineLaunch=t.iconThumbsUp=t.iconThumbsDown=t.iconSuccess=t.iconGenerating=t.iconCheck=t.iconZoom=t.iconWarn=t.iconVideo=t.iconTTSUnmute=t.iconTTSMute=t.iconStop=t.iconShareMedia=t.iconShareLocation=t.iconShareFile=t.iconShareAudio=t.iconSend=t.iconSearch=t.iconRating=t.iconMic=t.iconLogo=t.iconLaunchButton=t.iconLanguage=t.iconKeyboard=t.iconImage=t.iconFile=t.iconExternalLink=t.iconExpandArrow=t.iconExpand=t.iconError=t.iconDownload=t.iconCollapse=t.iconClose=t.iconClearHistory=t.iconChevronPrevious=t.iconChevronNext=t.iconChevronDown=t.iconCaretDown=t.iconAudio=t.iconAttach=void 0;const s=V('<path d="M11.007 15.117A1 1 0 0 0 13 15V7l-.005-.176A3 3 0 0 0 7 7v8l.005.217A5 5 0 0 0 17 15V5h2v10a7 7 0 1 1-14 0V7a5 5 0 0 1 10 0v8l-.005.176A3 3 0 0 1 9 15V9h2v6z"/>');t.iconAttach=s;const i=V('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m7.764 17 1.849-4.87h1.012L12.486 17H11.32l-.32-.998H9.204L8.882 17zm1.722-1.883h1.226l-.617-1.916zm3.278-.415v-2.573h1.045v2.553c0 .531.079.916.235 1.152.156.233.404.349.744.349.344 0 .591-.116.743-.349.157-.236.235-.62.235-1.152v-2.553h1.045v2.573c0 .822-.165 1.427-.496 1.816-.326.384-.835.576-1.527.576s-1.204-.192-1.535-.576c-.326-.389-.489-.994-.489-1.816zM17.686 17v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>');t.iconAudio=i;const o=V('<path fill="#161513" d="m6 9 5.975 6L18 9H6z"/>');t.iconCaretDown=o;const r=V('<path d="M6.35 8L5 9.739 12 16l7-6.261L17.65 8 12 13.054z"/>');t.iconChevronDown=r;const a=V('<path d="M8 17.65L9.739 19 16 12 9.739 5 8 6.35 13.054 12z"/>');t.iconChevronNext=a;const n=V('<path d="M16 17.65L14.261 19 8 12l6.261-7L16 6.35 10.946 12z"/>');t.iconChevronPrevious=n;const c=V('<path d="M6 11h8v2H6zm0-4h12v2H6z"/><path d="M2 2v20h3.5l3-4H14v-2H7.5l-3 4H4V4h16v6h2V2z"/><path d="M20.3 12.3L19 13.6l-1.3-1.3-1.4 1.4 1.3 1.3-1.3 1.3 1.4 1.4 1.3-1.3 1.3 1.3 1.4-1.4-1.3-1.3 1.3-1.3z"/>');t.iconClearHistory=c;const l=V('<path d="M17.524 5 19 6.476 13.475 12 19 17.524 17.524 19 12 13.475 6.476 19 5 17.524 10.525 12 5 6.476 6.476 5 12 10.525z"/>');t.iconClose=l;const h=V('<path d="M11 13v9H9v-5.586l-6.293 6.293-1.414-1.414L7.586 15H2v-2zM21.293 1.293l1.414 1.414L16.414 9H22v2h-9V2h2v5.586z"/>');t.iconCollapse=h;const d=V('<path d="M4 15v5h16v-5h2v7H2v-7zm9-13v10.587l3.293-3.294 1.414 1.414L12 16.414l-5.707-5.707 1.414-1.414L11 12.585V2z"/>');t.iconDownload=d;const p=V('<path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM8.707 7.293l8 8-1.414 1.414-8-8z"/></svg>');t.iconError=p;t.iconExpand='<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path d="M4.99935 9.99967C4.99935 10.9201 4.25316 11.6663 3.33268 11.6663C2.41221 11.6663 1.66602 10.9201 1.66602 9.99967C1.66602 9.0792 2.41221 8.33301 3.33268 8.33301C4.25316 8.33301 4.99935 9.0792 4.99935 9.99967Z" fill="#161513"/><path d="M11.666 9.99967C11.666 10.9201 10.9198 11.6663 9.99935 11.6663C9.07887 11.6663 8.33268 10.9201 8.33268 9.99967C8.33268 9.0792 9.07887 8.33301 9.99935 8.33301C10.9198 8.33301 11.666 9.0792 11.666 9.99967Z" fill="#161513"/><path d="M18.3327 9.99967C18.3327 10.9201 17.5865 11.6663 16.666 11.6663C15.7455 11.6663 14.9993 10.9201 14.9993 9.99967C14.9993 9.0792 15.7455 8.33301 16.666 8.33301C17.5865 8.33301 18.3327 9.0792 18.3327 9.99967Z" fill="#161513"/></svg';t.iconExpandArrow='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 9L11.9746 15L18 9H6Z" fill="#161513"/></svg>';const u=V('<path class="st0" d="M20 20H4V4h7V2H2v20h20v-9h-2z"/><path xmlns="http://www.w3.org/2000/svg" class="st0" d="M14 2v2h4.6L8.3 14.3l1.4 1.4L20 5.4V10h2V2z"/>');t.iconExternalLink=u;const g=V('<path d="M14.414 2 21 8.584V22H3V2.009zM13 3.999l-8 .007v15.995h14V9.996l-6 .001zm4.585 3.998L15 5.413v2.585z"/>');t.iconFile=g;const m=V('<path d="M4 2h10.414L20 7.586V22H4zm2 2v16h12V9h-5V4zm9 1.414L16.586 7H15z"/><path d="M16 12a1 1 0 11-2 0 1 1 0 012 0zm-6.143 1L7 19h10l-2.857-4.5L12 16.75z"/>');t.iconImage=m;const b=V('<path d="M22 5v14H2V5zm-2 2H4v10h16zM7 13v2H5v-2zm12 0v2h-2v-2zm-4 0v2H9v-2zM7 9v2H5V9zm12 0v2h-2V9zm-4 0v2h-2V9zm-4 0v2H9V9z" />');t.iconKeyboard=b;const f=V('<path d="M13 14c-1.5 0-2.9-.4-4-1.1 1.1-2.4 1.7-5 1.9-6.9h9V4H7V2H5v2H2v2h6.9c-.2 1.7-.7 3.7-1.5 5.6C6.5 10.5 6 9.2 6 8H4c0 1.9.9 4 2.5 5.5C5.3 15.5 3.8 17 2 17v2c2.6 0 4.6-1.9 6.1-4.3 1.4.8 3 1.3 4.9 1.3zm7.6 4.6L17 10.5l-3.6 8.1-1.3 3 1.8.8L15 20h4l1.1 2.4 1.8-.8zm-4.7-.6l1.1-2.5 1.1 2.5z"/>');t.iconLanguage=f;t.iconLaunchButton='<svg width="36" height="36" viewBox="0 0 36 36"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.875 8.625a2.25 2.25 0 00-2.25 2.25v16c0 .621.504 1.125 1.125 1.125h.284c.298 0 .585-.119.796-.33l2.761-2.76a2.25 2.25 0 011.59-.66h15.944a2.25 2.25 0 002.25-2.25V10.875a2.25 2.25 0 00-2.25-2.25H7.875zM24.75 18a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm-4.5-2.25a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-9 2.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" fill="#fff"/></svg>';const v=V('<path d="M4.014 3C2.911 3 2 3.888 2 4.992v15c0 .6.408 1.008 1.007 1.008h.6a.887.887 0 0 0 .695-.288l3.094-3.12c.407-.384.91-.6 1.415-.6h11.175C21.089 16.992 22 16.104 22 15V4.992C22 3.888 21.089 3 19.986 3zm3.981 7.008A1.986 1.986 0 0 1 6.005 12c-1.103 0-1.99-.888-1.99-1.992s.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.995 0C13.99 11.112 13.103 12 12 12s-1.99-.888-1.99-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.996 0c0 1.104-.888 1.992-1.99 1.992s-1.991-.888-1.991-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016z" fill="#fff"/>');t.iconLogo=v;const w=V('<path d="M7 22v-2h4v-2.062C7.06 17.444 4 14.073 4 10h2c0 3.309 2.691 6 6 6s6-2.691 6-6h2c0 4.072-3.059 7.444-7 7.938V20h4v2h-6zm5-20c2.206 0 4 1.794 4 4v4c0 2.206-1.794 4-4 4s-4-1.794-4-4V6c0-2.206 1.794-4 4-4zm0 2c-1.103 0-2 .897-2 2v4c0 1.103.897 2 2 2s2-.897 2-2V6c0-1.103-.897-2-2-2z"/>');t.iconMic=w;const x=V('<path d="M19.33 23.02l-7.332-3.666-7.332 3.666 1.418-7.995L1 9.555l7.331-1.222L11.998 1l3.666 7.333 7.332 1.222-5.084 5.47z"/>');t.iconRating=x;const k=V('<path d="M10 2a8 8 0 016.317 12.91l5.383 5.384-1.414 1.414-5.386-5.384A8 8 0 1110 2zm0 2a6 6 0 100 12 6 6 0 000-12z" fill="rgb(22, 21, 19)"/>');t.iconSearch=k;const y=V('<path d="M13 22V5.414l5.293 5.293 1.414-1.414L12 1.585 4.293 9.293l1.414 1.414L11 5.414V22h2z" fill="#161513"/>');t.iconSend=y;const _=V('<path d="M22 2v20H2V2zm-2 2H4v16h16zm-3 1.674V14a2 2 0 11-2.15-1.995L15 12V8.326l-5 1.428V16a2 2 0 11-2.15-1.995L8 14V8.246z"/>');t.iconShareAudio=_;const O=V('<path d="M13.414 2L17 5.586V7h.414L21 10.586V22H7v-4H3V2zM17 9.414V18H9v2h10v-8.586zm-2-3L12.586 4H5v12h10zM13 11v2H7v-2zm-2-4v2H7V7z"/>');t.iconShareFile=O;const j=V('<path d="M12 2c3.874 0 6.994 3.28 6.99 7.214l.011.285c.008.927-.202 2.23-.787 3.837-.96 2.639-2.73 5.452-5.49 8.353L12 22.45l-.724-.761c-2.76-2.901-4.53-5.714-5.49-8.353-.627-1.722-.823-3.095-.782-4.03l.006-.252C5.134 5.147 8.205 2 12 2zm0 2C9.254 4 7.006 6.362 7.002 9.386L7 9.529c-.004.694.168 1.753.667 3.123.741 2.036 2.038 4.221 4.014 6.507l.32.365.32-.365c1.867-2.159 3.127-4.228 3.886-6.166l.128-.34c.535-1.469.694-2.58.664-3.259l-.008-.32C16.879 6.244 14.676 4 12 4zm0 2a3 3 0 1 1-.001 6A3 3 0 0 1 12 6zm0 2a1 1 0 1 0 .001 2A1 1 0 0 0 12 8z"/>');t.iconShareLocation=j;const M=V('<path d="M22 2v16h-4v4H2V6h4V2zm-9.036 12.378L6.93 20H16v-2.585zM16 8H4v11.999l9.036-8.377L16 14.585zm4-4H8v2h10v10h2zM7 9a2 2 0 110 4 2 2 0 010-4z"/>');t.iconShareMedia=M;const z=V('<path fill="#161513" d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12zm15.207-2.793-1.414-1.414L10 13.586l-2.293-2.293-1.414 1.414L10 16.414z"/>');t.iconSuccess=z;const $=V('<path d="M1.707.293l22 22-1.414 1.414L12 13.414V21l-6.35-5.114H1V7.954h4.65l.5-.39L.293 1.707zM19.67 4.446c2.119 1.967 3.302 4.613 3.33 7.452a10.363 10.363 0 01-1.392 5.295l-1.476-1.476c.58-1.18.88-2.472.868-3.8-.023-2.29-.981-4.43-2.697-6.025zM7.583 8.996l-1.232.955H3v3.964h3.351L10 16.875v-5.461zm8.051-1.68C17.15 8.547 17.991 10.21 18 11.999c.003.482-.055.956-.17 1.416l-1.86-1.86c-.133-1.017-.691-1.964-1.604-2.706zM12 3v4.586L9.424 5.01z"/>');t.iconTTSMute=$;const C=V('<path d="M13 3v18l-6.35-5.114H2V7.954h4.65zm5.67 1.446c2.119 1.967 3.302 4.613 3.33 7.452.029 2.904-1.15 5.658-3.316 7.75l-1.396-1.421c1.772-1.71 2.735-3.95 2.712-6.31-.023-2.29-.981-4.43-2.697-6.025zM11 7.125L7.351 9.95H4v3.964h3.351L11 16.875zm4.634.19C17.15 8.548 17.991 10.212 18 12c.01 1.806-.828 3.5-2.358 4.771l-1.284-1.519c1.065-.885 1.65-2.037 1.642-3.242-.006-1.187-.587-2.309-1.634-3.16z"/>');t.iconTTSUnmute=C;const S=V('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m12.36 17-1.796-4.87h1.18l1.138 3.584 1.153-3.585h1.132L13.37 17zm3.33 0v-4.87h1.046V17zm1.996 0v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>');t.iconVideo=S;const I=V('<path fill="#161513" d="m12 2 10 18H2zm-1 12h2v-4h-2zm0 1v2h2v-2z"/>');t.iconWarn=I;const T=V('<path d="M11 2a9 9 0 017.032 14.617l3.675 3.676-1.414 1.414-3.676-3.675A9 9 0 1111 2zm0 2a7 7 0 100 14 7 7 0 000-14zm1 3v3h3v2h-3v3h-2v-3H7v-2h3V7z"/>');t.iconZoom=T;const A=V('<path fill="#161513" fill-rule="evenodd" d="M21.205 6.707 8.998 18.914l-6.707-6.707 1.414-1.414 5.293 5.293L19.791 5.293l1.414 1.414Z" clip-rule="evenodd"/>');t.iconCheck=A;const E=V('<path fill="#161513" d="M10.998 3c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm0 18c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm11-9c0-.55-.45-1-1-1-.56 0-1 .45-1 1.01 0 .55.45.99 1 .99.56 0 1-.45 1-1Zm-19-1c.55 0 1 .45 1 1s-.44 1-1 1c-.55 0-1-.44-1-.99 0-.56.44-1.01 1-1.01Zm1.93-6.072a1.004 1.004 0 0 0 0 1.415.998.998 0 0 0 1.42-.007.995.995 0 0 0-.007-1.408.997.997 0 0 0-1.414 0Zm12.727 14.143a1.004 1.004 0 0 1 0-1.415.997.997 0 0 1 1.414 0 .995.995 0 0 1 .007 1.408.998.998 0 0 1-1.421.007ZM6.34 17.657a1.003 1.003 0 0 0-1.414 0 .998.998 0 0 0 .007 1.42.994.994 0 0 0 1.407-.005.997.997 0 0 0 0-1.415ZM3.336 9.359a1.004 1.004 0 0 1-.523-1.314.997.997 0 0 1 1.314-.523.995.995 0 0 1 .527 1.305 1 1 0 0 1-1.318.532Zm16.01 5.806a1 1 0 1 0 1.841.782.994.994 0 0 0-.527-1.305.997.997 0 0 0-1.314.523ZM7.52 19.87a1.003 1.003 0 0 1 1.314-.523.996.996 0 0 1 .523 1.314.995.995 0 0 1-1.305.527 1 1 0 0 1-.532-1.318Zm-4.18-5.23a.995.995 0 0 0-.527 1.305 1 1 0 1 0 .527-1.305Zm5.488-9.984a.995.995 0 0 1-1.305-.527.997.997 0 0 1 .523-1.314.999.999 0 1 1 .782 1.841Zm5.814 16.005c.218.505.8.744 1.305.527a.999.999 0 1 0-.782-1.841.997.997 0 0 0-.523 1.314Z"/>');t.iconGenerating=E;const P=V('<path fill="#161513" d="M3.47 1.667h14.862v9.166h-4.459l-3.333 7.5h-.542c-1.157 0-2.002-.324-2.566-.846-.551-.511-.767-1.152-.767-1.654V12.5H1.5L3.47 1.667Zm10.695 7.5h2.5V3.333h-2.5v5.834Zm-1.667-5.834H4.86l-1.363 7.5h4.835v5c0 .055.034.247.232.43.143.132.412.298.908.369l3.026-6.809v-6.49Z"/>',"20");t.iconThumbsDown=P;const L=V('<path fill="#161513" d="M3.47 18.333h14.862V9.167h-4.459l-3.333-7.5h-.542c-1.157 0-2.002.324-2.566.847-.551.51-.767 1.151-.767 1.653V7.5H1.5l1.97 10.833Zm10.695-7.5h2.5v5.834h-2.5v-5.834Zm-1.667 5.834H4.86l-1.363-7.5h4.835v-5c0-.055.034-.247.232-.43.143-.132.412-.298.908-.369l3.026 6.809v6.49Z"/>',"20");t.iconThumbsUp=L;const F=V('<path fill="#C74634" d="M3.345 2.5c-.92 0-1.679.74-1.679 1.66v12.5c0 .5.34.84.84.84h.499c.26 0 .42-.08.58-.24l2.577-2.6c.34-.32.76-.5 1.18-.5h9.312c.92 0 1.679-.74 1.679-1.66V4.16c0-.92-.76-1.66-1.679-1.66H3.344Zm3.317 5.84c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Z"/>',"20");t.iconInlineLaunch=F;const R=V('<path fill="#C74634" d="M2.677 2c-.736 0-1.343.592-1.343 1.328v10c0 .4.272.672.671.672h.4a.591.591 0 0 0 .464-.192l2.062-2.08c.272-.256.608-.4.943-.4h7.45c.736 0 1.343-.592 1.343-1.328V3.328c0-.736-.607-1.328-1.343-1.328H2.677ZM5.33 6.672C5.33 7.408 4.739 8 4.004 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.997 0C9.328 7.408 8.736 8 8 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.996 0c0 .736-.591 1.328-1.326 1.328a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.326.608 1.326 1.344Z"/>',"16");t.iconInlineLogo=R;const D=V('<path fill="#8F520A" d="M1.332 14.667 7.998 1.333l6.667 13.334H1.332Zm6-7.334V10h1.333V7.333H7.332Zm0 4v1.334h1.333v-1.334H7.332Z"/>',"16");t.iconInlineError=D;const N=V('<path fill="#211e1c" fill-rule="evenodd" d="M10.364 4c4.665 0 8.492 3.29 8.632 7.747L19 12v1.585l1.293-1.292 1.414 1.414L18 17.414l-3.707-3.707 1.414-1.414L17 13.585V12c0-3.419-2.935-6-6.636-6C6.853 6 4 8.906 4 12.5S6.853 19 10.364 19a6.243 6.243 0 0 0 3.764-1.258l.228-.18 1.272 1.544A8.25 8.25 0 0 1 10.364 21C5.74 21 2 17.19 2 12.5 2 7.81 5.74 4 10.364 4z"/>');t.iconStartOver=N;const H=V('<path d="M3 3h18v18H3zm2 2v14h14V5z"/>');function V(e,t){return`<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 ${t||"24"} ${t||"24"}">${e}</svg>`}t.iconStop=H},8291:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.syncTTSLocaleIfUnavailable=t.isSVG=t.isInteger=t.isActionEventCopyMessageType=t.convertBreakTagsToNewLines=void 0,t.addDefaultSettings=function(e){const t=Object.assign(Object.assign({},a.defaultSettings),e);e.i18n&&Object.keys(e.i18n).length&&(t.i18n=k(a.defaultSettings.i18n,e.i18n));t.colors=Object.assign(Object.assign({},a.defaultSettings.colors),e.colors),t.userId=e.userId||(0,o.generateID)({prefix:"user"}),t.icons=function(e){const t=e.icons||{};for(const s in w){const i=s,o=w[i];o in e&&(t[i]=e[o])}return t}(t),t.locale=b(t.locale,t.i18n),e.typingStatusInterval&&e.typingStatusInterval<a.defaultSettings.typingStatusInterval&&(t.typingStatusInterval=a.defaultSettings.typingStatusInterval);t.enableVoiceOnlyMode&&(t.enableBotAudioResponse=!0,t.initBotAudioMuted=!1,t.enableSpeech=!0);if(!t.position){const e="rtl"===window.getComputedStyle(document.body).direction;t.position=e?{left:"20px",bottom:"20px"}:{right:"20px",bottom:"20px"}}return t},t.configureColorCustomization=function(e,t){if(e){const s=["headerBackground","visualizer","ratingStarFill"],i=["botText","userText"],o=Object.assign({},e);s.forEach((t=>{o[t]=e[t]||e.branding})),i.forEach((t=>{o[t]=e[t]||e.text})),Object.keys(o).forEach((e=>{const s=o[e];if(s)if("shareMenuText"===e)t.updateCSSVar("--color-popup-button-text",s);else{const i=`--color-${e.replace(/([A-Z&])/g,"-$1").toLowerCase()}`;t.updateCSSVar(i,s)}}))}},t.configureLocale=b,t.debounce=function(e,t){let s;return function(){const i=this,o=arguments;clearTimeout(s),s=setTimeout((function(){s=null,e.apply(i,o)}),t)}},t.getColor=function(e,t){const s=document.querySelector(`.${t}-wrapper`);return getComputedStyle(s).getPropertyValue(e)},t.getFieldInputValues=function(e){const t={};e&&Object.keys(e).forEach((s=>{var i;t[s]=null===(i=document.getElementById(e[s]))||void 0===i?void 0:i.value}));return t},t.getFooterFormComponent=function(e,t,s,o){return r.MessageComponentFactory.fromMessage(s,e,{messagePayload:{type:i.MessageType.Form,forms:[t]}},o)},t.getFormShareText=f,t.getPopupContent=function(e,t,s,a){const c="none",h=e.createDiv(["wrapper","popup-content-wrapper",c]),d=e.createDiv(["popup-dialog"]),p=r.MessageComponentFactory.fromMessage(s,e,{messagePayload:t},Object.assign(Object.assign({},a),{onMessageActionClicked:t=>{(t.type!==i.ActionType.SubmitForm||p.validateForm())&&(e.addCSSClass(h,c),a.onMessageActionClicked(t))}})),u=p.render(),g=u.querySelector(`.${s.name}-form-message-header:first-child`),m=e.createIconButton({css:["header-button"],icon:s.icons.close||l.iconClose,iconCss:[],title:"close"});if((0,n.on)(m,"click",(()=>e.addCSSClass(h,c))),h.tabIndex=0,(0,n.on)(h,"click",(t=>{d.contains(t.target)||e.addCSSClass(h,c)})),(0,n.on)(h,"keyup",(t=>{t.code===o.KeyCode.Esc&&(e.addCSSClass(h,c),t.stopPropagation())})),g)g.appendChild(m);else{const t=e.createDiv(["popup-header","flex"]);t.appendChild(m),d.appendChild(t)}return d.appendChild(u),h.appendChild(d),h},t.getShareText=function(e){let t=h;switch(e.type){case i.MessageType.Card:return e.cards.forEach((e=>{var s;t+=`${(e.title?`${e.title} - `:h)+(e.description?`${e.description} - `:h)+(null!==(s=e.url)&&void 0!==s?s:h)}\n`})),t;case i.MessageType.Text:return e.text;case i.MessageType.Attachment:return e.attachment.url;case i.MessageType.Location:const s=e.location;return`${s.title?`${s.title} - `:h}${s.latitude}, ${s.longitude}`;case i.MessageType.Table:e.rows.forEach((e=>{e.fields.forEach((e=>{t+=v(e)}))}));break;case i.MessageType.Form:e.forms.forEach((e=>{const s=f(e);t+=s?`${s} - `:h}));break;case i.MessageType.EditForm:const o=e;t=o.title?`${o.title} - `:h,(0,i.isEditFormPayloadWithFields)(o)?o.fields.forEach((e=>{t+=v(e)})):o.formRows.forEach((e=>{e.columns.forEach((e=>{e.fields.forEach((e=>{t+=v(e)}))}))}));break;case i.MessageType.TableForm:const r=e;r.rows.forEach(((e,s)=>{e.fields.forEach((e=>{t+=v(e)})),t+=f(r.forms[s])}))}return y(t)},t.isAnyVoiceAvailable=function(e,t){if(!t)return Promise.resolve(!1);Array.isArray(t)||(t=[t]);if(!t.length)return Promise.resolve(!1);const s=t.map((e=>{var t;return null===(t=e.lang)||void 0===t?void 0:t.toLowerCase()}));return e.getVoices().then((e=>{let t=!1;const i=e.map((e=>e.lang.toLowerCase()));for(const e of s)if(i.includes(e)){t=!0;break}return t}))},t.isFeedbackComponent=function(e){return void 0!==e.ratingId},t.matchStringIgnoreCase=function(e,t){const s=e.toLowerCase(),i=t.toLowerCase();return s===i},t.mergeTranslationStrings=k,t.sanitizeText=function(e){return p.forEach((t=>{e=e.replace((0,o.resetRegex)(t.match),t.replace)})),e},t.setAttributes=function(e,t){for(const[s,i]of Object.entries(t))e.setAttribute(s,i)},t.setEmbeddedLinksHandler=function e(t,s){for(let i=0;i<t.childElementCount;i++){const o=t.children[i];if("a"===o.tagName.toLowerCase()){const e=o;e.rel="noreferrer noopener",s.onclick&&(e.onclick=s.onclick.bind(e)),s.target&&(e.target=s.target)}o.hasChildNodes()&&e(o,s)}},t.setLinksOpenInNewWindow=function e(t){for(let s=0;s<t.childElementCount;s++){const i=t.children[s];"a"===i.tagName.toLowerCase()&&(i.onclick=e=>(window.open(i.href,h,"height=450px,width=800px,menubar,toolbar,personalbar,status,resizable,noopener,noreferrer"),e.preventDefault(),e.stopPropagation(),!1)),i.hasChildNodes()&&e(i)}},t.throttle=function(e,t){let s=!1;return function(){const i=this;s||(e.apply(i,arguments),s=!0,setTimeout((()=>{s=!1}),t))}},t.updatePosition=function(e,t){t.updateCSSVar("--position-top",e.top||"unset"),t.updateCSSVar("--position-left",e.left||"unset"),t.updateCSSVar("--position-right",e.right||"unset"),t.updateCSSVar("--position-bottom",e.bottom||"unset"),e.bottom&&t.updateCSSVar("--widget-max-height",`calc(100vh - 60px - ${e.bottom})`)};const i=s(6246),o=s(6064),r=s(5430),a=s(865),n=s(3010),c=s(2436),l=s(1660),h="";t.isInteger=e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;t.isSVG=e=>{const t=e.match(/<svg\s/gi);return t&&t.length>0};const d=/<br\s*\/?>/g;t.convertBreakTagsToNewLines=e=>e.replace(d,"\n");const p=[{match:/<([a-z])/gi,replace:(e,t)=>`&#x3c;${t}`},{match:/<\/([a-z])/gi,replace:(e,t)=>`&#x3c;&#47;${t}`}];const u=(()=>{let e=!1;return(t={hasRecognition:!1,hasSynthesis:!1,isReset:!1,recognitionLocale:h,synthesisLocales:[]})=>{var s;t.isReset&&(e=!1);let i=t.synthesisLocales;return Array.isArray(i)||(i=[]),t.hasRecognition&&t.hasSynthesis&&(null===(s=t.recognitionLocale)||void 0===s?void 0:s.length)&&(!e&&t.synthesisLocales.length||(e=!0,i=[{lang:t.recognitionLocale}])),i}})();function g(e,t){const s=e.toLowerCase();for(const e in t)if(s===e.toLowerCase())return!0;return!1}function m(e,t){const s=e.toLowerCase().split("-")[0];for(const e in t)if(s===e.toLowerCase())return!0;return!1}function b(e,t){let s=[e.toLowerCase()],i="en";s=s.concat((0,c.getLocales)()),s.includes(i)||s.push(i);for(const e of s){if(g(e,t)){i=e;break}if(m(e,t)){i=e.split("-")[0];break}}return i}function f(e,t=!1){let s=e.title?`${e.title} - `:h;return(0,i.isFormEntityWithFields)(e)?e.fields.forEach((e=>{s+=v(e)})):e.formRows.forEach((e=>{e.columns.forEach((e=>{e.fields.forEach((e=>{(0,i.isReadOnlyField)(e)&&(s+=v(e))}))}))})),t?y(s):s}function v(e){const t=e.value||e.label;return t?`${t} - `:h}t.syncTTSLocaleIfUnavailable=u;const w={avatarAgent:"agentAvatar",avatarBot:"botIcon",avatarUser:"personIcon",fileAudio:"audioIcon",fileImage:"imageIcon",fileGeneric:"fileIcon",fileVideo:"videoIcon",clearHistory:"clearMessageIcon",close:void 0,collapse:"closeIcon",download:"downloadIcon",error:"errorIcon",expandImage:"expandImageIcon",keyboard:"keyboardIcon",logo:"logoIcon",launch:"botButtonIcon",mic:"micIcon",rating:void 0,send:"sendIcon",shareMenu:"attachmentIcon",shareMenuAudio:void 0,shareMenuFile:void 0,shareMenuLocation:void 0,shareMenuVisual:void 0,ttsOff:"audioResponseOffIcon",ttsOn:"audioResponseOnIcon",typingIndicator:"chatBubbleIcon"};function x(e){const t={},s=Object.keys(e);for(const i of s)t[i.toLowerCase()]=e[i];return t}function k(e,t){e=x(e),t=x(t);const s=new Set;Object.keys(e).forEach((e=>{s.add(e)})),Object.keys(t).forEach((e=>{s.add(e)}));const i={};return s.forEach((s=>{i[s]=Object.assign(Object.assign(Object.assign({},e.en),e[s]),t[s])})),i}function y(e){return e.length?e.slice(0,e.length-3):e}t.isActionEventCopyMessageType=e=>e.type===i.ActionType.Client&&e.actionType===i.ClientActionType.COPY_MESSAGE_TEXT},2436:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.isStorageAvailable=t.getLocales=t.getBrowserLocale=void 0;t.getBrowserLocale=()=>navigator.language.toLowerCase();t.getLocales=()=>{var e;return(null===(e=navigator.languages)||void 0===e?void 0:e.map((e=>e.toLowerCase())))||[]};t.isStorageAvailable=e=>s(e);const s=e=>{let t;try{t=window[e];const s="__storage_test__";return t.setItem(s,s),t.removeItem(s),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}},4413:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.AlertDialog=void 0;const i=s(6064),o=s(8098);t.AlertDialog=class{constructor(e){this.cs=e,this.ls=!1,this.hs=e=>{h(e)||e.code===i.KeyCode.Esc&&(this.close(),e.stopPropagation())},this.ds=e=>{h(e)||e.code===i.KeyCode.Tab&&(e.target!==this.ps||e.shiftKey?e.target===this.us&&e.shiftKey&&(e.preventDefault(),this.ps.focus()):(e.preventDefault(),this.us.focus()))}}open(){if(this.ls)return;const{autoDismiss:e,autoDismissTimeout:t,parent:s}=this.cs,i=null!=t?t:1e4;this.gs=document.activeElement,this.ls=!0,s.append(this.render()),this.bs(),this.fs(),e&&setTimeout((()=>{this.close()}),i)}close(){if(!this.ls)return;const{domUtil:e,fallbackFocus:t}=this.cs,s="dialog-out";e.addCSSClass(this.vs,s),setTimeout((()=>{this.ws(),e.removeCSSClass(this.vs,s),this.xs.remove(),this.gs&&this.gs.offsetParent?this.gs.focus():t(),this.ls=!1}),200)}render(){const{title:e,description:t,domUtil:s,icon:i,actions:a,showDismiss:n,dismissLabel:h,modeless:d}=this.cs,p="dialog",u=s.createDiv.bind(s),g=s.cssPrefix,m=u([`${p}-wrapper`]);let b;d&&s.addCSSClass(m,"modeless"),d||(b=u([`${p}-backdrop`]));const f=u([`${p}-icon-content-wrapper`,"flex"]),v=u([`${p}-content`]),w=u([p,"flex"]);if(d||s.addCSSClass(w,"col"),i){const e=s.createImageIcon({icon:i}),t=u([`${p}-icon`]);l(t,e),l(f,t)}const x=`${p}-title`,k=s.createTextDiv([x]);if(k.id=`${g}-${x}`,k.textContent=e,l(v,k),t){const e=`${p}-description`,i=s.createTextDiv([e]);i.id=`${g}-${e}`,i.textContent=t,l(v,i),w.setAttribute("aria-describedby",i.id)}if(l(f,v),l(w,f),n){const e=`${p}-close-button`,t=s.createIconButton({css:[e],icon:o.iconClose,title:h,iconCss:[`${e}-icon`]});(0,o.on)(t,c,this.close.bind(this)),l(w,t)}if(a&&a.length){const e=u(["action-wrapper","flex"]);a.forEach((t=>{const i=["popup-action"];t.type===r&&i.push(r);const a=s.createButton(i);a.innerHTML=t.label,(0,o.on)(a,c,(e=>{t.handler(e)})),e.appendChild(a)})),l(w,e)}return d||l(m,b),l(m,w),(0,o.setAttributes)(w,{role:"alertDialog","aria-modal":(!d).toString(),"aria-labelledby":k.id}),this.vs=w,this.xs=m,this.ks(w),m}ks(e){const t=e.querySelectorAll("[tabIndex]:not([tabIndex^='-']), button");this.us=t[0],this.ps=t[t.length-1]}bs(){this.us.focus()}fs(){const e=this.vs;(0,o.on)(e,a,this.ds),(0,o.on)(e,n,this.hs)}ws(){const e=this.vs;(0,o.off)(e,a,this.ds,!0),(0,o.off)(e,n,this.hs,!0)}};const r="filled",a="keydown",n="keyup",c="click",l=(e,...t)=>{e.append(...t)},h=e=>e.ctrlKey||e.metaKey||e.altKey},7739:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.CancelResponseComponent=void 0;const i=s(8098),o=s(4557),r=s(9780);class a extends o.Component{constructor(e){super(),this.V=e,this.ys=new r.Logger("CancelResponseComponent"),this._s=!1,this.Os=()=>{this.V.onClick(),this.hide()},this.render()}show(){if(!this._s){this._s=!0;try{this.appendToElement(this.V.parent)}catch(e){this.ys.debug("No parent to add cancel response button")}}}hide(){if(!this._s)return;this._s=!1;const{domUtil:e}=this.V,t=this.element;e.addCSSClass(t,c),setTimeout((()=>{e.removeCSSClass(t,c),this.remove()}),n),this.V.onHide()}isVisible(){return this._s}render(){const{domUtil:e,i18n:t}=this.V;if(this.element)return void(this.element.title=t.cancelResponse);const s="cancel-response-button",o=e.createIconButton({css:[s],icon:i.iconStop,iconCss:[`${s}-icon`],title:t.cancelResponse});(0,i.on)(o,"click",this.Os),this.element=o}setLocale(e){this.V.i18n=e,this.render()}}t.CancelResponseComponent=a;const n=210,c="hide"},28:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.rejectErrorTextStream=t.WidgetComponent=void 0;const o=s(6246),r=s(5229),a=s(6064),n=s(8098),c=s(2366),l=s(9780),h=s(5915),d=s(2854),p=s(4413),u=s(4557),g=s(7739),m=s(4810),b=s(9571),f=window.BroadcastChannel,v="collapsed",w="expanded",x="large",k="none",y=window.setTimeout,_=[o.MessageType.Suggest,o.MessageType.SessionClosed,o.MessageType.CloseSession,o.MessageType.Status],O=[o.MessageType.Text,o.MessageType.Attachment,o.MessageType.Location,o.MessageType.FormSubmission];class j extends u.Component{constructor(e,t,s){var r,d,p;super(),this.skillMessages=[],this.contextWidgetMap={},this.js=[],this.ys=new l.Logger("ChatComponent"),this.Ms=[],this.zs=0,this.$s=[],this.Cs=!0,this.Ss=!0,this.Is=!1,this.Ts=!1,this.As=!1,this.Es=!0,this.Ps=!1,this.Ls=[],this.Fs=!1,this.Rs=5e3,this.Ds=new Map,this.Ns=!1,this.Hs="",this.Vs=!1,this.Us=e=>i(this,void 0,void 0,(function*(){var t,s;if(Number.isInteger(e)&&e!==o.ConnectionState.Open){this.Bs(),this.Ws.isDisabled()||(this.Ws.disable(),null===(t=this.qs)||void 0===t||t.disable(),this.ys.debug("WebSocket not open, send message button disabled")),this.Gs(),e===o.ConnectionState.Connecting?this.showTypingIndicator():this.hideTypingIndicator();for(const e of this.Ms)this.Zs(e.fileName,o.CoreError.UploadNetworkFail,e.divId);this.Ys&&this.Ys.disableComponent(!0)}else this.Js=void 0,this.hideTypingIndicator(),this.Ws.isDisabled()&&(this.Ws.disable(!1),null===(s=this.qs)||void 0===s||s.disable(!1),this.ys.debug("Connection established, send message button enabled")),this.Ks();this.Xs(e)})),this.Qs=e=>i(this,void 0,void 0,(function*(){if(e){const t=this.ei;t.URI=e.URI,t.clientAuthEnabled||(t.userId=e.userId,t.channelId=e.channelId)}yield this.ti(),this.si(),this.ii()})),this.oi=e=>i(this,void 0,void 0,(function*(){const t=yield e.getPayload();this.ri.createAnchor(`tel:${t}`,"").click()})),this.ai=e=>i(this,void 0,void 0,(function*(){var t;const s=this.ni,i=yield e.getPayload();if(i instanceof HTMLElement){const o=2e3;try{yield(0,a.copyWithFormatting)(i),this.ci(s.copySuccessMessage,n.iconSuccess,o),null===(t=e.onSuccess)||void 0===t||t.call(e)}catch(e){this.ci(s.copyFailureMessage,n.iconWarn,o)}}else this.li.trigger(i.actionType,i)})),this.di=e=>{this.pi()},this.ui=e=>{this.gi(e)},this.mi=e=>i(this,void 0,void 0,(function*(){this.bi(this.$s),this.fi();const t=yield e.getPayload(),{label:s,imageUrl:i}=e,r={};t["system.replaceMessage"]&&(r.hidden=!0);const a=(0,o.buildUserMessage)({postback:t,text:i?this.ri.createImageIcon({icon:i}).outerHTML:s,type:o.MessageType.Postback});try{this.sendMessage(a,r)}catch(e){this.wi(this.$s)}})),this.xi=e=>i(this,void 0,void 0,(function*(){if(navigator.share){const t=yield e.getPayload();navigator.share({text:t,title:e.label})}else this.ci(this.ni.shareFailureMessage,n.iconWarn)})),this.ki=e=>i(this,void 0,void 0,(function*(){const t=e.messageComponent;if(!t.validateForm())return;this.fi();const s=t.getSubmittedFields();if(this.yi){const e=this.getMessages();e.slice().reverse().some((e=>{if(e.msgId!==t.msgId||e.messagePayload.type!==o.MessageType.EditForm)return!1;const i=e.messagePayload;return(0,o.isEditFormPayloadWithFields)(i)?i.fields.forEach((e=>{(0,o.isReadOnlyField)(e)||(e.defaultValue=s[e.id])})):i.formRows.forEach((e=>{e.columns.forEach((e=>{e.fields.forEach((e=>{(0,o.isReadOnlyField)(e)||(e.defaultValue=s[e.id])}))}))})),!0})),this._i.setItem(this.Oi,JSON.stringify(e))}const i=yield e.getPayload(),r={postback:i,submittedFields:s,type:o.MessageType.FormSubmission};i||delete r.postback;try{this.sendMessage((0,o.buildUserMessage)(r),{hidden:!0})}catch(e){this.ji(e)}})),this.gi=e=>i(this,void 0,void 0,(function*(){const t=this.ei,s=yield e.getPayload();this.ri.createAnchor(s,"",[],t.openLinksInNewWindow,t.linkHandler).click()})),this.Mi=e=>i(this,void 0,void 0,(function*(){const t=yield e.getPayload();this.ri.createAnchor(t,"",[],this.ei.openLinksInNewWindow,this.zi).click()})),this.$i={call:this.oi,client:this.ai,location:this.di,popup:this.ui,postback:this.mi,share:this.xi,submitForm:this.ki,url:this.gi,webview:this.Mi},this.Ci=e=>{this.Si(!1);try{this.$i[e.type](e)}catch(t){this.ys.warn("Error processing user action",e,t)}},this.Ii=()=>{var e;const t=this.ei.searchBarMode?this.Ti.element:this.Ws.element;(0,a.isVisible)(t)&&(null===(e=this.Ti)||void 0===e||e.closePopup(),this.Ns=!0,this.Ws.setRecognitionRequested(!0),this.Ws.setVoiceRecording(!0),this.fi(),this.Hs=(0,n.getColor)("--color-visualizer",this.ei.name))},this.Ai=()=>{this.Ns=!1,this.Ws.setVoiceRecording(!1)},this.Ei=e=>{const t=this.ni;let s="";switch(null==e?void 0:e.message){case o.CoreError.RecognitionMultipleConnection:s=t.errorSpeechMultipleConnection;break;case o.CoreError.RecognitionNotReady:s=t.errorSpeechInvalidUrl;break;case o.CoreError.RecognitionTooMuchSpeechTimeout:case o.CoreError.RecognitionProcessingFailure:s=t.errorSpeechTooMuchTimeout;break;default:s=t.errorSpeechUnavailable}this.ci(s,n.iconWarn),this.Ai()},this.Pi=e=>{this.Ns&&this.Li(e)},this.Fi=e=>{this.Ns&&this.Ws.updateVisualizer(e,this.Hs)},this.ji=e=>{this.ys.warn("[sendMessage] Failed to send message",e)},this.Ri=()=>{this.Di=null,"action"!==this.ei.focusOnNewMessage&&this.Ws.focusTextArea()},this.Ni=()=>{const e=this.Di;e&&(this.Hi.add(e),this.Vi.cancelRequest(e)),this.Ui(),this.Bi(),this.Wi(),this.hideTypingIndicator(),this.Ws.disable(!1)},this.Vi=e,this.ei=t,this.ze=s&&(0,a.isFunction)(s.connect)?s.connect:()=>{this.Vi.connect().catch((e=>this.ys.error("Failed to connect to backend:",e)))},this.qi=s&&(0,a.isFunction)(s.openChat)?s.openChat:()=>{},this.Gi=s&&(0,a.isFunction)(s.closeChat)?s.closeChat:()=>{},this.li=(null==s?void 0:s.eventDispatcher)||(0,a.generateEventDispatcher)(),this.Zi=s&&(0,a.isFunction)(s.handleSessionEnd)?s.handleSessionEnd:()=>{},this.Yi=s&&(0,a.isFunction)(s.receivedMessage)?s.receivedMessage:e=>{this.li.trigger(n.ChatEvent.MESSAGE_RECEIVED,e),this.li.trigger(n.ChatEvent.MESSAGE,e)},this.Ji=s&&(0,a.isFunction)(s.sentMessage)?s.sentMessage:e=>{this.li.trigger(n.ChatEvent.MESSAGE_SENT,e),this.li.trigger(n.ChatEvent.MESSAGE,e)},this.Xs=s&&(0,a.isFunction)(s.onConnectionStatusChange)?s.onConnectionStatusChange:()=>{},this.Ki=s&&(0,a.isFunction)(s.getUnreadMessagesCount)?s.getUnreadMessagesCount:()=>this.getUnreadMsgsCount(),this.ri=(null==s?void 0:s.util)||new n.DOMUtil(this.ei),this.Ft=this.ei.name,this.Xi=this.ei.locale,this.ni=Object.assign(Object.assign({},this.ei.i18n.en),this.ei.i18n[this.ei.locale]),this.isOpen=!1,this.Ts="init"===(null===(r=this.ei.initMessageOptions)||void 0===r?void 0:r.sendAt)||this.ei.openChatOnLoad||this.ei.embedded,this.Is=this.ei.enableHeadless,this.Qi=!this.ei.embedded&&!this.ei.sidepanel&&this.ei.enableResizableWidget,this.eo=this.ei.enableDefaultClientResponse,this.yi=this.ei.enableLocalConversationHistory&&this.ei.storageType!==l.StorageType.CUSTOM,this.so="default",this.ei.enableTabsSync||(this.io=()=>{}),this.ei.threadId&&(this.ht=this.ei.threadId,this.Vi.setCurrentThreadId(this.ei.threadId)),this.oo=e=>{var t;if(!(0,l.isBotMessage)(e))return;const{endOfTurn:s,messagePayload:i,requestId:r,threadId:a}=e;if(this.Hi.has(r))return;s&&(null===(t=this.ro)||void 0===t||t.hide());const n=Boolean(null==a?void 0:a.startsWith(`${o.ContextSource.UIWidget}:`));let c;if(n&&(c=this.contextWidgetMap[a]),i){if(i.type===o.MessageType.ExecuteApplicationActionCommand){const e=i;return n?c.showFullSizeWidget():this.ao(Boolean(s)),void this.li.trigger(e.actionType,e)}if(n)c.onMessageReceived(e);else{const t=i.type===o.MessageType.Command&&"noReply"===i.command;a!==this.ht?this.no(a).then((()=>{t||this.co(e)})):t||this.co(e)}}else console.warn("Message Payload Not available")},this.Vi.on(o.CoreEvent.Open,this.Qs),this.Vi.on(o.CoreEvent.State,this.Us),this.Vi.on(o.CoreEvent.MessageReceived,this.oo),this.Vi.on(o.CoreEvent.ASRStart,this.Ii),this.Vi.on(o.CoreEvent.ASRStop,this.Ai),this.Vi.on(o.CoreEvent.ASRError,this.Ei),this.Vi.on(o.CoreEvent.ASRResponse,this.Pi),this.Vi.on(o.CoreEvent.ASRVisualData,this.Fi),this.ei.enableVoiceOnlyMode&&(this.lo=()=>this.ho(),this.Vi.on(o.CoreEvent.TTSStop,this.lo)),this.ei.enableBotAudioResponse&&(this.Ss=this.ei.initBotAudioMuted),this.ei.searchBarMode?(this.Ti=new m.SearchBarWidgetComponent(this.ei,this.ri,this,this.li),this.Ws=this.Ti.footer,this.do=this.Ti.typingIndicator,this.fi=()=>{},this.updateNotificationBadge=()=>{},this.po=()=>{}):(this.qs=new c.ChatHeaderComponent(this.ei,this.ri,null===(d=this.Gi)||void 0===d?void 0:d.bind(this),this.clearConversationHistory.bind(this),this.onToggleNarration.bind(this),this.Vi,this.uo.bind(this),this.mo.bind(this),this),this.Ws=new c.ChatFooterComponent(this.ri,this.sendMessage.bind(this),this.uploadFile.bind(this),this.ei,this.getSuggestions.bind(this),this.Si.bind(this),this.pi.bind(this),this.bo.bind(this),this.li,this,this.mo.bind(this)),this.ei.showTypingIndicator&&(this.do=new h.TypingIndicatorComponent(h.MESSAGE_SIDE.LEFT,this.ei,this.ri)),"relative"===this.ei.timestampMode||"default"===this.ei.timestampMode?this.fo=new h.RelativeTimestampComponent(this.ei,this.ri):this.po=()=>{}),"action"!==(null===(p=this.ei.focusOnNewMessage)||void 0===p?void 0:p.toLowerCase())&&(this.vo=()=>{}),this.configureStorage(),this.wo(),this.Vi.isConnected()&&this.ii()}render(){const e=this.ei,t=this.ri;"undefined"!=typeof window&&(this.xo(),(0,n.updatePosition)(e.position,t),e.font&&t.updateCSSVar("font",e.font),e.fontFamily&&t.updateCSSVar("font-family",e.fontFamily),e.fontSize&&t.updateCSSVar("font-size",e.fontSize)),e.searchBarMode?this.ko=this.Ti.render():(this.element=this.yo(),this._o(),e.multiLangChat&&this.Oo());const s=this.Vi.getState();this.Us(s),s===o.ConnectionState.Open&&this.Qs(),this.jo(e),this.Mo()}embedInElement(e){const t=document.getElementById(e);if(!t)throw new Error("Can not embed chat widget.");this.ri.addCSSClass(t,"wrapper",this.ei.theme,"embedded"),this.appendToElement(t)}showChat(){if(!this.isOpen){const e=this.ri;e.removeCSSClass(this.element,v),e.addCSSClass(this.element,w),e.removeCSSClass(this.chatWidgetDiv,k),this.ei.embedded||y((()=>{e.addCSSClass(this.zo,k)}),250),this.isOpen=!0,this.Ts=!0,this.updateNotificationBadge(0),this.fi(),this.Ws.focusTextArea(),this.ii(),this.Vs&&(this.ho(),this.Vs=!1)}}onClose(){if(this.isOpen){const e=this.ri;this.Ui();this.Ws.getInputMode()===b.INPUT_MODE.VOICE&&(this.Vs=!0,this.$o()),e.removeCSSClass(this.element,w),e.addCSSClass(this.element,v),this.ei.embedded||(e.removeCSSClass(this.zo,k),y((()=>{e.addCSSClass(this.chatWidgetDiv,k),this.zo.focus()}),250),this.updateNotificationBadge(this.Ki())),this.isOpen=!1}}sendExitEvent(){const e={messagePayload:{type:o.MessageType.CloseSession},userId:this.ei.userId};if(this.ei.delegate&&this.ei.delegate.beforeEndConversation&&(0,a.isFunction)(this.ei.delegate.beforeEndConversation))try{this.ei.delegate.beforeEndConversation(e).then((e=>{e&&this.sendMessage(e,{hidden:!0,delegate:!1}).catch(this.ji)}))}catch(e){this.ys.error(e)}else this.sendMessage(e,{hidden:!0,delegate:!1}).catch(this.ji);this.Is=!1}updateNotificationBadge(e){var t;this.zs=e,e>0?this.Co&&(this.Co.innerText=`${e}`,this.zo.appendChild(this.Co)):(null===(t=this.Co)||void 0===t?void 0:t.parentElement)&&this.Co.remove()}onToggleNarration(e){this.So(e),this.li.trigger(n.ChatEvent.CLICK_AUDIO_RESPONSE_TOGGLE,e)}remove(){var e;super.remove(),null===(e=this.qs)||void 0===e||e.remove(),this.Vi.off(o.CoreEvent.Open,this.Qs),this.Vi.off(o.CoreEvent.State,this.Us),this.Vi.off(o.CoreEvent.MessageReceived,this.oo),this.Vi.off(o.CoreEvent.ASRStart,this.Ii),this.Vi.off(o.CoreEvent.ASRStop,this.Ai),this.Vi.off(o.CoreEvent.ASRError,this.Ei),this.Vi.off(o.CoreEvent.ASRResponse,this.Pi),this.Vi.off(o.CoreEvent.ASRVisualData,this.Fi),this.lo&&this.Vi.off(o.CoreEvent.TTSStop,this.lo),this.ei.embedded&&window.removeEventListener("resize",this.Io);const t=this.To;t&&t.remove(),this.ei.enableSpeech&&window.removeEventListener("visibilitychange",this.Ao)}clearConversationHistory(e=!1){e?this.Eo(e):(this.clearMessages(this.ei.userId),this.Eo(),this.Po({type:"actionClearHistory"})),this.Lo=null,this.Ls=[],this.skillMessages=[],this.ao(),this.updateNotificationBadge(0)}clearMessages(e,t){const s=this.ei;if(s.storageType===l.StorageType.CUSTOM){const e=s.conversationHistoryProvider;(0,a.isFunction)(null==e?void 0:e.deleteMessages)?e.deleteMessages({threadId:s.threadId}):this.ys.warn("Can not clear conversation history. Pass conversationHistoryProvider object with deleteMessages function when custom storage is enabled.")}else{const i=`${s.name}-${e}-messages`;(t?window[t]:this._i).getItem(i)&&this._i.removeItem(i)}}clearAllMessage(){const e=null===window||void 0===window?void 0:window.localStorage,t=(null==e?void 0:e.length)||0;if(t){const s=/oda-chat-.*-messages/g;for(let i=0;i<t;i++){const t=e.key(i);(null==t?void 0:t.match(s))&&e.removeItem(t)}}}setUserInputMessage(e){this.Ws.setUserInputText(e)}setUserInputPlaceholder(e){this.Ws.setUserInputPlaceholder(e)}getWebViewComponent(){return this.Fo}refreshWebView(e){this.Fo.setProps(e),this.Ro.remove(),this.Ro=this.Fo.render(),this.chatWidgetDiv.appendChild(this.Ro)}orientWidgetAnimation(){const e=this.element,t=Math.floor(window.innerWidth/2),s=e.offsetLeft;s<0?e.style.left="10px":s>window.innerWidth&&(e.style.right="10px"),s<t&&this.ri.addCSSClass(e,"pos-left")}updateFullScreenWidth(e){const t=this.ei.sidepanel?this.chatWidgetWrapper:this.chatWidgetDiv,s=this.ri;if(s.updateCSSVar("--width-full-screen",e),t){const i="default",o="medium",r="size",a=parseInt(e);if(a>=1024){if(this.so===x)return;const e=this.ei.icons;s.addCSSClass(t,`${x}-${r}`),s.addCSSClass(this.Ws.element,e.avatarBot||e.avatarAgent?"left":"",e.avatarUser?"right":""),s.removeCSSClass(t,`${o}-${r}`),this.so=x}else if(a>=600){if(this.so===o)return;s.addCSSClass(t,`${o}-${r}`),s.removeCSSClass(t,`${x}-${r}`),this.so=o}else{if(this.so===i)return;s.removeCSSClass(t,`${o}-${r}`),s.removeCSSClass(t,`${x}-${r}`),this.so=i}this.Ws.updateInputHeight(),this.skillMessages.filter((e=>e instanceof h.CardMessageComponent)).forEach((e=>{e.setCardsScrollAttributes(this.so)})),this.fi()}}setHeight(e){const t=this.chatWidgetDiv;t&&!this.ei.sidepanel&&(t.style.height=e,this.ei.height=e)}setWidth(e){const t=this.ei.sidepanel?this.chatWidgetWrapper:this.chatWidgetDiv;t&&(t.style.width=e,this.ei.width=e,this.updateFullScreenWidth(e))}setSize(e,t){this.setHeight(t),this.setWidth(e)}setMessagePadding(e){this.No("message-bubble",{padding:e}),this.ei.messagePadding=e}setChatBubbleIconHeight(e){this.No("typing-cue-wrapper",{height:e}),this.ei.height=e}setChatBubbleIconWidth(e){this.No("typing-cue-wrapper",{width:e}),this.ei.width=e}setChatBubbleIconSize(e,t){this.No("typing-cue-wrapper",{height:t,width:e}),this.ei.width=e,this.ei.height=t}applyDelegates(e){var t;let s;s="string"==typeof e?(0,o.buildUserTextMessage)(e,null===(t=this.speechFinalResult)||void 0===t?void 0:t.speechId):(0,o.isPostbackPayload)(e)?(0,o.buildPostbackMessage)(e):(0,o.isMessagePayload)(e)?(0,o.buildUserMessage)(e):e;const i=s.messagePayload.type,r=this.ei.delegate,n=r.beforePostbackSend,c=r.beforeSend;return i===o.MessageType.Postback&&(0,a.isFunction)(n)?s=this.Ho(s,n):O.includes(i)&&(0,a.isFunction)(c)&&(s=this.Ho(s,c)),s}sendMessage(e,s){if(this.Vo)return(0,t.rejectErrorTextStream)();this.ao(),!this.ei.enableSpeechAutoSend&&this.speechFinalResult&&"string"==typeof e&&e.toLowerCase().includes(this.speechFinalResult.text.toLowerCase())&&(e=(0,o.buildUserTextMessage)(e,this.speechFinalResult.speechId)),this.Ws.focusTextArea(),this.Ui(),void 0===(s=s||{}).delegate&&(s.delegate=!0),s.delegate&&this.ei.delegate&&(e=this.applyDelegates(e));const i=this.ei.sdkMetadata?Object.assign({version:n.SDK_VERSION},this.ei.sdkMetadata):{version:n.SDK_VERSION};return e&&this.Vi.sendMessage(e,{sdkMetadata:i}).then((t=>{var i;this.ys.debug("onMessageSent",e),(0,o.isEventPayload)(t.messagePayload)||(this.Di=t.requestId,null===(i=this.Ji)||void 0===i||i.call(this,t),this.Uo(),this.Ps=!1,this.eo&&this.Bo(),this.speechFinalResult=null,(null==s?void 0:s.hidden)?this.Lo=o.SenderType.User:this.Wo(t),this.getAgentDetails()||this.showTypingIndicator())}))}uploadFile(e,s){if(this.Vo)return(0,t.rejectErrorTextStream)();const i=this.ni;this.Ui(),this.Uo();const r=new Promise(((t,r)=>{var c;if(this.ei.enableHeadless){const s=this.ei.sdkMetadata?Object.assign({version:n.SDK_VERSION},this.ei.sdkMetadata):{version:n.SDK_VERSION};this.Vi.uploadAttachment(e,{sdkMetadata:s}).then((e=>this.Vi.sendMessage(this.ei.delegate?this.applyDelegates(e):e,{sdkMetadata:s}))).then(t).catch(r)}else{this.fi();const l=null===(c=e.name)||void 0===c?void 0:c.replace(/[\s:'"\\/[\]~,.;^`()@#%*+=$&!{}?<>|]/g,""),d=(0,a.generateID)({prefix:l}),p=this.ri.createDiv();if(p.id=d,this.Ms.push({divId:d,fileName:e.name}),this.qo(new Date),this.Go(p),this.Zo=this.customFileMaxSize?this.customFileMaxSize:s?s.maxSize:n.ATTACHMENT_MAX_SIZE,e.size>this.Zo){this.fi();const t=this.Zo/(n.BYTE_MULTIPLIER*n.BYTE_MULTIPLIER);let s=t.toString();(0,n.isInteger)(t)||(s=t.toFixed(3));const a=`${e.name} - ${i.uploadFailed}`,c=i.uploadFileSizeLimitExceeded.replace("{0}",s);this.Yo(a,c,d),this.po(o.SenderType.User),r(new Error(c))}else if(0===e.size){this.fi();const t=`${e.name} - ${i.uploadFailed}`,s=i.uploadFileSizeZeroByte;this.Yo(t,s,d),this.po(o.SenderType.User),r(new Error(s))}else{const s=new h.LoadingMessageComponent(e.name,h.MESSAGE_SIDE.RIGHT,this.ei,this.ri),i=this.ei.sdkMetadata?Object.assign({version:n.SDK_VERSION},this.ei.sdkMetadata):{version:n.SDK_VERSION};this.po(o.SenderType.User),p.appendChild(s.render()),this.fi(),this.Vi.uploadAttachment(e,{sdkMetadata:i}).then((e=>this.Vi.sendMessage(this.ei.delegate?this.applyDelegates(e):e,{sdkMetadata:i}))).then((s=>{var i;s.messagePayload.attachment.title=e.name,p.remove(),this.Ms=this.Ms.filter((e=>e.divId!==d)),this.Es=!1,null===(i=this.Ji)||void 0===i||i.call(this,s),this.Wo(s),t(s)})).catch((t=>{this.Zs(e.name,t.message,d),r(t)}))}}}));return r.catch((e=>{this.ys.error(e)})),r}refreshTTS(){this.qs.showTTSButton(!!this.ei.ttsService)}getSuggestions(e){if(this.Vo)return(0,t.rejectErrorTextStream)();if(!this.ei.enableAutocompleteClientCache||this.ei.enableAutocompleteClientCache&&!this.Ws.getSuggestionsValid())return this.Vi.getSuggestions(e).then((e=>(this.Ws.displaySuggestions(e),e))).catch((e=>(this.ys.debug("[getSuggestions] Failed to receive suggestions, reset list:",e),[])));const s=this.Jo(this.Ws.getSuggestions(),e);return null!==this.Ws&&this.Ws.displaySuggestions(s),Promise.resolve(s)}getUnreadMsgsCount(){return this.zs}getMessages(){const e=this._i.getItem(this.Oi);let t=[];if(e)try{t=JSON.parse(e).map((e=>Object.assign({},e)))}catch(e){this.ys.error("Failed to parse saved chat.")}return t}getAgentDetails(){return this.Ko}setAgentDetails(e){this.Ko=Object.assign(Object.assign({},this.Ko),e),this.Xo(),this._i.setItem(this.Qo,JSON.stringify(this.Ko))}setUserAvatar(e){this.ei.icons.avatarUser=e,this._i.setItem(this.er,e);document.querySelectorAll(`.${this.Ft}-right .${this.Ft}-message-icon`).forEach((t=>{t.parentElement.replaceWith(this.tr(e,this.ni.avatarUser))}))}sr(e){if(!(0,o.isDisplayableMessage)(e))return;const t=Object.assign({date:Date.now()},e);if(this.js.push(t),this.ei.storageType===l.StorageType.CUSTOM){const e=this.ei.conversationHistoryProvider;(0,a.isFunction)(null==e?void 0:e.saveMessage)?e.saveMessage(t):this.ys.warn("Can not save conversation history. Pass conversationHistoryProvider object with saveMessage function when custom storage is enabled.")}else if(this.yi){const e=this.getMessages();e.length>=this.ei.messageCacheSizeLimit&&e.splice(0,e.length-(this.ei.messageCacheSizeLimit-1)),e.push(t),this._i.setItem(this.Oi,JSON.stringify(e))}}configureStorage(){const e=this.ei,{storageType:t,userId:s}=e;this.yi&&(s?t!==l.StorageType.LOCAL&&t!==l.StorageType.SESSION&&(e.storageType=l.StorageType.LOCAL):e.storageType=l.StorageType.SESSION),this._i=new l.StorageService(e.storageType)}setVoiceRecognitionService(e){this.Ws.disableVoiceModeButton(!e,{src:"lang"})}enableSpeechSynthesisService(e){this.qs.disableTTSButton(!e)}onShareLocation(){this.pi()}setPrimaryChatLanguage(e){this.Ys.setTag(e)}onLanguageUpdate(e,t=!0){var s;const i=this.ei.i18n,o=Object.assign(Object.assign(Object.assign({},i.en),i[this.ei.locale]),i[e]);t&&this.Po({type:"actionLanguage",tag:e}),this.Xi=e,this.zo.title=o.chatButtonTitle||o.chatTitle,this.qs.setLocale(o),this.Ws.setLocale(o),this.ei.showTypingIndicator&&this.do.updateTypingCueLocale(o.typingIndicator);document.querySelectorAll(`.${this.Ft}-message-icon`).forEach((e=>{const t=e.parentElement.parentElement.className.includes(`${this.Ft}-left`)?o.avatarBot:o.avatarUser;"img"===e.localName?e.alt=t:e.setAttribute("aria-label",t)})),this.refreshWebView({accessibilityTitle:o.webViewAccessibilityTitle,closeButtonLabel:o.webViewClose,errorInfoDismissLabel:o.webViewErrorInfoDismiss,errorInfoText:o.webViewErrorInfoText}),this.Ys&&this.Ys.setLocale(o),this.ir&&(this.ir.textContent=(0,a.formatDate)(this.rr,{pattern:this.ei.timestampFormat,locale:e})),this.fo&&this.fo.setLocale(o),this.nr&&(this.nr.innerText=o.previousChats),null===(s=this.ro)||void 0===s||s.setLocale(o),this.ni=o}showTypingIndicator(){const e=document.getElementById(`${this.Ft}-connection-error`);e&&e.remove(),this.ei.showTypingIndicator&&(this.ei.searchBarMode?this.do.append(this.ko):(this.do.append(this.cr),this.fi()))}hideTypingIndicator(){this.ei.showTypingIndicator&&this.do.remove()}showConnectionError(){const e={messagePayload:{type:o.MessageType.Text,text:(0,a.safeHTML)(this.ni.connectionFailureMessage),globalActions:[{type:o.ActionType.Postback,label:this.ni.connectionRetryLabel}]},source:o.SkillMessageSource.Bot},t=l.MessageComponentFactory.fromMessage(this.ei,this.ri,e,Object.assign(Object.assign({},this.lr),{onMessageActionClicked:()=>{this.ze()},locale:this.Xi}));this.showMessage(`${this.Ft}-connection-error`,t)}showMessage(e,t){var s;if(this.ei.searchBarMode)this.Ti.showMessage(e,t);else{const s=this.ri.wrapMessageBlock(t.render(),this.ei.icons.avatarBot,h.MESSAGE_SIDE.LEFT);s.id=e,this.cr.appendChild(s)}(null===(s=this.do)||void 0===s?void 0:s.isVisible())&&this.hideTypingIndicator(),this.fi()}showWidget(){this.hr(!0)}hideWidget(){this.hr(!1)}hr(e){const t=this.ei;if(t.embedded||t.enableHeadless)return;const s=this.chatWidgetWrapper,i=`${this.ri.cssPrefix}-none`;s&&s.classList.contains(i)===e&&(s.classList.toggle(i),this.li.trigger(e?n.ChatEvent.WIDGET_SHOW:n.ChatEvent.WIDGET_HIDE))}dr(e){if(this.Es=!1,!this.Ps){const t={source:o.SkillMessageSource.Bot,messagePayload:{type:o.MessageType.Text,text:e},userId:this.ei.userId,msgId:`${Date.now()}`};this.sr(t),this.pr(e),this.ur([t])}}Bo(){const e=this.ni;this.gr=y((()=>{this.Es&&this.dr(e.defaultGreetingMessage),this.mr=window.setInterval((()=>{this.dr(e.defaultWaitMessage)}),this.ei.defaultWaitMessageInterval*n.SEC_MULTIPLIER),this.br=y((()=>{window.clearInterval(this.mr)}),(this.ei.typingIndicatorTimeout-1)*n.SEC_MULTIPLIER),this.gr=y((()=>{this.hideTypingIndicator(),this.dr(e.defaultSorryMessage)}),this.ei.typingIndicatorTimeout*n.SEC_MULTIPLIER)}),this.ei.defaultGreetingTimeout*n.SEC_MULTIPLIER)}ti(){return i(this,void 0,void 0,(function*(){if(this.ei.clientAuthEnabled)try{const e=yield this.Vi.getAuthToken();this.ei.channelId=e.getClaim("channelId"),this.ei.userId=e.getClaim("userId")}catch(e){return}const{name:e,userId:t}=this.ei,s=`${e}-${t}`;this.Oi=`${s}-messages`,this.Qo=`${s}-agent-details`,this.er=`${s}-user-avatar`}))}si(){this.vr=`${this.ei.userId}-canceled-requests`,this.Hi=new Set(this.wr()),this.io()}Oo(){const e=this.ei;this.Ys=new c.MultiLangChatComponent(e.multiLangChat,{webCore:this.Vi,chatWidget:this,eventDispatcher:this.li,settings:e,synthesisVoices:e.ttsVoice,storageService:new l.StorageService(e.storageType),util:this.ri},this),this.qs.addLanguageSelect(this.Ys)}pi(){const e=this.ni;if(navigator&&navigator.geolocation){const t=new h.LoadingMessageComponent(e.requestLocation,h.MESSAGE_SIDE.RIGHT,this.ei,this.ri);this.Go(t.render()),this.fi(),(0,o.getCurrentPosition)().then((e=>{const s=(0,o.buildUserMessage)({location:{latitude:e.latitude,longitude:e.longitude,title:void 0},type:o.MessageType.Location});t.remove(),this.sendMessage(s).catch(this.ji)}),(s=>{let i;switch(s.code){case s.PERMISSION_DENIED:i=e.requestLocationDeniedPermission;break;case s.POSITION_UNAVAILABLE:i=e.requestLocationDeniedUnavailable;break;case s.TIMEOUT:i=e.requestLocationDeniedTimeout;break;default:i=e.requestLocationDeniedPermission}this.ci(i,n.iconWarn),t.remove()}))}else this.ci(e.requestLocationDeniedUnavailable,n.iconWarn)}Jo(e,t){const s=[];for(const i of e)i.search(new RegExp(t,"i"))>=0&&s.push(i);return s}Zs(e,t,s){const i=this.ni,r=`${e} - ${i.uploadFailed}`;let a="";switch(t){case o.CoreError.UploadMaxSize:a=i.uploadFileSizeLimitExceeded.replace("{0}",this.Zo.toString());break;case o.CoreError.UploadZeroSize:a=i.uploadFileSizeZeroByte;break;case o.CoreError.UploadBadFile:a=i.uploadUnsupportedFileType;break;case o.CoreError.UploadNetworkFail:a=i.uploadFileNetworkFailure;break;case o.CoreError.UploadUnauthorized:a=i.uploadUnauthorized}this.Yo(r,a,s)}Ho(e,t){var s;const i=(0,a.clone)(e);let r,n=(0,a.clone)(e);e.messagePayload.type===o.MessageType.Text&&(null===(s=e.sdkMetadata)||void 0===s?void 0:s.speechId)&&(r=(e.messagePayload.text||"").toLowerCase());try{n=t(i)}catch(e){this.ys.error(e)}if((null==n?void 0:n.messagePayload)||(n=null),n&&!(0,o.isValidMessage)(n)&&(this.ys.error("The generated delegate message is invalid. Sending original message instead."),n=e),r&&n)if(n.messagePayload)if(n.messagePayload.type===o.MessageType.Text){const e=n.messagePayload.text;(null==e?void 0:e.toLowerCase().indexOf(r))<0&&delete n.sdkMetadata}else delete n.sdkMetadata;else delete n.sdkMetadata;return n}Yo(e,t,s){const i=document.getElementById(s);if(i){i.firstElementChild&&i.removeChild(i.firstElementChild),this.Ms=this.Ms.filter((e=>e.divId!==s));const o=new h.MessageStringComponent(e,t,h.MESSAGE_SIDE.RIGHT,this.ei,this.ri,!0),r=this.ei.icons.error||n.iconError;i.appendChild(o.render(r))}}addHeaderAction(e){this.qs.addAction(e)}updateHeaderAction(e){this.qs.kr(e)}on(e,t){switch(e){case o.SpeechSynthesisServiceEvent.TTSStart:case o.SpeechSynthesisServiceEvent.TTSStop:this.Vi.on(e,t);break;default:this.li.bind(e,t)}}off(e,t){switch(e){case o.SpeechSynthesisServiceEvent.TTSStart:case o.SpeechSynthesisServiceEvent.TTSStop:this.Vi.off(e,t);break;default:this.li.unbind(e,t)}}yo(){var e,t,s,i,o,r;const a=this.ei,l=this.ri,h=this.ni,p=l.createDiv(a.embedded?[]:["wrapper",a.theme,a.enableHeadless?"none":""]);this.chatWidgetDiv=l.createDiv(["widget","flex","col"]),this.chatWidgetDiv.setAttribute("role","region"),this.chatWidgetDiv.setAttribute("aria-labelledby",`${this.Ft}-title`),this.ri.setChatWidgetWrapper(p);const u=this.qs.render();this.chatWidgetDiv.appendChild(this.qs.element),a.embedTopStickyId&&this.yr(a.embedTopStickyId,this.chatWidgetDiv,["embed-sticky-top"]),this._r=new c.WidgetMainComponent(l),!a.enableCancelResponse||a.enableHeadless||a.searchBarMode||(this.ro=new g.CancelResponseComponent({parent:this._r.element,i18n:this.ni,domUtil:this.ri,onHide:this.Ri,onClick:this.Ni})),this.Or=l.createDiv(["conversation-pane",a.icons.avatarBot?"bot-icon":"",a.icons.avatarUser?"user-icon":""]),"bottom"===a.conversationBeginPosition&&(this.Or.style.marginTop="auto"),a.embedTopScrollId&&this.yr(a.embedTopScrollId,this.Or,["embed-scroll-top"]),this.cr=l.createDiv(["conversation-container"]),this.cr.setAttribute("role","log"),this.cr.setAttribute("aria-live","polite"),this.cr.setAttribute("aria-atomic","false"),this.Or.appendChild(this.cr),this._r.element.appendChild(this.Or),a.embedBottomScrollId&&this.yr(a.embedBottomScrollId,this._r.element,["embed-scroll-bottom"]),this.chatWidgetDiv.appendChild(this._r.element),a.embedBottomStickyId&&this.yr(a.embedBottomStickyId,this.chatWidgetDiv,["embed-sticky-bottom"]),this.Ws.render(),this.chatWidgetDiv.appendChild(this.Ws.element),(t=a.webViewConfig).accessibilityTitle||(t.accessibilityTitle=h.webViewAccessibilityTitle),(s=a.webViewConfig).closeButtonLabel||(s.closeButtonLabel=h.webViewClose),(i=a.webViewConfig).errorInfoDismissLabel||(i.errorInfoDismissLabel=h.webViewErrorInfoDismiss),(o=a.webViewConfig).errorInfoText||(o.errorInfoText=h.webViewErrorInfoText),(r=a.webViewConfig).closeButtonIcon||(r.closeButtonIcon=a.icons.close),this.Fo=new d.WebViewComponent(a.webViewConfig,l,a),this.Ro=this.Fo.render(),this.chatWidgetDiv.appendChild(this.Ro);const m=this.Fo,f=`${this.Ft}-webview`;if(this.zi={target:f,onclick:function(){m.open(this.href)}},a.linkHandler&&a.linkHandler.target===f&&(a.linkHandler=this.zi),this.lr={webviewLinkHandler:this.zi,webCore:this.Vi,onMessageActionClicked:this.Ci},p.appendChild(this.chatWidgetDiv),a.embedded)this.isOpen=!0,l.addCSSClass(p,"open");else{const t=a.icons.launch||(a.colors&&a.colors.branding?n.iconLaunchButton.replace("#025e7e",a.colors.branding):n.iconLaunchButton),s="button",i=l.createIconButton({css:[s],icon:t,iconCss:[`${s}-icon`],title:h.chatButtonTitle||h.chatTitle});i.classList.remove(`${this.Ft}-icon`),this.zo=i,this.zo.onclick=null===(e=this.qi)||void 0===e?void 0:e.bind(this),this.Co=l.createTextDiv(["notification-badge"]),p.appendChild(i),this.Ds.set("launch",i),a.enableDraggableButton&&new n.DragAndDrop(this.ri,i).makeElementDraggable(),a.enableDraggableWidget&&new n.DragAndDrop(this.ri,u,this.chatWidgetDiv).makeElementDraggable(),a.openChatOnLoad||l.addCSSClass(p,v),l.addCSSClass(this.chatWidgetDiv,k)}if(this.chatWidgetWrapper=p,a.sidepanel){const e=e=>{const t=document.body.clientWidth-e.x;if(l.addCSSClass(this.chatWidgetWrapper,"drag"),document.body.style.cursor=t<=375?"w-resize":t>=800?"e-resize":"col-resize",t>=375&&t<=800){const e=`${t}px`;this.chatWidgetWrapper.style.width=e,this.updateFullScreenWidth(e)}e.preventDefault()};p.addEventListener("mousedown",(t=>{t.offsetX<4&&document.addEventListener("mousemove",e,!1)}),!1),document.addEventListener("mouseup",(()=>{document.removeEventListener("mousemove",e,!1),l.removeCSSClass(this.chatWidgetWrapper,"drag"),this.chatWidgetWrapper.style.removeProperty("cursor"),document.body.style.removeProperty("cursor")}),!1)}else if(this.Qi){new n.Resize(this.chatWidgetDiv,this.updateFullScreenWidth.bind(this),l).makeWidgetResizable()}if(this.ei.enableSpeech){let e=this.Ws.getInputMode(),t=!1;this.Ao=()=>{e=this.Ws.getInputMode(),this.isOpen&&(document.hidden&&e===b.INPUT_MODE.VOICE?(t=!0,this.$o()):!document.hidden&&t&&(this.ho(),t=!1))},window.addEventListener("visibilitychange",this.Ao)}return this.chatWidgetWrapper}xo(){const e=this.ei;if(!e.disableInlineCSS){let e=!1;const t=document.head.children,s=document.createElement("style");s.appendChild(document.createTextNode(r.redwoodStyles.replace(/(\.)([a-zA-Z_-]+)(?=[^}]+{)/gi,`$1${this.Ft}-$2`)));for(let i=0;i<t.length;i++){const o=t.item(i);if("style"===o.nodeName.toLowerCase()){document.head.insertBefore(s,o),e=!0;break}}e||document.head.appendChild(s),this.styleSheet=s}(0,n.configureColorCustomization)(e.colors,this.ri)}_o(){var e;const t=this.ei,s=this.ri;if(t.embedded)try{const e=document.getElementById(t.targetElement);this.embedInElement(t.targetElement),this.updateFullScreenWidth(`${e.clientWidth}px`),window.addEventListener("resize",(0,n.debounce)((()=>{this.updateFullScreenWidth(`${e.clientWidth}px`)}),500))}catch(e){this.ys.error("Target Element not specified",e)}else if(t.sidepanel)try{const e=document.getElementById(t.targetElement),i=e.parentNode,o=s.createDiv(["sidepanel-content-wrapper"]);i.replaceChild(o,e),s.addCSSClass(this.chatWidgetDiv,"sidepanel"),o.appendChild(e),o.appendChild(this.chatWidgetWrapper)}catch(e){this.ys.error("Target Element not specified",e)}else{try{this.appendToElement(document.body)}catch(e){return void this.ys.error("Initialisation failed as page is not completely loaded. Make sure to initialise the SDK after document.body is available.")}y((()=>{this.orientWidgetAnimation()}),0),window.addEventListener("resize",(0,n.debounce)((()=>{this.orientWidgetAnimation()}),500));const s=t.width,i=t.height;s&&this.setWidth(s),i&&this.setHeight(i),t.openChatOnLoad&&y(null===(e=this.qi)||void 0===e?void 0:e.bind(this),0)}}Go(e){var t;this.ei.searchBarMode?this.Ti.appendMessageToConversation(e):this.cr.appendChild(e),(null===(t=this.do)||void 0===t?void 0:t.isVisible())&&(this.hideTypingIndicator(),this.showTypingIndicator())}fi(){const e=this._r.element;y((()=>{e&&(e.scrollTop=e.scrollHeight)}),n.Constants.CHAT_SCROLL_DELAY)}ur(e,t=!0){if(!(null==e?void 0:e.length))return Promise.resolve();const s=e.filter((e=>(0,o.isDisplayableMessage)(e))),i=this.ei.threadId,r=s.filter((e=>!e.threadId||!i||e.threadId===i));return r.length?new Promise((e=>{const s={isFresh:t};this.ei.clientAuthEnabled&&this.ei.enableAttachmentSecurity?this.Vi.getAuthToken().then((t=>{s.authToken=t.token,this.jr(r,s),e(),this.fi()})).catch((()=>{this.jr(r,s),e(),this.fi()})):(this.jr(r,s),e(),this.fi())})):Promise.resolve()}Mr(e,t){var s,i,r,a;let n;if((0,l.isBotMessage)(e)){let c="";if(e.source===o.SkillMessageSource.Agent){const i=this.ei.icons;(null===(s=e.messagePayload.channelExtensions)||void 0===s?void 0:s.agentSession)||(e.messagePayload.channelExtensions?e.messagePayload.channelExtensions.agentSession=this.Ko:e.messagePayload.channelExtensions={agentSession:this.Ko}),!this.Ko.avatarImage&&i.avatarBot&&t.appendChild(this.zr()),c=this.Ko.name}else if(e.source===o.SkillMessageSource.Bot&&(null===(i=e.messagePayload.channelExtensions)||void 0===i?void 0:i.agentSession)){c=(null===(r=e.messagePayload.channelExtensions)||void 0===r?void 0:r.agentSession).name}c&&(n=this.ri.createTextDiv(["agent-name"]),n.title=c,n.innerHTML=c,n.setAttribute("aria-hidden","true"),(null===(a=this.Ko)||void 0===a?void 0:a.nameTextColor)&&(n.style.color=this.Ko.nameTextColor))}return n}zr(){const e=this.Ko||{},t=e.name.split(" ").filter((e=>e));let s=t[0][0];return t.length>1&&(s+=t[t.length-1][0]),this.tr(s.toUpperCase(),e.name,!0)}Xo(){if(this.ei.showTypingIndicator){const e=this.Ko||{},t=this.ei.icons,s=this.ni;t.avatarBot&&(!e.avatarImage&&e.name?this.do.updateTypingCueIcon(this.zr()):this.do.updateTypingCueIcon(this.tr(e.avatarImage||t.avatarBot,s.avatarAgent||s.avatarBot)))}}tr(e,t,s=!1){const i=this.ri,o=i.createDiv(["icon-wrapper",s?"agent-avatar":""]),r=this.Ko||{};let a;return s?(a=i.createTextDiv(["agent-icon"]),a.innerText=e,this.so===x&&i.addCSSClass(this.Ws.element,"left"),r.avatarTextColor&&(a.style.color=r.avatarTextColor),r.avatarBackgroundColor&&(o.style.background=r.avatarBackgroundColor)):a=i.createImageIcon({icon:e,iconCss:["message-icon"]}),o.appendChild(a),o.setAttribute("aria-label",t),o}$r(e){const t=e?new Date(e):new Date,s=(0,a.formatDate)(t,{pattern:this.ei.timestampFormat,locale:this.Xi}),i=this.ri.createTextDiv(["message-date"]);return i.setAttribute("aria-live","off"),i.setAttribute("aria-hidden","true"),i.innerText=`${s}`,i}jr(e,t){var s;const{isFresh:i,authToken:r}=t,c=this.ei,d=this.ri,p=Object.assign(Object.assign({},this.lr),{locale:this.Xi,isFresh:i});(null==r?void 0:r.length)&&(p.authToken=r,p.uri=c.URI);const u=(0,a.isFunction)(null===(s=c.delegate)||void 0===s?void 0:s.onMessage)&&c.delegate.onMessage;e.forEach((e=>{var t,s,i,r,a,g,m,b;const f=(0,l.isBotMessage)(e);if(f){const t=(0,l.getMessageDigest)(e);if(this.Ls.includes(t))return;this.Ls.push(t)}const v=l.MessageComponentFactory.fromMessage(c,d,e,p);if(!v)return;if(u)return void u(v.render(),!f);if(v instanceof h.TextStreamMessageComponent){this.Cr=e;const t=e.messagePayload;switch(t.streamState){case"start":this.Ws.disable(),this.Vo=v,this.Sr();break;case"running":if(this.Vo)return this.Vo.update(t),void this.Sr();this.Ws.disable(),this.Vo=v;break;case"end":if(clearTimeout(this.Ir),this.Ws.disable(!1),this.Vo)return this.Vo.update(t),this.Vo=null,void(this.Cr=null)}}else this.Vo&&this.Ws.disable(!1),this.Vo=null,this.Cr=null,clearTimeout(this.Ir);const w=f?o.SenderType.Skill:o.SenderType.User,x=this.Tr(e.messagePayload,w),k=this.Ar(e.messagePayload);if((x||k)&&this.Er(),k){const r=this.skillMessages.at(-1);if(r)return this.$s.push(r),r.append(v),this.wi([r]),v.msgId=e.msgId,this.Lo=w,this.Js=Date.now(),this.Fs=0!==(null===(t=e.messagePayload.globalActions)||void 0===t?void 0:t.length),this.Pr=(null===(i=null===(s=e.messagePayload.channelExtensions)||void 0===s?void 0:s.agentSession)||void 0===i?void 0:i.name)||"",this.Lr=e.source,this.vo(v),void this.po(o.SenderType.Skill)}const y=x||this.Fr(e,w);let _;if(v.msgId=e.msgId,this.Lo=w,this.Js=Date.now(),this.Fs=e.messagePayload.globalActions&&0!==e.messagePayload.globalActions.length,this.Pr=(null===(a=null===(r=e.messagePayload.channelExtensions)||void 0===r?void 0:r.agentSession)||void 0===a?void 0:a.name)||"",f&&(this.Lr=e.source),y||(_=d.createDiv(["message-block","flex"]),this.Rr=_),(0,n.isFeedbackComponent)(v)&&(this.Dr=v),f)this.Cs&&this.Nr(v),this.skillMessages.push(v),e.source===o.SkillMessageSource.Agent?((null===(g=e.messagePayload.channelExtensions)||void 0===g?void 0:g.agentName)&&this.setAgentDetails({name:e.messagePayload.channelExtensions.agentName,avatarImage:c.icons.avatarAgent,nameTextColor:null,avatarTextColor:null,avatarBackgroundColor:null}),(null===(m=e.messagePayload.channelExtensions)||void 0===m?void 0:m.agentSession)&&this.setAgentDetails(e.messagePayload.channelExtensions.agentSession)):(this._i.removeItem(this.Qo),this.Ko=null),this.vo(v);else if(this.Dr){const t=e;if(t.messagePayload.type===o.MessageType.Text||t.messagePayload.type===o.MessageType.Postback){const e=t.messagePayload;this.Dr.highlightRating(e.text)}this.Dr=null}if(c.searchBarMode)return void this.Ti.renderMessage(e,v,x);const O=c.useCreatedOnTimestamp&&e.createdOn?new Date(e.createdOn):e.date?new Date(e.date):new Date;this.qo(O),_&&(this.Hr(e,_),this.Go(_));const j=this.Rr.querySelector('[class*="message-list"]'),M=this.Vr(e,v,j);if(M){if(e.messagePayload.type===o.MessageType.Card){const e=j.querySelectorAll('[class*="message-bubble"]');if(e.length){e[e.length-1].classList.add(`${this.Ft}-before-card`)}}x&&j.lastElementChild?(this.Ui(),this.isOpen||this.updateNotificationBadge(--this.zs),null===(b=j.lastElementChild)||void 0===b||b.replaceWith(M),this.$s.push(v)):j.appendChild(M),v instanceof h.CardMessageComponent&&v.setCardsScrollAttributes(this.so)}this.po(w)}))}Sr(){clearTimeout(this.Ir),this.Ir=y((()=>{this.Ws.disable(!1),this.Vo&&this.Vo.update(Object.assign(Object.assign({},this.Cr.messagePayload),{streamState:"end"})),this.Vo=null,this.Cr=null,this.hideTypingIndicator()}),this.Rs)}Ar(e){var t;const s=null===(t=e.channelExtensions)||void 0===t?void 0:t.appendMessage;return"True"===s||s}Tr(e,t){var s;if(t===o.SenderType.Skill){const t=null===(s=e.channelExtensions)||void 0===s?void 0:s.replaceMessage;return!0===t||t&&"true"===(null==t?void 0:t.toLowerCase())}return!1}Fr(e,t){var s,i;if(!(Date.now()-this.Js<n.MESSAGE_BLOCK_THRESOLD))return!1;if((0,l.isBotMessage)(e)&&e.source===o.SkillMessageSource.Agent&&(null===(s=e.messagePayload.channelExtensions)||void 0===s?void 0:s.agentSession)){const t=null===(i=e.messagePayload.channelExtensions)||void 0===i?void 0:i.agentSession;return this.Pr===t.name}return!(this.Lo!==t||(0,l.isBotMessage)(e)&&e.source!==this.Lr||this.Fs)}Er(){var e;if(!(null===(e=this.cr)||void 0===e?void 0:e.lastElementChild))return;const{name:t}=this.ei,s=`${t}-message-block`,i=`${t}-left`;let o=this.cr.lastElementChild;for(o&&(o=o.previousElementSibling);o;){const e=o.previousElementSibling;if(o.classList.contains(s)){if(o.classList.contains(i)){this.Rr=o;break}o.remove()}o=e}}Hr(e,t){const s=this.ei.icons,i=this.ni,r=this.ri,a=this.Ko||{};let n,c,h;if((0,l.isBotMessage)(e)){if(n=this.Mr(e,t),e.source===o.SkillMessageSource.Agent?(c=s.avatarBot&&(a.avatarImage||!a.name)&&(a.avatarImage||s.avatarAgent||s.avatarBot),h=i.agentMessage.replace("{0}",`${a.name||i.agent}`)):(this.Lr===o.SkillMessageSource.Agent&&this.ei.showTypingIndicator&&this.do.resetTypingCueIcon(),c=s.avatarBot,h=i.skillMessage),r.addCSSClass(t,"left"),c){this.so===x&&r.addCSSClass(this.Ws.element,"left");const s=this.tr(c,e.source===o.SkillMessageSource.Agent&&i.avatarAgent||i.avatarBot);s.style.marginTop=n&&"16px",t.appendChild(s)}}else r.addCSSClass(t,"right"),h=i.userMessage,s.avatarUser&&(this.so===x&&r.addCSSClass(this.Ws.element,"right"),t.appendChild(this.tr(s.avatarUser,i.avatarUser)));const d=r.createDiv(["messages-wrapper","flex","col"]);n&&d.appendChild(n);const p=this.ri.createTextSpan(["screen-reader-only"]);p.innerText=h,d.appendChild(p);const u=r.createDiv(["message-list","flex","col"]);if(d.appendChild(u),"absolute"===this.ei.timestampMode){const t=this.ei.useCreatedOnTimestamp&&e.createdOn?new Date(e.createdOn).getTime():e.date,s=this.$r(t);d.appendChild(s)}t.appendChild(d)}Vr(e,t,s){const i=this.ei.delegate;if(i&&i.render){const t=this.ri.createDiv(["message"]);t.id=e.msgId,t.lang=this.Xi,s.appendChild(t);if(i.render(e))return null;t.remove()}return t.render()}qo(e){"none"!==this.ei.timestampHeaderMode&&((0,a.isSameDay)(this.rr,e)||(this.rr=new Date(e),this.Go(this.Ur(this.rr))))}Ur(e,t=!0){const s=this.ri,i=s.createDiv(["timestamp-container"]),o=s.createTextDiv(["timestamp-header"]),r={pattern:this.ei.timestampHeaderFormat,locale:this.Xi};if(o.textContent="relative"===this.ei.timestampHeaderMode?(0,a.formatDateRelative)(e,r):(0,a.formatDate)(e,r),this.ir=o,i.append(o),t){const e=s.createElement("hr",["conversation-separator"],!1);i.append(e)}return i}po(e){this.Br||(this.Br=this.fo.render()),this.Br.remove(),this.fo.refresh(e),this.Go(this.Br)}vo(e){e.hasActions()&&y((()=>{e.focusFirstAction()}),290)}yr(e,t,s){const i=document.querySelector(`#${e}`);if(i){const e=this.ri.createDiv(s);e.appendChild(i),t.appendChild(e)}else this.ys.error(`Could not find element with ID '${e}'. No element embedded to the chat conversation pane.`)}Si(e){this.Ui(),this.li.trigger(n.ChatEvent.CLICK_VOICE_TOGGLE,e),this.Wr(e)}$o(){this.Wr(!1)}ho(){this.Wr(!0)}Wr(e){const t=this.ni;this.ei.enableSpeech&&(e?(this.qr(),this.ei.speechLocale&&!(0,o.isValidLocale)(this.ei.speechLocale)?this.ci(t.errorSpeechUnsupportedLocale,n.iconWarn):this.Vi.startRecognition().catch(this.Ei)):(this.Vi.stopRecognition(),this.Ws.setVoiceRecording(!1)))}Li(e){if(e)switch(e.type){case"partial":let t=e.text;t.length>0&&(this.speechFinalResult&&(t=`${this.speechFinalResult.text} ${t}`),this.Ws.setUserInputText(t));break;case"final":let s=e.text;s.length>0?(this.speechFinalResult&&(s=`${this.speechFinalResult.text} ${s}`),this.Ws.setUserInputText(s),this.ei.enableSpeechAutoSend?y((()=>{const t=(0,o.buildUserTextMessage)(s,e.requestId);this.sendMessage(t).then((()=>{var e;this.Ws.setUserInputText(""),null===(e=this.Ti)||void 0===e||e.openPopup()})).catch(this.ji)}),200):this.speechFinalResult={speechId:e.requestId,text:s}):this.speechFinalResult&&this.Ws.setUserInputText(this.speechFinalResult.text);break;case"error":this.Ei(new Error(e.text))}}bi(e){switch(this.ei.disablePastActions){case"all":e.forEach((e=>{e.disableActions()}));break;case"postback":e.forEach((e=>{e.disablePostbacks()}))}}wi(e){switch(this.ei.disablePastActions){case"all":e.forEach((e=>{e.enableActions()}));break;case"postback":e.forEach((e=>{e.enablePostbacks()}))}}Gr(){this.bi(this.skillMessages)}Nr(e){"none"!==this.ei.disablePastActions&&this.$s.push(e)}Uo(){var e;this.bi(this.$s),this.$s=[],null===(e=this.ro)||void 0===e||e.show()}Ks(){("none"===this.ei.disablePastActions?this.skillMessages:this.$s).forEach((e=>{e.enablePostbacks()}))}Gs(){("none"===this.ei.disablePastActions?this.skillMessages:this.$s).forEach((e=>{e.disablePostbacks()}))}Eo(e=!1){var t;const s=this.ei.searchBarMode?this.ko:this.cr;let i=!1;for((null===(t=this.do)||void 0===t?void 0:t.isVisible())&&(i=!0,this.hideTypingIndicator());s.firstChild;)s.removeChild(s.lastChild);i&&this.showTypingIndicator(),this.Es=!0,this.rr=null,this.Ui(),e?this.As=!0:this.li.trigger(n.ChatEvent.CLICK_ERASE)}io(){const{userId:e,channelId:t}=this.ei;f&&(this.Bs(),this.Zr=new f(`${e}-${t}`),this.Zr.onmessage=this.Yr.bind(this))}Bs(){this.Zr&&(this.Zr.close(),this.Zr=null)}Jr(e){if(this.Zr){const t={type:"message",message:e};if((0,l.isBotMessage)(e)){const s=(0,l.getMessageDigest)(e);if(this.Ls.includes(s))return;t.digest=s}this.Zr.postMessage(t)}}Po(e){this.Zr&&this.Zr.postMessage(e)}Yr(e){var t,s,i,r;const a=e.data;switch(a.type){case"message":const e=a.message.messagePayload;if(e.type===o.MessageType.Status){const t=e;return void("RESPONDING"===t.status?this.showTypingIndicator():"LISTENING"===t.status&&this.hideTypingIndicator())}if(e.type===o.MessageType.SessionClosed)return void(null===(t=this.Zi)||void 0===t||t.call(this));if(a.digest){if(this.Ls.includes(a.digest))return;null===(s=this.Yi)||void 0===s||s.call(this,a.message)}else null===(i=this.Ji)||void 0===i||i.call(this,a.message),this.Uo(),this.showTypingIndicator();this.hideTypingIndicator(),this.ur([a.message]);break;case"actionClearHistory":this.Eo();break;case"actionLanguage":null===(r=this.Ys)||void 0===r||r.setTag(a.tag,!1)}}uo(){if(this.ei.wcfsEnableEndConversationButtonToClose&&this.Vi.getState()===o.ConnectionState.Closed)this.Zi();else{const e=this.ni;this.qr();const t=new p.AlertDialog({title:e.endConversationConfirmMessage||"",description:e.endConversationDescription||"",parent:this.chatWidgetDiv,domUtil:this.ri,actions:[{label:e.noText,handler:this.qr.bind(this)},{label:e.yesText,handler:this.Kr.bind(this),type:"filled"}]});t.open(),this.Xr=t}}Kr(){this.sendExitEvent(),this.qr()}ci(e,t,s=1e4){this.qr();const i=new p.AlertDialog({title:e,icon:t,parent:this.ei.searchBarMode?this.ko:this.chatWidgetDiv,domUtil:this.ri,fallbackFocus:()=>{this.Ws.focusTextArea()},showDismiss:!0,autoDismiss:!0,autoDismissTimeout:s,dismissLabel:this.ni.webViewErrorInfoDismiss,modeless:!0});i.open(),this.Xr=i}qr(){this.Xr&&(this.Xr.close(),this.Xr=void 0)}ao(e=!0){window.clearTimeout(this.gr),window.clearInterval(this.mr),window.clearTimeout(this.br),this.ei.showTypingIndicator&&(e?(this.hideTypingIndicator(),this.do.setAutoTimeout(!0),this.Ss&&this.ei.enableVoiceOnlyMode&&this.ho()):(this.do.setAutoTimeout(!1),this.showTypingIndicator()))}co(e){var t,s;const i=this.ei.delegate;if(this.ys.debug("onMessageReceived",e),this.fi(),this.Ps=!0,this.Es=!1,this.ei.enableDefaultClientResponse&&(e.source===o.SkillMessageSource.Agent?this.eo=!1:this.eo||(this.eo=!0)),e){if(i&&i.beforeDisplay&&(0,a.isFunction)(i.beforeDisplay)&&(0,o.isDelegatableMessage)(e)){let t=(0,a.clone)(e);try{t=i.beforeDisplay(t)}catch(e){this.ys.error(e)}if(!t)return;(0,o.isValidMessage)(t)?e=t:this.ys.error("The generated delegate message is invalid. Displaying original message instead.")}switch(null===(t=this.Yi)||void 0===t||t.call(this,e),this.Jr(e),e.messagePayload.type){case o.MessageType.Status:{const t=e.messagePayload;"RESPONDING"===t.status?this.showTypingIndicator():"LISTENING"===t.status&&this.hideTypingIndicator();break}case o.MessageType.SessionClosed:null===(s=this.Zi)||void 0===s||s.call(this);break;case o.MessageType.TextStream:this.ur([e]);switch(e.messagePayload.streamState){case"start":this.isOpen||this.updateNotificationBadge(++this.zs);break;case"end":this.pr(e),this.sr(e)}break;default:this.ur([e]),this.pr(e),this.sr(e),this.isOpen||this.updateNotificationBadge(++this.zs)}this.ao(Boolean(e.endOfTurn))}}Wo(e){this.sr(e),this.fi(),e&&(this.Jr(e),e.messagePayload&&!_.includes(e.messagePayload.type)&&(this.isOpen||this.updateNotificationBadge(++this.zs),this.ur([e])))}So(e){e||this.Ui(),this.Ss=!e}no(e){const t=this.js.filter((t=>t.threadId===e));return this.ht=e,this.Vi.setCurrentThreadId(e),this.clearConversationHistory(!0),this.Qr(t,!1)}wo(){this.ti().then((()=>{const e=this._i.getItem(this.er);e&&(this.ei.icons.avatarUser=e);const t=this._i.getItem(this.Qo);t&&(this.Ko=JSON.parse(t),this.Xo())}))}ea(e){const t=this.ei.threadId;this.js=e.filter((e=>(0,o.isDisplayableMessage)(e)));const s=this.js,i=t?s.filter((e=>e.threadId===t)):s;this.Qr(i)}Mo(){const e=this.ei;if(e.storageType===l.StorageType.CUSTOM){const t=e.conversationHistoryProvider;(0,a.isFunction)(null==t?void 0:t.getMessages)?t.getMessages({threadId:e.threadId}).then((e=>this.ea(e.messages))).catch((e=>this.ys.error("Failed to fetch conversation history with provider.",e))):this.ys.warn("Can not load conversation history. Pass conversationHistoryProvider object with getMessages function when custom storage is enabled.")}else e.enableLocalConversationHistory&&(this.ei.clientAuthEnabled&&!this.Oi?this.ti().then((()=>{this.ea(this.getMessages())})):this.ea(this.getMessages()))}Qr(e,t=!0){return e.length?(this.Cs=!1,this.ur(e.slice(),!1).then((()=>{this.Cs=!0,t||this.Lo!==o.SenderType.Skill?this.Gr():this.bi(this.skillMessages.slice(0,this.skillMessages.length-1)),this.ei.searchBarMode||!t&&!this.As||(this.fo&&(this.fo.setRelativeTime(new Date(e[e.length-1].date)),this.Br=this.fo.render(),this.Go(this.Br)),this.ei.showPrevConvStatus&&(this.nr=this.ri.createTextDiv(["hr","flex"]),this.nr.innerText=this.ni.previousChats,this.Go(this.nr)),this.As&&(this.As=!1))}))):Promise.resolve()}ii(){var e;if(this.Vi.isConnected()&&this.Ts&&(this.Ys&&(this.Ys.disableComponent(!1),this.Ys.initLanguage()),!this.Is)){const t=this.ei.initUserProfile;if(t){const e=this.ei.sdkMetadata?Object.assign({version:n.SDK_VERSION},this.ei.sdkMetadata):{version:n.SDK_VERSION};this.Vi.updateUser(t,{sdkMetadata:e}).then((()=>{this.Is=!0})).catch((e=>{this.ys.error("[sendInitMessages] Failed to update user profile:",e)}))}if(this.ei.initUserHiddenMessage){const e=this.ei.initUserHiddenMessage;this.sendMessage(e,{hidden:!0,delegate:!1}).then((()=>{this.Is=!0})).catch(this.ji)}if(null===(e=this.ei.deviceToken)||void 0===e?void 0:e.length){const e=(0,a.getDeviceType)();this.Vi.sendDeviceToken(this.ei.deviceToken,this.ei.deviceType||e).then((()=>{this.Is=!0})).catch((e=>{this.ys.error("[sendInitMessages] Failed to send device token:",e)}))}}}pr(e){this.Ss||this.Vi.speakTTS(e,this.ni)}Ui(){this.Vi.cancelTTS()}bo(e,t){this.getAgentDetails()&&this.Vi.sendUserTypingStatus(e,t).catch((e=>{this.ys.error("[sendUserTypingStatusMessage] Failed to send user typing status:",e)}))}jo(e){if(e.hotkeys){const t=new l.HotkeysManager(e);t.setWidget(this.chatWidgetDiv);const s=e.hotkeys;Object.keys(s).forEach((e=>{const i=this.Ds.get(e);i&&t.add(s[e],i,"launch"!==e)})),this.To=t}}No(e,t){const s=document.getElementsByClassName(`${this.Ft}-${e}`);for(const e of Array.from(s))for(const[s,i]of Object.entries(t))e.style[s]=i}Bi(){try{sessionStorage.setItem(this.vr,Array.from(this.Hi).toString())}catch(e){this.ys.warn("Failed to save canceled requests in session",e)}}wr(){try{const e=sessionStorage.getItem(this.vr);return e?e.split(","):[]}catch(e){return this.ys.warn("Failed to save canceled requests in session",e),[]}}Wi(){const e=(0,a.clone)(this.Cr);e&&(0,l.isBotMessage)(e)&&(e.messagePayload.text=this.Vo.freeze(),e.messagePayload.streamState="end",e.endOfTurn=!0,this.co(e))}mo(e,t){this.Ds.set(e,t)}}t.WidgetComponent=j;t.rejectErrorTextStream=()=>Promise.reject(Error("TextStreamProgress"))},623:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.ContextualWidgetComponent=void 0;const i=s(6246),o=s(8098),r=s(2366),a=s(4557),n=s(9780),c=s(5915),l=s(28),h="none",d="full-size";class p extends a.Component{constructor(e,t,s,a,c,l,h,d,p){super(),this.ei=e,this.Yt=t,this.ta=s,this.sa=a,this.ia=c,this.oa=l,this.Vi=h,this.ra=d,this.li=p,this.ys=new n.Logger("ContextualWidgetComponent"),this.aa=!1,this.na=e=>{switch(e.type){case i.ActionType.Postback:e.getPayload().then((t=>{(null==t?void 0:t.generate)?this.ca(Object.assign(Object.assign({},(0,o.getFieldInputValues)(t.fieldInputParameters)),t.additionalInputParameters)):(null==t?void 0:t.showMore)?this.showFullSizeWidget():this.sendMessage((0,i.buildPostbackMessage)({postback:t,text:e.label,type:i.MessageType.Postback}))}));break;case i.ActionType.SubmitForm:const t=e.messageComponent;if(!t.validateForm())break;e.getPayload().then((e=>{const s={postback:e,submittedFields:t.getSubmittedFields(),type:i.MessageType.FormSubmission};e||delete s.postback,this.sendMessage((0,i.buildUserMessage)(s))}))}},this.Ft=e.name,this.la={type:i.MessageType.Text,text:"",globalActions:[{type:i.ActionType.Postback,label:"Global1",postback:{}},{type:i.ActionType.Postback,label:"Global2",postback:{}},{type:i.ActionType.Postback,label:"Global3",postback:{}},{type:i.ActionType.Postback,label:"Global4",postback:{}}]},this.threadId=`${i.ContextSource.UIWidget}:${this.sa||""}-${this.ta||""}`,this.ha=this.ei.sdkMetadata?Object.assign({version:o.SDK_VERSION},this.ei.sdkMetadata):{version:o.SDK_VERSION},this.ei.icons=Object.assign(Object.assign({},this.ei.icons),{logo:o.iconInlineLogo}),this.ni=Object.assign(Object.assign({},this.ei.i18n.en),this.ei.i18n[this.ei.locale]);const{uploadFile:u,getSuggestions:g,Si:m,pi:b,bo:f,mo:v}=this.ra;this.Ws=new r.ChatFooterComponent(t,this.sendMessage.bind(this),u.bind(d),Object.assign(Object.assign({},this.ei),{enableAttachment:!1}),g.bind(d),m.bind(d),b.bind(d),f.bind(d),this.li,d,v.bind(d)),this.contextualElem=document.getElementById(this.ta),this.da=this.contextualElem.querySelector("input, textarea"),this.pa=[{type:i.ActionType.Postback,label:"Show more",postback:{showMore:!0}}],this.ua=!1,this.ga=!1,this.ma=!1,this.ba=!0,this.lr={webCore:h,onMessageActionClicked:this.na}}render(){const e=this.Yt,t=e.createDiv(["widget-wrapper"]);this.element=e.createDiv(["contextual-widget"]),this.element.id=this.threadId;const s=e.createDiv(["container","none"]);this.appendToElement(s),t.appendChild(s),this.fa=s;const i=this.contextualElem.parentNode,r=e.createDiv(["contextual-widget-wrapper"]);i.replaceChild(r,this.contextualElem),r.appendChild(this.contextualElem),document.body.appendChild(t),this.contextualElem.parentElement.insertBefore(t,this.contextualElem);const a=e.createDiv([]);this.va=e.createDiv(["widget","flex","col"]),this.va.setAttribute("role","region"),this.va.setAttribute("aria-labelledby",`${this.Ft}-title`);const n=e.createDiv(["header","flex"]),c=e.createDiv(["header-info-wrapper"]),l=this.ni.chatTitle,d=this.ei.icons;if(!("logo"in d)||d.logo){const t=e.createImageIcon({icon:d.logo||o.iconLogo,iconCss:["logo"]});n.appendChild(t)}if(l){const t=e.createTextDiv(["title"]);t.id=`${this.Ft}-contextual-title`,t.innerText=l,t.title=l,c.appendChild(t)}n.appendChild(c);const p=e.createIconButton({css:["start-over-button",h],icon:o.iconStartOver,iconCss:[],title:"Start Again"});p.onclick=()=>{this.da?this.da.value="":this.ys.error("The input element is not found for clearing the filled-in text."),this.ba=!0,this.aa=!0,e.addCSSClass(p,h),this.wa()},n.appendChild(p),this.xa=p;const u=e.createIconButton({css:["close-button"],icon:d.close||o.iconClose,iconCss:[],title:"close"});u.onclick=this.ka.bind(this),n.appendChild(u),this.va.appendChild(n),this.ya=e.createDiv(["widget-content"]),this.va.appendChild(this.ya),this.Ws.render(),this.Ws.disable(!1),this.va.appendChild(this.Ws.element),e.addCSSClass(a,"open"),a.appendChild(this.va),e.addCSSClass(this.element,"wrapper",this.ei.theme),this.element.appendChild(a),this.la.globalActions&&(this._a=this.la.globalActions),this.Oa(!0)}sendMessage(e,t=!0){return this.Vo?(0,l.rejectErrorTextStream)():("string"==typeof e&&(e=(0,i.buildUserTextMessage)(e)),this.Ws.focusTextArea(),e&&this.Vi.sendMessage(e,{sdkMetadata:this.ha,threadId:this.threadId}).then((()=>{this.ma=!1,this.Yt.removeCSSClass(this.xa,h),t&&this.ja()})).catch((e=>this.ys.error("[sendMessage] Failed to send message:",e))))}onMessageReceived(e){var t,s;const r=this.ei,a=this.da,l=this.Yt;if(this.ga=!1,this.ua||(l.addCSSClass(this.Ws.element,"enabled"),this.ua=!0),e.messagePayload.llmGenerated){const t=n.MessageComponentFactory.fromMessage(r,l,e,this.lr);if(!t)return;if(this.ma=!0,t instanceof c.TextStreamMessageComponent){const s=e.messagePayload;switch(s.streamState){case"start":return this.Ws.disable(),t.isCoPilot=!0,t.showDone=this.Ma.bind(this),void(this.za?this.za(s):a?(t.textElement=a,t.update(s),this.Vo=t):this.ys.error("The input element is not found for filling in the generated text."));case"running":return void(this.za?this.za(s):this.Vo.update(s));case"end":this.Ws.disable(!1),this.za?(this.za(s),this.Ma()):(this.Vo.update(s),this.Vo=null),this.ba=!1,s.text="",this.Vr(e)}}else if(this.Vo=null,this.ba=!1,t instanceof c.TextMessageComponent){const t=e.messagePayload;this.za?this.za(t):(a.innerHTML=(0,o.convertBreakTagsToNewLines)(t.text),t.text="",this.Vr(e)),this.ka()}}else if(null===(t=e.messagePayload.channelExtensions)||void 0===t?void 0:t.showInDialog){const t=l.createDiv(["wrapper","popup-content-wrapper"]),s=l.createDiv(["popup-dialog"]),i=n.MessageComponentFactory.fromMessage(r,l,e,this.lr);s.appendChild(i.render()),t.appendChild(s);const o=i.actionsWrapper;if(o){const e=o.children;for(let s=0;s<e.length;s++)e[s].addEventListener("click",(()=>t.remove()))}t.onclick=e=>{s.contains(e.target)||t.remove()},document.body.appendChild(t),this.ba=!1,this.ka()}else if(this.ba=!1,e.messagePayload.type===i.MessageType.Error){if(this.ga=!0,null===(s=this.ya.firstChild)||void 0===s||s.remove(),!this.$a){const e=l.createDiv(["error-message"]);e.appendChild(l.createImageIcon({icon:o.iconInlineError,iconCss:["error-icon"]}));const t=l.createDiv(["error-info"]),s=l.createTextDiv(["error-text"]),i=l.createTextDiv(["reset-button"]);i.onclick=()=>{this.ga=!1,this.ba=!0,this.wa()},s.innerText="Something went wrong",i.innerText="Start over",t.appendChild(s),t.appendChild(i),e.appendChild(t),this.$a=e}this.ya.appendChild(this.$a),this.wa()}else this.Vr(e),this.showFullSizeWidget()}addText(e){return this.la.text=e,this}addAction(e,t,s=!1){return this.pa.push({type:i.ActionType.Postback,label:e,postback:{actionId:t,generate:s}}),this}addFieldInputParameter(e,t,s){return this.pa.forEach((i=>{const o=i.postback;o.actionId===e&&(o.fieldInputParameters||(o.fieldInputParameters={}),o.fieldInputParameters[t]=s)})),this}addAdditionalInputParameter(e,t,s){return this.pa.forEach((i=>{const o=i.postback;o.actionId===e&&(o.additionalInputParameters||(o.additionalInputParameters={}),o.additionalInputParameters[t]=s)})),this}createWidget(){const e=this.contextualElem;return this.element||this.render(),this.ia&&e.addEventListener("focus",(()=>{this.showWidget()})),this}showWidget(){const e=this.oa;return Object.keys(e).filter((e=>e!==this.threadId)).forEach((t=>{e[t].hideWidget()})),this.Yt.removeCSSClass(this.fa,h),this}collapseWidget(){return this.ka(),this}hideWidget(){return this.Yt.addCSSClass(this.fa,h),this}startWidgetInteraction(e){return this.ca(this.Ca(e)),this}onGeneratedText(e){return this.za=e,this}Vr(e){var t;const s=n.MessageComponentFactory.fromMessage(Object.assign(Object.assign({},this.ei),{actionsLayout:"horizontal",globalActionsLayout:"horizontal"}),this.Yt,e,this.lr);null===(t=this.ya.firstChild)||void 0===t||t.remove(),this.ya.appendChild(s.render())}Oa(e=!1){this.ba&&(e?(1===this.pa.length?this.la.actions=this.pa.slice(0):this.la.actions=this.pa.slice(0,2).reverse(),this.la.globalActions=[]):(this.la.actions=this.pa.slice(1),this._a&&(this.la.globalActions=this._a.slice(0))),this.Vr({messagePayload:this.la}))}ka(){const e=this.Yt;if(!this.Sa){const t=e.createDiv(["minimum-size","contextual-widget","wrapper"]),s=e.createIconButton({css:[],icon:o.iconInlineLaunch,iconCss:[],title:"open"}),r=e.createIconButton({css:[],icon:o.iconThumbsUp,iconCss:[],title:"like"}),a=e.createIconButton({css:[],icon:o.iconThumbsDown,iconCss:[],title:"dislike"});s.onclick=()=>{this.ba||this.ga?this.wa():this.showFullSizeWidget()},r.onclick=()=>{this.sendMessage((0,i.buildPostbackMessage)({postback:{rating:"positive",feedbackType:"llm"},type:i.ActionType.Postback}),!1)},a.onclick=()=>{this.sendMessage((0,i.buildPostbackMessage)({postback:{rating:"negative",feedbackType:"llm"},type:i.ActionType.Postback}),!1)},t.appendChild(s),t.appendChild(r),t.appendChild(a),this.fa.appendChild(t),this.Sa=t}e.removeCSSClass(this.element,d),e.addCSSClass(this.element,h),this.Ia&&e.addCSSClass(this.Ia,h),this.Ta&&e.addCSSClass(this.Ta,h),e.removeCSSClass(this.Sa,h),this.ma?e.removeCSSClass(this.Sa,"no-feedback"):e.addCSSClass(this.Sa,"no-feedback")}wa(){const e=this.Yt;this.Sa&&e.addCSSClass(this.Sa,h),this.Ia&&e.addCSSClass(this.Ia,h),this.Ta&&e.addCSSClass(this.Ta,h),e.removeCSSClass(this.element,d),e.removeCSSClass(this.element,h),this.Oa(!0),this.ma=!1}showFullSizeWidget(){const e=this.Yt;this.Sa&&e.addCSSClass(this.Sa,h),this.Ia&&e.addCSSClass(this.Ia,h),this.Ta&&e.addCSSClass(this.Ta,h),e.addCSSClass(this.element,h),this.Oa(),e.addCSSClass(this.element,d)}ja(){const e=this.Yt;if(!this.Ia){const t=e.createDiv(["generate-spinner"]),s=e.createTextDiv(["generate-text"]);s.innerText="Generating...",t.appendChild(e.createImageIcon({icon:o.iconGenerating,iconCss:["generate-icon","spin"]}));const i=e.createIconButton({css:["close-button",h],icon:o.iconClose,iconCss:[],title:"close"});i.onclick=this.ka.bind(this),t.appendChild(s),t.appendChild(i),this.fa.appendChild(t),this.Ia=t}this.Sa&&e.addCSSClass(this.Sa,h),this.Ta&&e.addCSSClass(this.Ta,h),e.removeCSSClass(this.element,d),e.addCSSClass(this.element,h),e.removeCSSClass(this.Ia,h)}Ma(){const e=this.Yt;if(!this.Ta){const t=e.createDiv(["generate-spinner"]),s=e.createTextDiv(["generate-text"]);s.innerText="Done",t.appendChild(e.createImageIcon({icon:o.iconCheck,iconCss:["generate-icon"]})),t.appendChild(s),this.fa.appendChild(t),this.Ta=t}this.Sa&&e.addCSSClass(this.Sa,h),e.addCSSClass(this.Ia,h),e.removeCSSClass(this.Ta,h),e.removeCSSClass(this.element,d),e.addCSSClass(this.element,h),setTimeout(this.ka.bind(this),3e3)}ca(e){this.sendMessage({messagePayload:{type:i.MessageType.UpdateApplicationContextCommand,source:i.ContextSource.UIWidget,context:this.sa,properties:e,reset:this.aa}})}Ca(e){let t;return this.pa.forEach((s=>{const i=s.postback,{fieldInputParameters:r,additionalInputParameters:a}=i;i.actionId===e&&(t=Object.assign(Object.assign({},(0,o.getFieldInputValues)(r)),a))})),t}}t.ContextualWidgetComponent=p},6992:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(7739),t),o(s(28),t),o(s(623),t),o(s(4810),t)},4810:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.SearchBarWidgetComponent=void 0;const i=s(6246),o=s(6064),r=s(8098),a=s(2366),n=s(4557),c=s(9780),l=s(5915),h="none";class d extends n.Component{get Aa(){return this.Ea}set Aa(e){e!==this.Ea&&(this.Ea=e,this.Pa&&(this.Pa.dataset.display=`${e}`,this.Pa.dispatchEvent(new CustomEvent("dataDisplay",{detail:e}))))}constructor(e,t,s,i){super(),this.ei=e,this.ri=t,this.ra=s,this.li=i,this.ys=new c.Logger("SearchBarWidgetComponent"),this.La=!1,this.Fa=!1,this.Ea=!1,this.openPopup=()=>{this.Fa||(this.Fa=!0,this.Aa=!0,this.ri.removeCSSClass(this.ya,h),this.Ra())},this.closePopup=()=>{if(this.Aa=!1,!this.Fa)return;this.Fa=!1;const e=this.Da();if(!e)return;const t=this.ri,s="true"===e.getAttribute("aria-expanded")?this.footer.getSuggestionsList():this.ya;s&&t.addCSSClass(s,h)},this.Na=e=>{const t=e.target;t.isConnected&&!this.footer.element.contains(t)&&!this.ya.contains(t)&&(this.closePopup(),this.Ha())},this.Va=()=>!!this.Ua()&&(this.openPopup(),!0);const{getSuggestions:o,sendMessage:r,uploadFile:n,Si:d,pi:p,bo:u,mo:g}=this.ra;this.Ft=this.ei.name;this.Ws=new a.ChatFooterComponent(this.ri,(e=>{this.Aa=!1,r.call(s,e)}),n.bind(s),this.ei,o.bind(s),d.bind(s),p.bind(s),u.bind(s),this.li,s,g.bind(s)),this.ei.showTypingIndicator&&(this.do=new l.TypingIndicatorComponent(l.MESSAGE_SIDE.LEFT,this.ei,this.ri))}get footer(){return this.Ws}get typingIndicator(){return this.do}render(){const e=this.ei,t=this.ri,s=document.getElementById(e.targetElement);let i;if(s){const e=t.createDiv(["search-bar-widget-wrapper","wrapper"]),o=t.createDiv(["search-bar-widget"]),a=t.createDiv(["search-bar-widget-content",h]);this.ya=a,i=t.createDiv(["search-bar-popup"]),this.element=s,this.ra.element=s,this.footer.render();const n=this.footer.element,c=this.footer.getSuggestionsList();t.setChatWidgetWrapper(e);const l=t.createElement("hr",["search-bar-popup-separator","none"],!1);l.role="none",this.Ba=l;const d=t.createDiv(["input-popup-slot"]);d.id=`${this.Ft}-input-popup-slot`,d.addEventListener("closeSearchbarPopup",this.closePopup),d.dataset.display=`${this.Aa}`,this.Pa=d,a.appendChild(i),a.append(l),a.appendChild(d),o.appendChild(a),n.append(o),e.appendChild(n);const p=t.createDiv(["input-end-slot"]);p.id=`${this.Ft}-input-end-slot`,e.appendChild(p),s.appendChild(e),this.Wa=i,this.Ra(),(0,r.on)(n,"click",this.Ra),null==c||c.addEventListener("click",(()=>{setTimeout((()=>{c.childElementCount&&this.Ha()}))}))}else this.ys.error(`Cannot fetch search bar using the passed target element: ${e.targetElement}`);return this.qa(),this.Ga(),this.Za(),i}appendMessageToConversation(e){const t=this.Wa;t.textContent="",t.appendChild(e),this.ri.removeCSSClass(t.parentElement,h),this.Va()}renderMessage(e,t,s){const o=this.Wa,r=this.ri,a="skill-message";if((0,i.isDisplayableMessage)(e)&&o){(0,c.isBotMessage)(e)||(o.textContent="");const i=this.Vr(e,t,o);if(i){(0,c.isBotMessage)(e)?r.addCSSClass(i,a):r.addCSSClass(i,"user-message");const t=this.Ya;s&&(null==t?void 0:t.className.includes(`${this.ei.name}-${a}`))?t.replaceWith(i):o.appendChild(i),this.Ya=i}}}showMessage(e,t){const s=this.ri.getMessage(t.render());s.id=e,this.Wa.appendChild(s)}Vr(e,t,s){const i=this.ei.delegate;if(i&&i.render){const t=this.ri.createDiv(["message"]);t.id=e.msgId,t.lang=this.ei.locale,s.appendChild(t);if(i.render(e))return null;t.remove()}return t.render()}Ra(){this.La||(this.La=!0,document.addEventListener("click",this.Na,!0))}Ha(){this.La&&(this.La=!1,document.removeEventListener("click",this.Na,!0))}Ua(){var e,t;const s=this.footer.getSuggestionsList();return!(null==s?void 0:s.hasChildNodes())&&(!(!this.ya&&!this.Pa)&&((null===(e=this.Wa)||void 0===e?void 0:e.hasChildNodes())||(null===(t=this.Pa)||void 0===t?void 0:t.hasChildNodes())))}Ja(){var e,t;(null===(e=this.Wa)||void 0===e?void 0:e.childElementCount)>0&&(null===(t=this.Pa)||void 0===t?void 0:t.childElementCount)>0?this.Ka():this.Xa()}Ka(){this.ri.removeCSSClass(this.Ba,"none")}Xa(){this.ri.addCSSClass(this.Ba,"none")}qa(){const e=this.Da(),t=()=>{this.Aa=!0},s=()=>{this.Aa=!1};(0,r.on)(e,"focus",(()=>{this.footer.isProgrammaticFocus()?s():t()})),(0,r.on)(e,"focus",this.Va),(0,r.on)(e,"blur",(()=>{this.Fa||s()})),(0,r.on)(e,"click",t),(0,r.on)(e,"click",this.Va),(0,r.on)(e,"keydown",(()=>{this.Va()||this.closePopup()})),(0,r.on)(e,"keyup",(e=>{e.key!==o.KeyCode.Return&&t()}))}Ga(){new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type&&(e.addedNodes.length>0?this.Aa&&this.Va():e.removedNodes.length>0&&(this.Ua()||this.closePopup()),this.Ja())}))})).observe(this.Pa,{childList:!0,subtree:!1})}Za(){new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type&&(e.removedNodes.length>0&&(this.Ua()||this.closePopup()),this.Ja())}))})).observe(this.Wa,{childList:!0,subtree:!1})}Da(){return this.footer.element.querySelector("textarea")}}t.SearchBarWidgetComponent=d},1816:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.Autocomplete=void 0;const i=s(6064),o=s(8098),r="aria",a=`${r}-expanded`,n=`${r}-selected`,c=`${r}-activedescendant`,l="autocomplete-active";t.Autocomplete=class{constructor(e,t,s){this.Qa=e,this.ri=s,this.tn=-1,this.sn=this.rn(t),(0,o.setAttributes)(e,{"aria-autocomplete":"list","aria-controls":t,[a]:"false",autocomplete:"off",role:"combobox"})}display(e,t){this.an(),this.le=e.map(((s,i)=>{const o=this.nn(i,e.length);return this.cn(o,s,t),o.onclick=()=>{this.Qa.value=s,this.hide()},this.sn.appendChild(o),o})),this.Qa.setAttribute(a,"true")}hide(){this.Qa.setAttribute(a,"false"),this.Qa.removeAttribute(c),this.an()}isOpen(){return"true"===this.Qa.getAttribute(a)}handleKeyboardEvent(e){let t=!1;if(e.ctrlKey)return t;const s=this.le.length;switch(e.code){case i.KeyCode.Return:case i.KeyCode.Space:case i.KeyCode.Tab:this.ln&&d(this.Qa,this.ln.textContent),this.hide();break;case i.KeyCode.Down:this.tn=(this.tn+1)%s,t=!0;break;case i.KeyCode.Up:this.tn=this.tn<0?s-1:(this.tn-1+s)%s,t=!0;break;case i.KeyCode.Esc:this.hide(),this.Qa.focus()}return t&&(e.stopPropagation(),e.preventDefault(),this.hn(this.le[this.tn])),t}getListbox(){return this.sn}rn(e){const t=this.ri.createElement("ul",["autocomplete-items"]);return t.id=e,(0,o.setAttributes)(t,{"aria-labelledby":`${this.Qa.id}-label`,"aria-live":"polite",role:"listbox"}),(0,o.on)(t,"keydown",(e=>{this.Qa.dispatchEvent(new KeyboardEvent(e.type,e))})),t}nn(e,t){const s=this.ri.createElement("li",["autocomplete-item"]);return s.id=`${this.sn.id}item-${e+1}`,s.tabIndex=-1,(0,o.setAttributes)(s,{"aria-posinset":(e+1).toString(),"aria-setsize":t.toString(),[n]:"false",role:"option"}),s}cn(e,t,s){const i=t.toLowerCase().indexOf(s),o=this.ri.createTextSpan();if(o.setAttribute("aria-hidden","true"),i>=0){const e=h(t.substring(0,i)),r=this.ri.createElement("strong",["strong"],!0);r.textContent=t.substring(i,i+s.length);const a=h(t.substring(i+s.length));o.append(e,r,a)}else o.textContent=t;e.append(o),e.setAttribute("aria-label",t)}hn(e){const t=this.ln;t&&(this.ri.removeCSSClass(t,l),t.setAttribute(n,"false")),e&&(e.scrollIntoView(!1),e.setAttribute(n,"true"),this.ri.addCSSClass(e,l),this.ln=e,this.Qa.setAttribute(c,e.id))}an(){const e=this.sn;for(;e.firstChild;)e.removeChild(e.lastChild);this.le=[],this.ln=null,this.tn=-1}};const h=e=>document.createTextNode(e),d=(e,t)=>{e.value=t,e.setSelectionRange(t.length,t.length)}},9571:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.INPUT_MODE=t.ChatFooterComponent=void 0;const i=s(6064),o=s(8098),r=s(1816),a=s(4557),n=s(9780),c={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",ENTER:"Enter"},l={KEYBOARD:"keyboard",VOICE:"voice"};t.INPUT_MODE=l;const h={AUDIO:".aac, .amr, .m4a, .mp3, .mp4a, .mpga, .oga, .ogg, .wav, audio/*",FILE:".7z, .csv, .doc, .docx, .eml, .ics, .key, .log, .msg, .neon, .numbers, .odt, .pages, .pdf, .pps, .ppsx, .ppt, .pptx, .rtf, .txt, .vcf, .xls, .xlsx, .xml, .yml, .yaml, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document",IMAGE:".gif, .jfif, .jpeg, .jpg, .png, .svg, .tif, .tiff, .webp, image/*",VIDEO:".3g2, .3gp, .avi, .m4v, .mov, .mp4, .mpeg, .mpg, .ogv, .qt, .webm, .wmv, video/*",ALL:""};h.ALL=`${h.AUDIO},${h.FILE},${h.IMAGE},${h.VIDEO}`;const d=window.setTimeout;class p extends a.Component{constructor(e,t,s,r,a,n,c,h,p,u,g){super(),this.ri=e,this.dn=t,this.pn=s,this.ei=r,this.un=a,this.Si=n,this.gn=c,this.bo=h,this.li=p,this.mn=u,this.mo=g,this.bn=void 0,this.fn=o.ATTACHMENT_MAX_SIZE,this.vn=!1,this.wn=[],this.xn=!1,this.kn=!1,this.yn=!1,this._n=!0,this.On=()=>{var e,t;const s=this.jn;if(!(null==s?void 0:s.nodeType))return;const i=this.ri,o="none",r=(null===(t=null===(e=this.Mn)||void 0===e?void 0:e.value)||void 0===t?void 0:t.trim().length)>0;this.bn===l.KEYBOARD&&(this.ei.alwaysShowSendButton||r)?i.removeCSSClass(s,o):i.addCSSClass(s,o),s.disabled=this.zn||!r},this.$n=e=>{var t;this.isDisabled()||this.ei.enableAutocomplete&&this.Cn.isOpen()&&this.Cn.handleKeyboardEvent(e)||e.key===i.KeyCode.Return&&!e.shiftKey&&(null===(t=this.Mn.value)||void 0===t?void 0:t.trim().length)>0&&(e.preventDefault(),this.jn.click())},this.Sn=(0,o.throttle)((e=>{this.li.trigger(o.ChatEvent.TYPING,e)}),1e3),this.In=(0,o.throttle)((e=>{this.bo("RESPONDING",this.ei.enableAgentSneakPreview?e:"...")}),this.ei.typingStatusInterval*o.SEC_MULTIPLIER),this.Tn=e=>{var t;if(this.On(),this.isDisabled())return this.An(),void this.En();if(e.isComposing)return;const s=null===(t=this.Mn.value)||void 0===t?void 0:t.trim();this.Sn(!0),this.ei.enableSendTypingStatus&&(s?this.In(s):this.bo("LISTENING")),clearTimeout(this.Pn),this.Pn=d((()=>{this.Sn(!1),this.ei.enableSendTypingStatus&&this.bo("LISTENING")}),this.ei.typingStatusInterval*o.SEC_MULTIPLIER),this.ei.enableAutocomplete&&(e.code===i.KeyCode.Backspace&&(this.Ln=void 0,this.An(),this.En(),clearTimeout(this.Fn)),this.Rn().includes(e.code)||(s.length>=3?this.Ln!==s&&(this.Ln=s,clearTimeout(this.Fn),this.Dn()):(this.Ln=void 0,this.En(),clearTimeout(this.Fn))))},this.Nn=()=>{if(!this.ei.searchBarMode){this.Mn.style.height=null;const e=.6*this.mn.chatWidgetDiv.clientHeight,t=this.Mn.scrollHeight;this.Mn.style.height=`${Math.min(e,t)}px`}},this.Ft=r.name,this.Hn=r.i18n,this.Vn=r.icons,this.ni=Object.assign(Object.assign({},this.Hn.en),this.Hn[r.locale]),this._n=!(0,i.isMobile)(),this.Un=`${this.Ft}-share-button`}render(){if(this.element=this.yo(),this.ei.enableSpeech){const e=this.Bn();this.element.appendChild(e)}const e=this.Wn();this.element.appendChild(e),this.setInputMode(l.KEYBOARD),this.disable(),window.addEventListener("resize",(0,o.debounce)((()=>{this.Nn()}),100))}setInputMode(e){e!==this.bn&&(this.ei.enableSpeech?(this.bn=e,this.bn===l.KEYBOARD?this.qn():this.Gn()):(this.bn=l.KEYBOARD,this.qn()))}getInputMode(){return this.bn}setUserInputText(e){this.Mn&&(this.Mn.value=e,this.Mn.setSelectionRange(e.length,e.length),this.focusTextArea(),this.On())}getUserInputText(){return this.Mn.value}setUserInputPlaceholder(e){this.Mn&&(this.bn===l.KEYBOARD?this.Zn(e):this.Yn=e)}setRecognitionRequested(e){this.yn=e}setVoiceRecording(e){this.ei.enableSpeech&&(e&&this.yn?this.setInputMode(l.VOICE):e||this.setInputMode(l.KEYBOARD))}updateVisualizer(e,t){this.bn===l.VOICE&&(0,i.drawVisualizer)(e,this.Jn,t)}focusTextArea(){this._n&&(this.vn=!0,this.Mn.focus(),this.vn=!1),this.Mn.scrollTop=this.Mn.scrollHeight}isProgrammaticFocus(){return this.vn}disable(e=!0){const t=this.ri,s="disabled";this.ei.enableAttachment&&(this.Kn.disabled=e),e?(t.addCSSClass(this.Mn,s),this.ei.enableAutocomplete&&(this.An(),this.En())):t.removeCSSClass(this.Mn,s),this.ei.enableSpeech&&(this.setInputMode(l.KEYBOARD),this.disableVoiceModeButton(e,{src:"network"})),this.zn=e,this.On()}isDisabled(){return this.zn}disableVoiceModeButton(e,{src:t}){if(this.ei.enableSpeech){switch(t){case"lang":this.xn=e;break;case"network":this.kn=e}this.ei.multiLangChat&&(this.xn||this.kn)?this.Xn.disabled=!0:this.Xn.disabled=this.kn}}displaySuggestions(e){if(this.Qn=e,this.ec=e.length>0,!this.ec||!this.Mn.value)return void this.En();const t=this.Mn.value.trim().toLowerCase();this.Cn.display(e.slice(0,Math.min(e.length,o.Constants.MAX_SUGGESTIONS_COUNT)),t)}getSuggestions(){return this.Qn}getSuggestionsValid(){return this.ec}getSuggestionsList(){var e;return null===(e=this.Cn)||void 0===e?void 0:e.getListbox()}setLocale(e){this.ni=e,this.Kn&&(g(this.Kn,e.upload),this.tc.querySelectorAll("li").forEach((e=>{const t=e.dataset.value,s=this.ni[`share${t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()}`]||this.ni[t]||e;e.querySelector("span").innerText=s}))),this.setUserInputPlaceholder(e.inputPlaceholder),this.jn&&g(this.jn,e.send),this.Xn&&g(this.Xn,e.speak),this.sc&&g(this.sc,e.inputPlaceholder)}updateInputHeight(){this.Nn()}yo(){return this.ri.createDiv(["footer"])}qn(){var e;const t=this.ri;t.removeCSSClass(this.element,"mode-voice"),t.addCSSClass(this.element,"mode-keyboard"),this.Zn(this.Yn),this.Mn.disabled=!1,this.On(),this.ei.enableAutocomplete&&(null===(e=this.Mn.value)||void 0===e?void 0:e.trim().length)>=3&&this.Dn()}Gn(){const e=this.ri;e.removeCSSClass(this.element,"mode-keyboard"),e.addCSSClass(this.element,"mode-voice"),this.Yn=this.Mn.placeholder,this.Zn(this.ni.recognitionTextPlaceholder),this.Mn.disabled=!0,this.On(),this.En()}Wn(){var e;const t=this.ri,s=t.createDiv(["footer-mode-keyboard","flex"]),i=this.ei,o=null===(e=i.icons)||void 0===e?void 0:e.footerLogo;if(o&&s.appendChild(t.createImageIcon({icon:o,iconCss:["footer-logo"]})),i.searchBarMode){const e=t.createDiv(["input-start-slot"]);e.id=`${this.Ft}-input-start-slot`,s.appendChild(e)}this.oc(s);const r=t.createDiv(["footer-actions","flex"]),a=this.rc();if(this.jn=a,this.mo("send",a),r.appendChild(a),i.enableSpeech&&(this.Xn=this.ac(),r.appendChild(this.Xn),this.sc=this.nc(),r.appendChild(this.sc)),i.enableAttachment){const e=this.cc();r.appendChild(e)}return s.appendChild(r),s}cc(){const e=this.ri,t=e.createDiv(),s=u(this.ri,{css:["button-upload","flex"],customIcon:this.Vn.shareMenu,defaultIcon:o.iconAttach,title:this.ni.upload});s.id=this.Un;const i=e.createElement("input",["none"]);i.type="file",i.tabIndex=-1,i.setAttribute("aria-hidden","true"),this.lc=i,this.tc=this.hc(s);const r=e.getMenuButton({button:s,menuId:this.tc.id,menu:this.tc,widget:this.ei.searchBarMode?this.mn.element:this.mn.chatWidgetDiv});return(0,o.on)(r,"click",(()=>{this.En()})),this.Kn=r,this.mo("shareMenu",r),document.addEventListener("deviceready",(()=>{const e=globalThis?globalThis.device:window?window.device:void 0;"Android"===(null==e?void 0:e.platform)&&this.lc.removeAttribute("accept")}),!1),(0,o.on)(i,"click",(()=>i.value=null)),(0,o.on)(i,"change",(e=>{const t=e.target;t.files&&t.files.length&&this.dc(t.files[0])})),t.appendChild(this.Kn),t.appendChild(this.tc),t.appendChild(i),t}hc(e){return this.ri.getMenu({menuId:`${this.ei.name}-share-menu`,menuClassList:["share-popup-list"],buttonId:this.Un,menuItems:this.uc(),menuButton:e})}uc(){const e=this.ri,t=this.Vn,s=this.ni,i=this.lc,r=`${this.Ft}-share-`;let a=this.ei.shareMenuItems;const c=[],l=[n.ShareCategory.AUDIO,n.ShareCategory.FILE,n.ShareCategory.LOCATION,n.ShareCategory.VISUAL],d=new Set;if((null==a?void 0:a.length)&&!a.every((e=>"string"==typeof e&&!l.includes(e.toLowerCase())))||(a=l),a.forEach((e=>{"string"==typeof e&&d.add(e.toLowerCase())})),d.has(n.ShareCategory.VISUAL)){const a=`${r}visual`,n=t.shareMenuVisual||o.iconShareMedia,l=e.createListItem(a,s.shareVisual,"visual",n,"share-popup-item",(()=>{i.accept=`${h.IMAGE},${h.VIDEO}`,i.click()}));c.push(l),this.mo("shareMenuVisual",l)}if(d.has(n.ShareCategory.AUDIO)){const a=`${r}audio`,n=t.shareMenuAudio||o.iconShareAudio,l=e.createListItem(a,s.shareAudio,"audio",n,"share-popup-item",(()=>{i.accept=h.AUDIO,i.click()}));c.push(l),this.mo("shareMenuAudio",l)}if(d.has(n.ShareCategory.FILE)){const a=`${r}file`,n=t.shareMenuFile||o.iconShareFile,l=e.createListItem(a,s.shareFile,"file",n,"share-popup-item",(()=>{i.accept=h.FILE,i.click()}));c.push(l),this.mo("shareMenuFile",l)}if(d.has(n.ShareCategory.LOCATION)){const i=`${r}location`,a=t.shareMenuLocation||o.iconShareLocation,n=e.createListItem(i,s.shareLocation,"location",a,"share-popup-item",(()=>this.gn()));c.push(n),this.mo("shareMenuLocation",n)}const p=t.shareMenuFile||o.iconShareFile;return this.ei.shareMenuItems.filter((e=>"string"!=typeof e&&"string"==typeof e.type)).forEach((t=>{const r=t.type.toLowerCase(),a=`share_${r.includes("*")?"all":r.replace(/ /g,"_")}`,n=`${this.Ft}-${a}`,l=s[a]||this.Hn.en[a];let d=t.label;l?d=l:this.Hn.en[a]=d;const u=t.icon||p,g=t.maxSize&&t.maxSize>=1?Math.min(t.maxSize*o.BYTE_MULTIPLIER,o.ATTACHMENT_MAX_SIZE):o.ATTACHMENT_MAX_SIZE;let m="";"wcfs_*"!==r&&(m=r.includes("*")&&"wcfs_*"!==r?h.ALL:r.split(" ").map((e=>`.${e} `)).join(",")),c.push(e.createListItem(n,d,a,u,"share-popup-item",(()=>{this.fn=g,i.accept=m,i.click()})))})),c}oc(e){const t=this.ri;this.Mn=this.gc();const s=t.createLabel(["hidden"]);s.id=`${this.Mn.id}-label`,s.htmlFor=this.Mn.id,this.mc=s,this.Zn(this.Yn),e.append(s,this.Mn),this.ei.enableAutocomplete&&(this.Cn=new r.Autocomplete(this.Mn,`${this.Ft}-suggestions-list`,this.ri),e.append(this.Cn.getListbox()))}gc(){const e=["user-input"];this.ei.enableSpeech&&e.push("user-input-inline-send");const t=this.ri.createElement("textarea",e,!0);return t.setAttribute("enterkeyhint","send"),t.id=`${this.Ft}-user-text-input`,this.Yn=this.ni.inputPlaceholder,t.rows=1,(0,o.on)(t,"keydown",this.$n),(0,o.on)(t,"keyup",this.Tn),(0,o.on)(t,"input",(()=>{const e=t.value;this.mn.speechFinalResult=this.mn.speechFinalResult||{speechId:"",text:""},this.mn.speechFinalResult.text=e,this.Nn()})),(0,o.on)(t,"paste",(()=>{this.zn||d(this.On)})),this.bc(t),this.mo("input",t),t}Zn(e){this.Mn.placeholder=e,this.mc.innerText=e}bc(e){const t=Object.getOwnPropertyDescriptor(HTMLTextAreaElement.prototype,"value");Object.defineProperty(e,"value",{set:s=>{t.set.call(e,s),this.On(),this.Nn()},get:t.get})}rc(){const e=u(this.ri,{css:["button-send"],customIcon:this.Vn.send,defaultIcon:o.iconSend,title:this.ni.send});return e.disabled=!0,e.onclick=()=>{var e;this.fc()||(this.Ln=void 0,this.Mn.value=null===(e=this.Mn)||void 0===e?void 0:e.value.trim(),this.ei.enableAutocomplete&&(this.An(),this.En()),this.vc())},e}ac(){const e=u(this.ri,{css:["button-switch-voice"],customIcon:this.Vn.mic,defaultIcon:o.iconMic,title:this.ni.speak});return e.onclick=()=>{this.Si(!0),this.yn=!0},this.mo("mic",e),e}Bn(){const e=this.ri,t=e.createDiv(["footer-mode-voice","flex"]),s=e.createDiv(["footer-visualizer-wrapper"]);return this.Jn=e.createElement("canvas"),this.Jn.width=244,this.Jn.height=32,s.appendChild(this.Jn),t.appendChild(s),t}nc(){const e=u(this.ri,{css:["button-switch-kbd"],customIcon:this.Vn.keyboard,defaultIcon:o.iconKeyboard,title:this.ni.inputPlaceholder});return e.onclick=()=>{this.yn=!1,this.Si(!1)},this.mo("keyboard",e),e}fc(){return!this.Mn||0===this.Mn.value.trim().length}vc(){this.dn(this.Mn.value),this.Mn.value="",this.Mn.innerText="",d(this.Nn)}dc(e){const t=this.fn;this.fn=o.ATTACHMENT_MAX_SIZE,this.pn(e,{maxSize:t}),this.lc.value=""}wc(){this.un(this.Mn.value.trim()).catch((()=>{}))}En(){this.Cn&&this.Cn.isOpen()&&this.Cn.hide()}Dn(){this.Fn=d((()=>{this.wc()}),300)}An(){this.Qn=null,this.ec=!1}Rn(){if(!this.wn.length)for(const e of Object.keys(c))this.wn.push(c[e]);return this.wn}}function u(e,{css:t,customIcon:s,defaultIcon:i,title:o}){const r=s||i;return e.createIconButton({css:["footer-button","flex"].concat(t),icon:r,iconCss:[],title:o})}function g(e,t){e.title=t}t.ChatFooterComponent=p},2512:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(9571),t)},5711:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.ChatHeaderComponent=void 0;const i=s(6246),o=s(8098),r=s(4557),a=s(9780),n="end-conversation",c="collapse",l="clear",h="tts",d="none";class p extends r.Component{constructor(e,t,s,i,o,r,n,c,l){super(),this.ei=e,this.ri=t,this.q=s,this.xc=i,this.kc=o,this.Vi=r,this.yc=n,this.mo=c,this.mn=l,this.ys=new a.Logger("ChatHeaderComponent"),this._c=[],this.Oc=[],this.Ft=e.name,this.ni=Object.assign(Object.assign({},this.ei.i18n.en),this.ei.i18n[e.locale])}render(){return this.element=this.yo(),this.ei.showConnectionStatus&&(this.jc=e=>this.Mc(e),this.Vi.on(i.CoreEvent.State,this.jc)),this.disable(),this.element}addLanguageSelect(e){const t=!(!this.Oc||!this.Oc.length);this.zc=e.render(t),this.mo("language",this.zc),this.zc&&(t?this.$c.appendChild(this.zc):this.Cc.prepend(this.zc))}closeWidgetPopup(){this.q()}clearHistory(){this.xc()}showTTSButton(e){const t=this.Sc(h);t&&(t.style.display=e?"flex":d)}disableTTSButton(e){const t=this.Sc(h);if(t){const s=this.ri;if("LI"===t.tagName){const i="disable";e?(s.addCSSClass(t,i),t.ariaDisabled="true"):(s.removeCSSClass(t,i),t.ariaDisabled="false")}else t.disabled=e}}setLocale(e){var t;const s=this.ri,i=this.zc;this.ni=e;const o=e.chatTitle;o&&(this.Ic.innerText=o);const r=e.chatSubtitle;r?(this.Tc.innerText=r,s.removeCSSClass(this.Tc,d),s.addCSSClass(this.Ac,d)):this.ei.showConnectionStatus?(this.Mc(this.Ec),s.removeCSSClass(this.Ac,d),s.addCSSClass(this.Tc,d)):(s.addCSSClass(this.Tc,d),s.addCSSClass(this.Ac,d)),this.Pc&&u(this.Pc,e.showOptions),null===(t=this._c)||void 0===t||t.forEach((t=>{u(t.element,e[t.title])})),i&&u(i.querySelector("button")||i,e.languageSelectDropdown)}disable(e=!0){if(this.ei.enableEndConversation&&!this.ei.wcfsEnableEndConversationButtonToClose)for(const t of this._c)t.name===n&&(t.element.disabled=e)}addAction(e){this._c.push(e)}remove(){this.Vi.off(i.CoreEvent.State,this.jc)}yo(){var e;const t=this.ri,s=this.ei,i=s.icons,r=t.createDiv(["header","flex"]),a=t.createDiv(["header-info-wrapper"]),p=t.createDiv(["header-actions","flex"]),u=this.ni,g=u.chatTitle,m=u.chatSubtitle;if(!("logo"in i)||i.logo){const e=t.createImageIcon({icon:i.logo||o.iconLogo,iconCss:["logo"]});r.appendChild(e)}if(g){const e=t.createTextDiv(["title"]);e.id=`${s.name}-title`,e.innerText=g,a.appendChild(e),this.Ic=e}this.Tc=t.createTextDiv(["subtitle",d]),a.appendChild(this.Tc),this.Ac=t.createTextDiv(["connection-status",d]),a.appendChild(this.Ac),m?(this.Tc.innerText=m,t.removeCSSClass(this.Tc,d)):s.showConnectionStatus&&(this.Mc(this.Vi.getState()),t.removeCSSClass(this.Ac,d)),r.appendChild(a);const b=t.createDiv(["header-gap"]);if(r.appendChild(b),s.customHeaderElementId){const e=document.getElementById(s.customHeaderElementId);if(e){const s=t.createDiv(["header-custom-element"]);s.appendChild(e),r.appendChild(s)}else this.ys.error(`Could not find element with ID '${s.customHeaderElementId}'. No custom element added to the chat header.`)}if(this.Cc=p,s.enableEndConversation){const e=i.close||o.iconClose;this._c.push({name:n,title:"endConversation",icon:e,clickHandler:this.yc.bind(this),order:10})}if(!s.embedded){const e=i.collapse||o.iconCollapse;this._c.push({name:c,title:"close",icon:e,clickHandler:this.closeWidgetPopup.bind(this),order:20})}if(s.enableBotAudioResponse&&(this.Lc=!s.initBotAudioMuted,this._c.push({name:h,title:this.Lc?"audioResponseOn":"audioResponseOff",icon:this.Lc?i.ttsOn||o.iconTTSUnmute:i.ttsOff||o.iconTTSMute,clickHandler:()=>{this.Lc=!this.Lc,this.Fc(),this.kc(this.Lc)},order:30})),s.enableClearMessage){const e=i.clearHistory||o.iconClearHistory;this._c.push({name:l,title:"clear",icon:e,clickHandler:this.clearHistory.bind(this),order:40})}return this._c.sort(((e,t)=>e.order>t.order?1:-1)),null===(e=this._c)||void 0===e||e.forEach(((e,s)=>{const i=this.ei.multiLangChat?this._c.length+1:this._c.length;if(!this.ei.enableHeaderActionCollapse||s<2&&!(i>2&&1===s)){const s=t.createIconButton({css:["header-button"],icon:e.icon,iconCss:[],title:u[e.title]});s.onclick=e.clickHandler,this.Rc(e,s),e.element=s,this.Cc.prepend(s)}else this.Oc.push(e)})),this.Oc&&this.Oc.length&&this.Dc(this.Oc),r.appendChild(p),r}Rc(e,t){switch(t.id=`${this.Ft}-${e.name}`,e.name){case n:this.mo("close",t);break;case c:case h:this.mo(e.name,t);break;case l:this.mo("clearHistory",t)}}Dc(e){const t=this.ri,s=this.ni,i=`${this.ei.name}-action-menu`,r=`${i}-button`,a=e.map((e=>{const i=t.createListItem(`action-menu-option-${e.name}`,s[e.title],e.name,e.icon,"action-item",e.clickHandler);return this.Rc(e,i),e.element=i,i})),n=t.createIconButton({css:["header-button","button-show-options"],icon:o.iconExpand,iconCss:[],title:s.showOptions}),c=t.getMenu({menuId:i,menuClassList:["action-menu"],menuItems:a,buttonId:r,menuButton:n}),l=t.getMenuButton({button:n,menuId:i,menu:c,widget:this.mn.chatWidgetDiv});this.Cc.prepend(c),this.Cc.prepend(l),this.Pc=l,this.$c=c}Nc(e){for(const t of this._c)if(t.name===e)return t;return null}Sc(e){var t;return null===(t=this.Nc(e))||void 0===t?void 0:t.element}Fc(){const e=this.ei.icons,t=this.Nc(h);t.title=this.Lc?"audioResponseOn":"audioResponseOff",t.icon=this.Lc?e.ttsOn||o.iconTTSUnmute:e.ttsOff||o.iconTTSMute,this.kr(h)}kr(e){const t=this.ri,s=this.ni,i=this.Nc(e),o=this.Sc(e);if(o){o.innerHTML="";const e=s[i.title],r=i.icon,a="LI"===o.tagName,n=t.createImageIcon({icon:r,iconCss:[a?"icon":"","action-item-icon"]});if(a){o.appendChild(n);const s=t.createTextSpan(["text","action-item-text","ellipsis"]);s.innerText=e,o.appendChild(s)}else o.appendChild(n),o.title=e}}Mc(e){const t=this.ri,s="connecting",o="connected",r="disconnected",a=this.Ac,n=this.ni;switch(this.Ec=e,e){case i.ConnectionState.Open:a.innerText=n.connected,t.removeCSSClass(a,s,r),t.addCSSClass(a,o);break;case i.ConnectionState.Closed:a.innerText=n.disconnected,t.removeCSSClass(a,s,o),t.addCSSClass(a,r);break;case i.ConnectionState.Closing:a.innerText=n.closing,t.removeCSSClass(a,o,r),t.addCSSClass(a,s);break;case i.ConnectionState.Connecting:a.innerText=n.connecting,t.removeCSSClass(a,o,r),t.addCSSClass(a,s)}}}function u(e,t){if("LI"===e.tagName){const s=e.querySelector("span");s&&(s.innerText=t)}else e.title=t}t.ChatHeaderComponent=p},7102:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(5711),t)},5919:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.WidgetMainComponent=void 0;const i=s(4557);class o extends i.Component{constructor(e){super(),this.element=e.createDiv(["conversation"])}render(){}}t.WidgetMainComponent=o},5846:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(5919),t)},2366:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(1816),t),o(s(2512),t),o(s(7102),t),o(s(5846),t),o(s(5598),t)},5598:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.MultiLangChatComponent=void 0;const i=s(6246),o=s(9780),r=s(8098);function a(e){return`${e.name}-${e.channelId}-${e.userId}`}function n(e,t){(0,r.getBrowserLocale)()===e&&(t[e.substring(0,2)]=e)}t.MultiLangChatComponent=class{constructor(e,t,s){let r,a;if(this.V=t,this.mn=s,this.ys=new o.Logger("MultiLangChatComponent"),this.Hc=!0,this.Vc=!0,this.Uc=!1,this.Bc={},this.Wc={},this.qc=[],this.Vi=t.webCore,this.ei=t.settings,this.ni=Object.assign(Object.assign({},this.ei.i18n.en),this.ei.i18n[this.ei.locale]),this.Ft=t.settings.name,e&&(this.Gc=Object.assign(Object.assign({},e),{supportedLangs:e.supportedLangs?[...e.supportedLangs]:[]}),r=this.Gc.supportedLangs,a=this.Gc.primary,"string"==typeof a&&(this.Gc.primary=a.toLowerCase())),r&&r.length)if(r.forEach((e=>{e.lang=e.lang.toLowerCase()})),r.length>1?(r.unshift({lang:"und",label:this.ni.language_detect}),this.Gc.primary||(this.Gc.primary=null)):this.Gc.primary=r[0].lang,this.qc=r.map((e=>e.lang)),this.ei.enableBotAudioResponse){const e=t.synthesisVoices;if(e&&e.length){const t={};r.filter((e=>e.lang&&"und"!==e.lang)).forEach((s=>{const i=e.filter((e=>e.lang.includes(s.lang)));i.push({lang:s.lang}),t[s.lang]=i})),this.Wc=t}else new Set(this.qc.filter((e=>"und"!==e))).forEach((e=>{this.Wc[e]=[{lang:e,name:e}]}))}else this.Zc=()=>{};if(this.ei.enableSpeech){const e={};Object.values(i.RecognitionLocale).forEach((t=>{e[t.substring(0,2)]=t,e[t]=t})),n(i.RecognitionLocale.EN_GB,e),n(i.RecognitionLocale.EN_AU,e),n(i.RecognitionLocale.EN_IN,e),this.Bc=e}else this.Yc=()=>{}}render(e){const t=this.V.util,s=this.Ft,i="language-selection",o=`${s}-${i}-button`,a=`${s}-${i}-menu`,n=this.Gc;let c;if(this.Uc=e,!(n&&n.supportedLangs&&n.supportedLangs.length>=2))return null;if(!this.Jc){const s=this.ei.icons.language||r.iconLanguage,l=t.createIconButton({css:["header-button","button-lang"],icon:s,iconCss:[],title:this.ni.languageSelectDropdown}),h=t.createListItem("action-menu-option-lang",this.ni.languageSelectDropdown,"lang",s,"action-item",null,!0),d=n.supportedLangs.map((e=>{var s;const{lang:o,label:r}=e,a="und"===o&&n.primary?n.primary:o,c=`language_${"und"===o?"detect":o}`,l=(null===(s=this.ei.i18n[a])||void 0===s?void 0:s[c])||r||o;return t.createListItem(`${i}-option-${o}`,l,o,"",`${i}-option`,(e=>{let t=e.target;"LI"!==t.tagName&&(t=t.parentElement);const s=t.dataset.value;this.Kc(s)}))})),p=t.getMenu({menuId:a,menuClassList:[`${i}-menu`],menuItems:d,buttonId:o,menuButton:e?h:l});if(e){c=t.getMenuButton({button:h,menuId:a,menu:p,widget:this.mn.chatWidgetDiv});const e=t.createDiv(["arrow-icon"]),s=t.createImageIcon({icon:r.iconExpandArrow});e.appendChild(s),c.appendChild(e);this.V.chatWidget.chatWidgetDiv.querySelector(`ul.${this.Ft}-action-menu`).insertAdjacentElement("afterend",p)}else{c=t.createDiv();const e=t.getMenuButton({button:l,menuId:a,menu:p,widget:this.mn.chatWidgetDiv});c.appendChild(e),c.appendChild(p),l.id=o}this.disableComponent(!1)}return this.Jc=c,c}setLocale(e){this.Jc&&(this.ni=e,this.Gc.supportedLangs.forEach((t=>{const{lang:s,label:i}=t,o=`language_${"und"===s?"detect":s}`,r=document.getElementById(`language-selection-option-${s}`);if(!r)return;const a=e[o]||i||s;r.title=a})))}setTag(e,t=!0){let s="";null!==e&&(s=e.toLowerCase()),this.qc.length&&(s=this.qc.includes(s)?s:null),this.Kc(s,t)}disableComponent(e){if(this.Jc){const t=this.V.util,s=this.Jc;if(this.Uc){const i="disable";e?t.addCSSClass(s,i):t.removeCSSClass(s,i)}else s.querySelector("button").disabled=e}}Kc(e,t=!0){let s=e;this.ni=this.ei.i18n[s],this.Xc!==s&&(this.Xc=s,this.V.eventDispatcher.trigger(r.ChatEvent.CHAT_LANG,s)),this.Jc&&this.Qc(s),"und"===s&&(s=null),t&&(this.el(s),this.V.storageService.setItem(a(this.ei),s)),this.Zc(s),this.Yc(s),this.V.chatWidget.onLanguageUpdate(s,t)}el(e){if(this.Vi.isConnected()){const t={profile:{languageTag:e}};e||(t.profile.locale=e);const s=this.ei.sdkMetadata?Object.assign({version:r.SDK_VERSION},this.ei.sdkMetadata):{version:r.SDK_VERSION};this.Vi.updateUser(t,{sdkMetadata:s}).catch((e=>this.ys.warn("[updateProfile] Failed to update user profile:",e)))}}Zc(e){const t=this.V.chatWidget;if(e){if(this.Hc||(t.enableSpeechSynthesisService(!0),this.Hc=!0),this.ei.enableBotAudioResponse){const t=this.Wc[e];this.Vi.setTTSVoice(t).catch((e=>{this.ys.info(`Failed to set TTS voice for '${t[0].lang}'. ${e}`),this.Zc(null)}))}}else this.Hc=!1,this.ei.enableBotAudioResponse&&this.Vi.cancelTTS(),t.enableSpeechSynthesisService(!1)}Yc(e){const t=this.V,s=this.Bc[e],i=t.chatWidget;s?(this.Vc||(i.setVoiceRecognitionService(!0),this.Vc=!0),this.Vi.setRecognitionLocale(s)):(this.Vc=!1,this.Vi.stopRecognition(),this.Vi.setRecognitionLocale(null),i.setVoiceRecognitionService(!1))}Qc(e){const t=this.V.util,s=e||"und",i=document.getElementById(`${this.Ft}-language-selection-menu`),o="active";if(i){const e=i.querySelector(`li.${this.Ft}-${o}`);e&&t.removeCSSClass(e,o);const r=i.querySelector(`[data-value="${s}"]`);r&&t.addCSSClass(r,o)}}initLanguage(){const{primary:e}=this.Gc||{},t=this.V.storageService.getItem(a(this.ei));let s=e;t&&(s="null"===t?null:t),void 0!==s&&this.setTag(s)}}},4557:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.Component=void 0;const i=s(6064);t.Component=class{remove(){this.element.remove()}isVisible(){return(0,i.isVisible)(this.element)}appendToElement(e){e.appendChild(this.element)}prependToElement(e){const t=e.firstChild;t?e.insertBefore(this.element,t):e.appendChild(this.element)}appendContentChildElement(e){this.tl().appendChild(e)}appendContentChild(e){this.tl().appendChild(e.element)}tl(){return this.element}}},4049:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.ActionComponentFactory=void 0;const i=s(6246),o=s(5915),r=s(6893);class a{static fromActionPayload(e,t,s,r,n){switch(e.type){case i.ActionType.Postback:return new o.PostbackActionComponent(e,t,n);case i.ActionType.Url:return new o.UrlActionComponent(e,t,n,s.openLinksInNewWindow,s.linkHandler);case i.ActionType.Webview:return new o.UrlActionComponent(e,t,n,s.openLinksInNewWindow,n.webviewLinkHandler);case i.ActionType.Location:return new o.LocationActionComponent(e,t,n);case i.ActionType.Call:return new o.CallActionComponent(e,t,n);case i.ActionType.Share:return new o.ShareActionComponent(e,t,n,r);case i.ActionType.SubmitForm:return new o.SubmitFormActionComponent(e,t,n);case i.ActionType.Popup:return new o.PopupActionComponent(e,t,n,s);case i.ActionType.Client:return new o.ClientActionComponent(e,t,n);default:return a.logger.error(`Payload contains wrong action type:${e.type}`),null}}}t.ActionComponentFactory=a,a.logger=new r.Logger("ActionComponentFactory")},5053:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(4049),t),o(s(5340),t)},5340:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.MessageComponentFactory=void 0;const i=s(6246),o=s(5915),r=s(7584);t.MessageComponentFactory=class{static fromMessage(e,t,s,a){let n,c;(0,r.isBotMessage)(s)?(n=o.MESSAGE_SIDE.LEFT,c=s.source||i.SkillMessageSource.Bot):n=o.MESSAGE_SIDE.RIGHT;const l=s.messagePayload;switch(l.type){case i.MessageType.Postback:case i.MessageType.Text:return l.channelExtensions&&"stars"===l.channelExtensions.displayType?new o.FeedbackComponent(e,t,l,n,c,a):new o.TextMessageComponent(e,t,l,n,c,a);case i.MessageType.TextStream:return new o.TextStreamMessageComponent(e,t,l,n,c,a);case i.MessageType.Error:return new o.ErrorMessageComponent(e,t,l,n,c,a);case i.MessageType.Attachment:return new o.AttachmentMessageComponent(e,t,l,n,c,a);case i.MessageType.Card:return new o.CardMessageComponent(e,t,l,n,c,a);case i.MessageType.Location:return new o.LocationMessageComponent(e,t,l,n,c,a);case i.MessageType.Table:return new o.TableMessageComponent(e,t,l,n,c,a);case i.MessageType.Form:return new o.FormMessageComponent(e,t,l,n,c,a);case i.MessageType.TableForm:return new o.TableFormMessageComponent(e,t,l,n,c,a);case i.MessageType.EditForm:return new o.EditFormMessageComponent(e,t,l,n,c,a);case i.MessageType.Raw:return new o.RawMessageComponent(e,t,l,n,c,a);default:throw Error(`Wrong message payload type:${l.type}`)}}}},9501:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.HotkeysManager=void 0;const i=s(6064),o="keydown";t.HotkeysManager=class{constructor(e){var t;this.sl=new Map,this.il=!0,this.ol=e=>{if(r(e)&&this.rl(e.code)){const e=document.querySelector(this.al);if(e){const t=e.value.length;setTimeout((()=>{e.value.length>t&&(e.value=e.value.slice(0,t))}))}}};const s=null!==(t=e.name)&&void 0!==t?t:"oda-chat";this.al=`.${s}-user-input`}add(e,t,s=!0){this.il&&(this.cl(),this.il=!1);const i=e.toUpperCase(),o=isNaN(i)?`Key${i}`:`Digit${i}`;this.sl.set(o,{check:s,elem:t}),t.setAttribute("aria-keyshortcuts",`Alt+${i}`)}setWidget(e){this.mn=e}remove(){document.removeEventListener(o,this.ol)}cl(){document.addEventListener(o,this.ol)}rl(e){let t=!1;const s=this.sl.get(e),o=s&&s.elem;return o&&(0,i.isVisible)(s.check?this.mn:o)&&!o.disabled&&(o.focus(),o.click(),t=!0),t}};const r=e=>e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.repeat},9780:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(5053),t),o(s(9501),t),o(s(6893),t),o(s(3751),t),o(s(7584),t),o(s(8052),t),o(s(499),t)},6893:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.Logger=void 0;class s{constructor(e){this.ll=e}debug(...e){this.hl(s.LOG_LEVEL.DEBUG,e)}error(...e){this.hl(s.LOG_LEVEL.ERROR,e)}info(...e){this.hl(s.LOG_LEVEL.INFO,e)}warn(...e){this.hl(s.LOG_LEVEL.WARN,e)}hl(e,t){if(s.logLevel>=e){let i;switch(t.unshift(`[${s.appName}.${s.appVersion}.${this.ll}]`),e){case s.LOG_LEVEL.ERROR:i=console.error;break;case s.LOG_LEVEL.WARN:i=console.warn;break;case s.LOG_LEVEL.INFO:i=console.info;break;case s.LOG_LEVEL.DEBUG:i=console.debug}i.apply(console,t)}}}t.Logger=s,s.LOG_LEVEL={NONE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},s.logLevel=s.LOG_LEVEL.NONE},3751:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},7584:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.isBotMessage=function(e){return!!e.source},t.getMessageDigest=function(e){if(e.msgId)return e.msgId;const t=JSON.stringify(e.messagePayload);return`${s(t)}`};const s=e=>{let t=0,s=0;const i=Math.pow(9,9);for(;t<e.length;)s=Math.imul(s^e.charCodeAt(t++),i);return s^s>>>9}},8052:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.WidgetTheme=t.StorageType=t.ShareCategory=void 0;t.StorageType={SESSION:"sessionStorage",LOCAL:"localStorage",CUSTOM:"custom"};t.WidgetTheme={CLASSIC:"classic",DEFAULT:"default",REDWOOD_DARK:"redwood-dark"};t.ShareCategory={AUDIO:"audio",FILE:"file",LOCATION:"location",VISUAL:"visual"}},499:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.StorageService=void 0;const i=s(8098);t.StorageService=class{constructor(e){this.getItem=e=>(!this.dl[e]&&this.pl&&(this.dl[e]=this.ul.getItem(e)),this.dl[e]),this.setItem=(e,t)=>{this.pl?(this.ul.setItem(e,t),delete this.dl[e]):this.dl[e]=t},this.removeItem=e=>{this.pl&&this.ul.removeItem(e),delete this.dl[e]},this.dl={},(0,i.isStorageAvailable)(e)?(this.pl=!0,this.ul=window[e]):this.pl=!1}}},5430:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(4413),t),o(s(2366),t),o(s(6992),t),o(s(4557),t),o(s(9780),t),o(s(5915),t),o(s(2854),t)},9836:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.ActionComponent=void 0;const o=s(6246),r=s(8098);t.ActionComponent=class{constructor(e,t,s){var r,a;this.action=e,this.util=t,this.le=s,this.gl=!1,this.ml=()=>({getPayload:this.bl,label:this.fl,imageUrl:this.vl||this.wl,type:this.xl}),this.bl=()=>i(this,void 0,void 0,(function*(){return this.action})),this.xl=e.type,this.fl=e.label,this.wl=e.imageUrl,this.kl=e.style,this.yl=e.tooltip,this._l=e.displayType,this.vl=null===(r=e.channelExtensions)||void 0===r?void 0:r.activeImageUrl,this.Ol=null===(a=e.channelExtensions)||void 0===a?void 0:a.c2kText,this.xl!==o.ActionType.SubmitForm||this.kl||(this.kl=o.ActionStyle.Primary)}render(){const e=this.util,t=e.createButton(["action-postback",this.kl===o.ActionStyle.Primary?"primary":this.kl===o.ActionStyle.Danger?"danger":""]);if(this._l===o.ActionDisplayType.Icon&&e.addCSSClass(t,o.ActionDisplayType.Icon),t.onclick=this.handleOnClick.bind(this),this.wl&&t.appendChild(e.createImageIcon({icon:this.wl,iconCss:["action-image"]})),this.fl){const s=(0,r.linkify)(this.fl,e.cssPrefix),i=e.createTextDiv();if(this._l===o.ActionDisplayType.Link){const o=e.createAnchor("",s);o.onclick=e=>e.preventDefault(),i.appendChild(o),e.addCSSClass(t,"display-link")}else this.Ol?(i.innerHTML=String.fromCharCode(parseInt(this.fl)+10111),e.addCSSClass(t,"c2k-action"),t.addEventListener("mouseover",(()=>{i.innerHTML=String.fromCharCode(parseInt(this.fl)+10121);for(const t of Array.from(document.getElementsByClassName(this.Ol)))e.addCSSClass(t,"highlight")})),t.addEventListener("mouseleave",(()=>{i.innerHTML=String.fromCharCode(parseInt(this.fl)+10111);for(const t of Array.from(document.getElementsByClassName(this.Ol)))e.removeCSSClass(t,"highlight")}))):i.innerHTML=s;t.appendChild(i)}if(this.gl&&e.addCSSClass(t,"disabled"),this.yl){const s=e.createDiv(["action-wrapper"]),i=e.createDiv(),o=e.createTextDiv(["tooltip","none"]);return o.innerText=this.yl,o.setAttribute("role","tooltip"),i.appendChild(o),s.appendChild(t),s.appendChild(i),s}return this.jl=t,t}disable(){this.gl=!0,this.jl&&(this.util.addCSSClass(this.jl,"disabled"),this.jl.disabled=!0)}enable(){this.gl=!1,this.jl&&(this.util.removeCSSClass(this.jl,"disabled"),this.jl.disabled=!1)}getActionType(){return this.xl}handleOnClick(e){var t,s;if(this.gl)return;const i=this.ml();if(this.vl){const e=this.util.createImage(this.vl,["action-image"],this.fl||"");this.jl.lastElementChild.replaceWith(e)}null===(s=(t=this.le).onMessageActionClicked)||void 0===s||s.call(t,i)}}},8183:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.CallActionComponent=void 0;const o=s(9836);class r extends o.ActionComponent{constructor(e,t,s){super(e,t,s),this.bl=()=>i(this,void 0,void 0,(function*(){return this.Ml})),this.Ml=e.phoneNumber}render(){const e=this.util,t=super.render();"button"===t.tagName.toLowerCase()?e.addCSSClass(t,"action-call"):e.addCSSClass(t.firstElementChild,"action-call");const s=e.createAnchor(`tel:${this.Ml}`,"");return t.onclick=()=>{s.click()},t}}t.CallActionComponent=r},4674:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.ClientActionComponent=void 0;const o=s(6246),r=s(8098),a=s(9836);class n extends a.ActionComponent{constructor(e,t,s){super(e,t,s),this.la=e,this.zl=!1,this.ml=()=>Object.assign({getPayload:this.bl,label:this.fl,type:this.xl,actionType:this.la.actionType},this.la.actionType===o.ClientActionType.COPY_MESSAGE_TEXT&&{onSuccess:this.$l}),this.bl=()=>i(this,void 0,void 0,(function*(){return this.la})),this.$l=()=>{if(this.zl)return;this.zl=!0;const e=this.jl,t=this.util,s=e.querySelector("img, svg"),i=this.util.createImageIcon({icon:r.iconCheck,iconCss:["action-image"]}),o=(o=!0)=>{const r=o?s:i,a=o?i:s;r&&(t.removeCSSClass(r,"icon-enter"),t.addCSSClass(r,"icon-exit"),setTimeout((()=>r.remove()),200)),a?setTimeout((()=>{e.prepend(a),t.removeCSSClass(a,"icon-exit"),t.addCSSClass(a,"icon-enter"),setTimeout((()=>{this.zl=!1}),2e3)}),r?200:0):this.zl=!1};o(),setTimeout((()=>o(!1)),2e3)}}render(){const e=this.util,t=super.render();return"button"===t.tagName.toLowerCase()?e.addCSSClass(t,"action-client"):e.addCSSClass(t.firstElementChild,"action-client"),t}}t.ClientActionComponent=n},7007:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(9836),t),o(s(8183),t),o(s(4674),t),o(s(170),t),o(s(301),t),o(s(9e3),t),o(s(6670),t),o(s(2183),t),o(s(9328),t)},170:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.LocationActionComponent=void 0;const o=s(6246),r=s(9836);class a extends r.ActionComponent{constructor(){super(...arguments),this.bl=()=>i(this,void 0,void 0,(function*(){return(0,o.getCurrentPosition)()}))}render(){const e=this.util,t=super.render();return"button"===t.tagName.toLowerCase()?e.addCSSClass(t,"action-location"):e.addCSSClass(t.firstElementChild,"action-location"),t}handleOnClick(e){super.handleOnClick(e),e.preventDefault(),e.stopPropagation()}}t.LocationActionComponent=a},301:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.PopupActionComponent=void 0;const o=s(8098),r=s(9836);class a extends r.ActionComponent{constructor(e,t,s,o){super(e,t,s),this.ei=o,this.bl=()=>i(this,void 0,void 0,(function*(){return this.Cl})),this.Cl=e.popupContent}render(){const e=this.util,t=super.render();"button"===t.tagName.toLowerCase()?e.addCSSClass(t,"action-popup"):e.addCSSClass(t.firstElementChild,"action-popup");const s=(0,o.getPopupContent)(e,this.Cl,this.ei,this.le);return document.body.appendChild(s),this.xs=s,t}handleOnClick(){const e=this.xs;this.util.removeCSSClass(e,"none"),e.querySelector("button").focus()}}t.PopupActionComponent=a},9e3:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.PostbackActionComponent=void 0;const o=s(9836);class r extends o.ActionComponent{constructor(e,t,s){super(e,t,s),this.bl=()=>i(this,void 0,void 0,(function*(){return this.Sl})),this.Sl=e.postback}handleOnClick(e){super.handleOnClick(e),e.preventDefault(),e.stopPropagation()}}t.PostbackActionComponent=r},6670:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.ShareActionComponent=void 0;const o=s(9836);class r extends o.ActionComponent{constructor(e,t,s,o){super(e,t,s),this.Il=o,this.bl=()=>i(this,void 0,void 0,(function*(){return this.Il}))}render(){const e=this.util,t=super.render();return"button"===t.tagName.toLowerCase()?e.addCSSClass(t,"action-share"):e.addCSSClass(t.firstElementChild,"action-share"),t}handleOnClick(e){super.handleOnClick(e),e.preventDefault(),e.stopPropagation()}}t.ShareActionComponent=r},2183:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.SubmitFormActionComponent=void 0;const o=s(9836);class r extends o.ActionComponent{constructor(e,t,s){super(e,t,s),this.bl=()=>i(this,void 0,void 0,(function*(){return this.Sl})),this.Sl=e.postback}}t.SubmitFormActionComponent=r},9328:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.UrlActionComponent=void 0;const o=s(9836);class r extends o.ActionComponent{constructor(e,t,s,o=!1,r){super(e,t,s),this.Tl=o,this.Al=r,this.bl=()=>i(this,void 0,void 0,(function*(){return this.X})),this.X=e.url}render(){const e=this.util,t=super.render();if("button"===t.tagName.toLowerCase()?e.addCSSClass(t,"action-url"):e.addCSSClass(t.firstElementChild,"action-url"),this.X){const s=e.createAnchor(this.X,"",[],this.Tl,this.Al);t.onclick=()=>{s.click()}}return t}}t.UrlActionComponent=r},5601:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.AttachmentMessageComponent=void 0;const i=s(6246),o=s(5686),r=s(8216);class a extends r.MessageComponent{static fromPayload(e,t,s,r,a,n=!1){if(a&&a.authToken&&a.uri&&s.url.includes(a.uri)&&!this.El.test(s.url)){const e=null==a?void 0:a.authToken;(null==e?void 0:e.length)&&(s.url=`${s.url}?token=${e}`)}switch(s.type){case i.AttachmentType.Image:return new o.ImageAttachmentComponent(e,t,s,r,n);case i.AttachmentType.Video:return new o.VideoAttachmentComponent(e,t,s,r,n);case i.AttachmentType.Audio:return new o.AudioAttachmentComponent(e,t,s,r,n);case i.AttachmentType.File:return new o.FileAttachmentComponent(e,t,s,r,n);default:throw Error("Payload contains wrong attachment type")}}constructor(e,t,s,i,o,r){super(e,t,s,i,o,r),this.Pl=a.fromPayload(e,t,s.attachment,i,r,this.hasActions())}getContent(){return super.getContent(this.Pl.render())}}t.AttachmentMessageComponent=a,a.El=/token=[a-z\.\d]+/i},944:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.AttachmentComponent=void 0;const i=s(6246),o=s(8098),r=s(8216);t.AttachmentComponent=class{static capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}constructor(e,t,s,i,o){this.settings=e,this.util=t,this.side=i,this.Ll=o,this.X=s.url,this.xl=s.type;const r=s.url.split("/");this.Ic=s.title||decodeURI(r[r.length-1]),this.Fl=s.filename}Rl(e,t){const s=this.util,i=this.settings,r=s.createAnchor(e,""),a=s.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:i.icons.download||o.iconDownload,iconCss:["attachment-download-icon"],title:i.i18n[i.locale].download});return r.setAttribute("download",t||""),r.appendChild(a),r}createAttachment(e,t){const s=this.util,a=this.settings,n=s.createDiv(["attachment"]),c=s.createDiv(["attachment-placeholder","flex"]),l=s.createDiv(["attachment-icon"]),h=s.createImageIcon({icon:e});l.appendChild(h);const d=this.Ic,p=s.createDiv(["attachment-footer","flex",this.Ll&&"with-actions"]),u=s.createLabel(["attachment-title"]),g=s.createDiv(["attachment-controls","flex"]);if(u.innerText=d,u.setAttribute("title",d),p.appendChild(u),this.xl===i.AttachmentType.Image){const e=s.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:a.icons.expandImage||o.iconZoom,iconCss:["attachment-expand-icon"],title:a.i18n[a.locale].imageViewerOpen});e.onclick=()=>{this.createImagePreview(this.X,d)},g.appendChild(e)}if(this.side===r.MESSAGE_SIDE.LEFT&&g.appendChild(this.Rl(this.X,this.Fl)),t)switch(c.appendChild(t),t.onerror=()=>{t.remove(),c.appendChild(l)},this.xl){case i.AttachmentType.Image:t.onload=()=>{t.clientHeight>o.ATTACHMENT_MAX_HEIGHT&&(c.style.alignItems="flex-start"),p.appendChild(g)},t.onclick=()=>{this.createImagePreview(this.X,this.Ic)};break;case i.AttachmentType.Audio:case i.AttachmentType.Video:t.onloadeddata=()=>{p.appendChild(g)}}else c.appendChild(l),p.appendChild(g);return n.appendChild(c),null==n||n.appendChild(p),n}createImagePreview(e,t){const s=this.util,i="image-preview",r=this.settings,a=s.createDiv([`${i}-wrapper`]),n=s.createImage(e,[i]),c=s.createLabel([`${i}-title`]);c.innerText=t;const l=document.querySelector(`.${this.settings.name}-wrapper`),h=r.icons.close||o.iconClose,d=s.createIconButton({css:[`${i}-close`],icon:h,iconCss:[`${i}-close-icon`],title:r.i18n[r.locale].imageViewerClose});d.onclick=()=>{a.remove()},d.onkeydown=e=>{"Tab"===e.code&&(a.focus(),e.preventDefault())};const p=s.createDiv([`${i}-header`]);p.appendChild(c),p.appendChild(d),a.appendChild(p),a.appendChild(n),a.setAttribute("tabindex","-1"),a.onkeydown=e=>{"Escape"===e.code&&a.remove()},l.appendChild(a),a.focus()}}},6841:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.AudioAttachmentComponent=void 0;const i=s(8098),o=s(8216),r=s(944);class a extends r.AttachmentComponent{render(){const e=this.util,t=this.settings,s=t.icons.fileAudio||i.iconAudio,r=e.createMedia("video",this.X,["attachment-audio"]);r.controls=!0,r.preload="metadata",o.MESSAGE_SIDE.RIGHT===this.side&&r.setAttribute("controlsList","nodownload");const a=`<a href="${this.X}">`,n=t.i18n[t.locale].attachmentAudioFallback.replace("{0}",a).replace("{/0}","</a>");return r.innerHTML=n,t.linkHandler?(0,i.setEmbeddedLinksHandler)(r,t.linkHandler):t.openLinksInNewWindow&&(0,i.setLinksOpenInNewWindow)(r),this.createAttachment(s,r)}}t.AudioAttachmentComponent=a},9039:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.FileAttachmentComponent=void 0;const i=s(8098),o=s(944);class r extends o.AttachmentComponent{render(){const e=this.settings.icons.fileGeneric||i.iconFile;return this.createAttachment(e)}}t.FileAttachmentComponent=r},1748:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.ImageAttachmentComponent=void 0;const i=s(8098),o=s(944);class r extends o.AttachmentComponent{render(){const e=this.util,t=this.settings.icons.fileImage||i.iconImage,s=e.createImage(this.X,["attachment-image"],this.Ic);return this.createAttachment(t,s)}}t.ImageAttachmentComponent=r},5686:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(944),t),o(s(6841),t),o(s(9039),t),o(s(1748),t),o(s(9210),t)},9210:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.VideoAttachmentComponent=void 0;const i=s(8098),o=s(8216),r=s(944);class a extends r.AttachmentComponent{render(){const e=this.util,t=this.settings,s=this.X,r=t.icons.fileVideo||i.iconVideo,a=(0,i.getEmbeddedVideo)(s,e.cssPrefix);if(a){const t=e.createElement("span");return t.innerHTML=a,t}const n=e.createMedia("video",this.X,["attachment-video"]);n.controls=!0,n.preload="metadata",o.MESSAGE_SIDE.RIGHT===this.side&&n.setAttribute("controlsList","nodownload");const c=`<a href="${this.X}">`,l=t.i18n[t.locale].attachmentVideoFallback.replace("{0}",c).replace("{/0}","</a>");return n.innerHTML=l,this.settings.linkHandler?(0,i.setEmbeddedLinksHandler)(n,t.linkHandler):this.settings.openLinksInNewWindow&&(0,i.setLinksOpenInNewWindow)(n),this.createAttachment(r,n)}}t.VideoAttachmentComponent=a},4773:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.C2SQLBaseMessageComponent=void 0;const i=s(6246),o=s(8216);class r extends o.MessageComponent{constructor(e,t,s,i,o,r){super(e,t,s,i,o,r),this.Dl=[],this.cssPrefix=e.name,this.le=r,this.la=s}disableActions(){super.disableActions(),this.Dl.forEach((e=>{e.disable()}))}disablePostbacks(){super.disablePostbacks(),(0,o.getPostActions)(this.Dl).forEach((e=>{e.disable()}))}enableActions(){super.enableActions(),this.Dl.forEach((e=>{e.enable()}))}enablePostbacks(){super.enablePostbacks(),(0,o.getPostActions)(this.Dl).forEach((e=>{e.enable()}))}render(){return super.render()}getHeader(){const e=this.util,t=super.getHeader();return e.addCSSClass(t,"message-header-yellow"),t}getContent(e){const t=this.util,s="message-bubble",o=this.la.type,r=t.createDiv([s]);o===i.MessageType.Table||o===i.MessageType.TableForm?t.addCSSClass(r,`${s}-tabular-message`):t.addCSSClass(r,`${s}-form-message`,o===i.MessageType.EditForm?"edit-form-message":""),e&&r.appendChild(e);const a=this.getPageStatus();return a&&r.appendChild(a),r}getPageStatus(){const e=this.util;let t;const s=this.la.paginationInfo;return s&&s.totalCount>s.rangeSize&&(t=e.createTextDiv(["results-page-status"]),t.innerText=s.status),t}}t.C2SQLBaseMessageComponent=r},1875:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.EditFormMessageComponent=void 0;const i=s(6246),o=s(6064),r=s(8098),a=s(9780),n=s(4773),c=s(3276),l=s(9608),h="aria-expanded",d="";class p extends n.C2SQLBaseMessageComponent{constructor(){super(...arguments),this.Nl=0,this.Hl=0,this.Vl=[],this.ys=new a.Logger("EditFormMessageComponent"),this.Ul={},this.ni=Object.assign(Object.assign({},this.settings.i18n.en),this.settings.i18n[this.settings.locale])}disableActions(){super.disableActions(),u(this.Bl,this.Vl,this.util)}disablePostbacks(){super.disablePostbacks(),u(this.Bl,this.Vl,this.util)}enableActions(){super.enableActions(),u(this.Bl,this.Vl,this.util,!1)}enablePostbacks(){super.enablePostbacks(),u(this.Bl,this.Vl,this.util,!1)}getContent(){const e=this.la,t=this.settings,s=this.util,o="form-message",r=`${o}-item`,a=s.createDiv([o]),n=s.createDiv([r]);if(e.title){const t=s.createTextDiv([`${o}-header`]);t.innerText=e.title,a.appendChild(t)}return(0,i.isEditFormPayloadWithFields)(e)?(e.formColumns>2&&(e.formColumns=2),e.fields.filter((e=>e)).forEach((t=>{n.appendChild(this.Wl(t,o,!1,e.formColumns))}))):e.formRows.forEach((e=>{const i=(0,l.getFormRow)(e,this.Dl,s,t,this.shareText,this.le),r=e.columns.length;e.columns.forEach((e=>{const t=(0,l.getFormRowColumn)(e,s);e.fields.filter((e=>e)).forEach((s=>{t.appendChild(this.Wl(s,o,!0)),(0,l.setMaxColumnWidth)(e.width,s.displayType,t,r)})),i.appendChild(t)})),n.appendChild(i)})),this.actions.concat(this.Dl).some((e=>e.getActionType()===i.ActionType.SubmitForm))||this.ys.error("Payload does not contain submit-form action"),this.ql(n,e.errorMessage||(this.Hl&&this.Nl>1?this.translations.editFormErrorMessage:d),!0),a.appendChild(n),this.Gl=n,super.getContent(a)}validateForm(){var e;let t=!0;return null===(e=this.Bl)||void 0===e||e.remove(),this.Vl.forEach((e=>{t=this.Zl(e)&&t})),!t&&this.Nl>1&&this.ql(this.Gl,this.translations.editFormErrorMessage,!0),t}getSubmittedFields(){return this.Vl.filter((e=>{const t=e.tagName.toLowerCase();return"textarea"===t&&(this.Ul[e.id]=e.value),"input"===t})).forEach((e=>{const t=e;switch(t.type){case"checkbox":this.Ul[t.id]=t.checked?t.getAttribute("valueOn"):t.getAttribute("valueOff");break;case"number":this.Ul[t.id]=t.valueAsNumber;break;default:this.Ul[t.id]=t.value}})),this.Ul}Wl(e,t,s,o){const r=this.shareText,a=this.util;if(this.Nl++,(0,i.isReadOnlyField)(e)){const t=new c.FieldComponent(this.settings,a,e,r,this.le,o);return t.isColumnField=s,t.action&&this.Dl.push(t.action),t.render()}return s?(0,c.applyMarginTop)(this.Yl(e,o,t,a),e.marginTop,a):this.Yl(e,o,t,a)}Yl(e,t,s,a){var n,l,p,u,g;const m=`${s}-field`,b=[m,`${m}-col-${t}`,`edit-${m}`],f=a.createDiv(b),v=a.createDiv([`${s}-key`,"with-margin"]),{labelFontSize:w,labelFontWeight:x,id:k,displayType:y,placeholder:_,required:O,clientErrorMessage:j,serverErrorMessage:M,autoSubmit:z}=e;let $,C,S;switch(v.innerHTML=e.label||d,(0,c.applyFontStyles)(v,w,x,a),f.appendChild(v),y){case i.DisplayType.SingleSelect:const t=e;if(C=t.defaultValue,S=t.layoutStyle,C&&(this.Ul[k]=C),S&&"list"!==S)if("radioGroup"===S){const e=a.createElement("form",[`${s}-value`,"form-container","col"]);a.setAttributes(e,{id:k,ariaLabel:y,errorMsg:j}),e.onclick=e=>e.stopPropagation(),t.options.forEach((t=>{const s=a.createInputElement({type:"radio",name:k,value:t.label,required:O,checked:t.value===C},["radio-input"]);s.onchange=()=>{s.checked&&(this.Ul[k]=t.value),this.Jl(k,z,e)};const i=a.createLabel();i.innerText=t.label,i.prepend(s),e.appendChild(i)})),this.Vl.push(e),f.appendChild(e),this.Kl(e,O),this.ql(e,M)}else this.ys.error(`Payload contains wrong layout style:${S} for single select field`);else{const e=a.createDiv(["select-wrapper",`${s}-value`]),i=a.createInputElement({type:"text",placeholder:_,required:O,id:k,autocomplete:"off"},[`${s}-value`]),c=a.createDiv(),l=a.createDiv(["listbox","popup","none"]),p=a.createElement("ul",["single-select-list"]),u=p.getElementsByTagName("li"),g=a.createIconButton({css:["select-icon"],icon:r.iconCaretDown,iconCss:[],title:d}),m=t=>{"true"!==e.getAttribute(h)||c.contains(t.target)||(w||(i.value=d),v(!1))},b=()=>{"false"===e.getAttribute(h)&&(e.setAttribute(h,"true"),a.removeCSSClass(l,"none"),setTimeout((()=>document.addEventListener("click",m))),i.focus())},v=(t=!0)=>{"true"===e.getAttribute(h)&&(w&&(i.value=w.textContent||w.innerText),e.setAttribute(h,"false"),a.addCSSClass(l,"none"),document.removeEventListener("click",m),this.Xl(d,u,x),t&&i.focus())};let w,x=[];a.setAttributes(e,{errorMsg:j}),e.setAttribute(h,"false"),e.setAttribute("aria-label",y),e.onclick=e=>{e.stopPropagation(),b()},e.oninput=()=>{this.Xl(i.value,u,x)?b():v()},e.onkeydown=e=>{var t;const s=e.key;s===o.KeyCode.Down||s===o.KeyCode.Up?!w||w.classList.contains(`${this.cssPrefix}-none`)?null===(t=x[0])||void 0===t||t.focus():null==w||w.focus():s!==o.KeyCode.Esc&&s!==o.KeyCode.Tab||v()},i.onfocus=()=>a.addCSSClass(e,"focus"),i.onblur=()=>a.removeCSSClass(e,"focus"),g.onclick=t=>{t.stopPropagation(),"true"===e.getAttribute(h)?v():b()},null===(n=t.options)||void 0===n||n.forEach((t=>{const s=a.createListItem(t.label,t.label,t.label,d,d,(()=>{a.addCSSClass(s,"selected"),w&&a.removeCSSClass(w,"selected"),w=s,v(),this.Ul[k]=t.value,this.Jl(k,z,e)}),!1,!1);s.onkeydown=e=>this.Ql(e,s,p,i,x),t.value===C&&(a.addCSSClass(s,"selected"),w=s,i.value=t.label),p.appendChild(s)})),x=Array.from(u),c.onclick=e=>e.stopPropagation(),e.appendChild(i),e.appendChild(g),l.appendChild(p),c.appendChild(l),f.appendChild(e),f.appendChild(c),this.Vl.push(e),this.eh(i.parentElement,O),this.ql(i,M)}break;case i.DisplayType.MultiSelect:const c=e;if(C=c.defaultValue,S=c.layoutStyle,this.Ul[k]=C||[],S&&"list"!==S)if("checkboxes"===S){const e=a.createElement("form",[`${s}-value`,"form-container","col"]);a.setAttributes(e,{id:k,ariaLabel:y,errorMsg:j,ariaRequired:O?"true":"false"}),e.onclick=e=>e.stopPropagation(),c.options.forEach((t=>{const s=a.createInputElement({type:"checkbox",name:k,value:t.label,checked:null==C?void 0:C.includes(t.value),required:O},["radio-input"]),i=a.createLabel();i.innerText=t.label,i.prepend(s),s.onchange=()=>{if(s.checked)this.Ul[k].push(t.value);else{const e=this.Ul[k];e.splice(e.indexOf(t.value),1)}this.Jl(k,z,e)},e.appendChild(i)})),this.Vl.push(e),f.appendChild(e),this.Kl(e,O),this.ql(e,M)}else this.ys.error(`Payload contains wrong layout style:${S} for multi select field`);else{const e=a.createDiv([`${s}-value`,"text-field-container"]),t=a.createElement("ul",["selected-options"]),i=a.createDiv(),n=a.createDiv(["listbox","popup","none"]),p=[],u=a.createDiv(["filter-message-box"]),g=a.createDiv(["filter-message-text","none"]),m=a.createInputElement({type:"text"},[`${s}-value`,"listbox-search","none"]),b=a.createElement("ul",["multi-select-list"]),v=b.getElementsByTagName("li"),w=a.createDiv(["search-icon-wrapper","none"]),x=a.createImageIcon({icon:r.iconSearch,iconCss:["search-icon"]});g.textContent=this.translations.noResultText,u.appendChild(g),m.oninput=()=>this.Xl(m.value,v,p)?a.addCSSClass(g,"none"):a.removeCSSClass(g,"none"),m.onkeydown=t=>{var s;const i=t.key;i===o.KeyCode.Down?(this.Xl(m.value,v,p),null===(s=p[0])||void 0===s||s.focus()):i!==o.KeyCode.Esc&&i!==o.KeyCode.Tab||e.click()},_&&t.setAttribute("data-placeholder",_),e.setAttribute(h,"false");const y=t=>{"true"!==e.getAttribute(h)||i.contains(t.target)||$()},$=()=>{e.setAttribute(h,"false"),a.addCSSClass(n,"none"),document.removeEventListener("click",y),m.value=d,this.Xl(m.value,v,p),a.addCSSClass(m,"none"),a.addCSSClass(w,"none"),a.addCSSClass(g,"none")};e.onclick=t=>{if(t.stopPropagation(),"true"===e.getAttribute(h))$(),e.focus();else{e.setAttribute(h,"true"),a.removeCSSClass(n,"none");const t=b.firstElementChild;t?t.focus():a.removeCSSClass(g,"none"),setTimeout((()=>document.addEventListener("click",y)))}},e.onkeydown=t=>{const s=t.code;t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||s===o.KeyCode.Esc||s===o.KeyCode.Tab||(e.click(),a.removeCSSClass(m,"none"),a.removeCSSClass(w,"none"),m.focus())},a.setAttributes(e,{id:k,ariaRequired:O?"true":"false"}),e.tabIndex=0,j&&e.setAttribute("data-error",j),null===(l=c.options)||void 0===l||l.forEach((s=>{const i=i=>{const o=a.createDiv(["multi-select-option"]);o.innerText=s.label;const n=a.createImageIcon({icon:r.iconClose,iconCss:["opt-close"]});n.onclick=()=>{t.removeChild(o),b.appendChild(i);const r=this.Ul[k];r.splice(r.indexOf(s.value),1),this.Jl(k,z,e)},o.appendChild(n),o.onclick=t=>{t.stopPropagation(),"true"===e.getAttribute(h)&&e.click()},t.appendChild(o)},o=a.createListItem(s.label,s.label,s.label,d,d,(()=>{e.click(),b.removeChild(o),this.Ul[k].push(s.value),i(o),this.Jl(k,z,e)}),!1,!1);o.onkeydown=t=>this.Ql(t,o,b,e,p),(null==C?void 0:C.includes(s.value))?i(o):b.appendChild(o)})),i.onclick=e=>e.stopPropagation(),e.appendChild(t),this.Vl.push(e),f.appendChild(e),w.appendChild(x),n.appendChild(u),n.appendChild(m),n.appendChild(w),n.appendChild(b),i.appendChild(n),f.appendChild(i),this.eh(e,O),this.ql(e,M)}break;case i.DisplayType.Toggle:const m=e,b=a.createLabel([`${s}-value`,"toggle"]);b.tabIndex=0,b.onclick=e=>e.stopPropagation(),$=a.createInputElement({id:k,placeholder:_,required:O,type:"checkbox",checked:m.defaultValue===m.valueOn,errorMsg:j,valueOn:m.valueOn,valueOff:m.valueOff});const v=m.labelOn||m.valueOn,w=m.labelOff||m.valueOff;$.setAttribute("aria-label",$.checked?v:w),$.oninput=()=>{$.setAttribute("aria-label",$.checked?v:w),this.Jl(k,z,$)},b.appendChild($),b.appendChild(a.createDiv(["round-slider"])),f.appendChild(b),this.ql($.parentElement,M);break;case i.DisplayType.DatePicker:const x=e;$=a.createInputElement({type:"date",id:k,title:_,required:O,defaultValue:x.defaultValue,min:x.minDate,max:x.maxDate,errorMsg:j},[`${s}-value`]);break;case i.DisplayType.TimePicker:const I=e;$=a.createInputElement({type:"time",id:k,title:_,required:O,defaultValue:I.defaultValue,min:I.minTime,max:I.maxTime,errorMsg:j},[`${s}-value`]);break;case i.DisplayType.TextInput:const T=e;if(T.multiLine){const e=a.createElement("textarea",["textarea",`${s}-value`],!0);a.setAttributes(e,{id:k,required:O,minLength:T.minLength,maxLength:T.maxLength,defaultValue:T.defaultValue,placeholder:T.placeholder,errorMsg:j}),e.rows=3,e.onchange=()=>this.Jl(k,z,e),e.onclick=e=>e.stopPropagation(),f.appendChild(e),this.Vl.push(e),this.eh(e,O),this.ql(e,M)}else $=a.createInputElement({type:T.inputStyle||"text",id:k,placeholder:_,required:O,defaultValue:T.defaultValue,errorMsg:j,minLength:T.minLength,maxLength:T.maxLength,pattern:T.validationRegularExpression},[`${s}-value`]);break;case i.DisplayType.NumberInput:const A=e;$=a.createInputElement({type:"number",id:k,placeholder:_,required:O,defaultValue:null===(p=A.defaultValue)||void 0===p?void 0:p.toString(),min:null===(u=A.minValue)||void 0===u?void 0:u.toString(),max:null===(g=A.maxValue)||void 0===g?void 0:g.toString(),errorMsg:j},[`${s}-value`]);break;default:this.ys.error(`Payload contains wrong display type:${y} for editable field`)}return $&&("checkbox"!==$.type&&(f.appendChild($),this.eh($,O),this.ql($,M),$.onchange=()=>this.Jl(k,z,$),$.onclick=e=>e.stopPropagation()),this.Vl.push($)),f}Zl(e,t=!1){const s=e.dataset.error;let o,r=e.nextElementSibling,a=!0;switch(e.tagName.toLowerCase()){case"form":const t=e,n=t.querySelector("input"),c=t.getAttribute("aria-label");if(c===i.DisplayType.MultiSelect&&"true"===t.ariaRequired){this.Ul[t.id].length||(a=!1,o=s||(null==n?void 0:n.validationMessage))}else c!==i.DisplayType.SingleSelect||t.checkValidity()||(a=!1,o=s||(null==n?void 0:n.validationMessage));break;case"input":const l=e;"checkbox"===l.type?r=r.parentElement.nextElementSibling:l.checkValidity()||(o=s||l.validationMessage,a=!1);break;case"textarea":const h=e;h.checkValidity()||(o=s||h.validationMessage,a=!1);break;case"div":const d=e;if(r=r.nextElementSibling,d.getAttribute("aria-label")===i.DisplayType.SingleSelect){const e=d.firstElementChild;a=!e.required||Boolean(this.Ul[e.id]),a||(o=s||e.validationMessage);break}"true"===d.getAttribute("aria-required")&&(o=s,a=Boolean(this.Ul[e.id].length))}return(()=>{t||("SPAN"===(null==r?void 0:r.tagName)&&(this.util.removeCSSClass(e.parentElement,"error"),r.remove(),this.Hl--),a||this.ql(e,o||this.translations.editFieldErrorMessage))})(),a}Xl(e,t,s){const i=this.util;s.length=0;for(let o=0;o<t.length;o++){const r=t[o],a=r.querySelector("span"),n=r.textContent||r.innerText;n.toLowerCase().indexOf(e.toLowerCase())<0?(i.addCSSClass(r,"none"),a.innerHTML=n.replace(/(<b>)|(<\/b>)/g,d)):(a.innerHTML=e?n.replace(new RegExp(`${e}`,"gi"),"<b>$&</b>"):n.replace(/(<b>)|(<\/b>)/g,d),i.removeCSSClass(r,"none"),s.push(r))}return s.length>0}Ql(e,t,s,i,r){var a,n,c,l;const h=this.cssPrefix,d=r.indexOf(t),p=r.length;let u=!1;if(!(e.ctrlKey||e.altKey||e.metaKey)){if(e.shiftKey&&e.code===o.KeyCode.Tab)i.click();else switch(e.code){case o.KeyCode.Return:case o.KeyCode.Space:t.click(),u=!0;break;case o.KeyCode.Esc:case o.KeyCode.Tab:i.click(),e.code===o.KeyCode.Esc&&(i.focus(),u=!0);break;case o.KeyCode.Up:const g=t.previousElementSibling||s.lastElementChild;g.classList.contains(`${h}-none`)?null===(a=r[(d+p-1)%p])||void 0===a||a.focus():g.focus(),u=!0;break;case o.KeyCode.Down:const m=t.nextElementSibling||s.firstElementChild;m.classList.contains(`${h}-none`)?null===(n=r[(d+1)%p])||void 0===n||n.focus():m.focus(),u=!0;break;case o.KeyCode.Home:case o.KeyCode.PageUp:const b=s.firstElementChild;b.classList.contains(`${h}-none`)?null===(c=r[0])||void 0===c||c.focus():b.focus(),u=!0;break;case o.KeyCode.End:case o.KeyCode.PageDown:const f=s.lastElementChild;f.classList.contains(`${h}-none`)?null===(l=r[p-1])||void 0===l||l.focus():f.focus(),u=!0;break;default:if(i instanceof HTMLInputElement)i.focus();else{const e=s.previousElementSibling,t=e.previousElementSibling,i=this.util;i.removeCSSClass(t,"none"),i.removeCSSClass(e,"none"),t.focus()}}u&&(e.stopPropagation(),e.preventDefault())}}Jl(e,t,s){if(this.Zl(s)&&t){const t=(0,o.clone)(this.getSubmittedFields());this.Vl.forEach((e=>{this.Zl(e,!0)||delete t[e.id]})),Object.keys(t).forEach((e=>{const s=t[e];Array.isArray(s)?0===s.length&&delete t[e]:0===s||s||delete t[e]}));const s=this.settings.sdkMetadata?Object.assign({version:r.SDK_VERSION},this.settings.sdkMetadata):{version:r.SDK_VERSION};this.le.webCore.sendMessage((0,i.buildUserMessage)({submittedFields:t,partialSubmitField:e,type:i.MessageType.FormSubmission}),{sdkMetadata:s}).then((()=>{const e=this.settings.disablePastActions;"all"===e?this.disableActions():"postback"===e&&this.disablePostbacks()})).catch((e=>this.ys.error("[partialSubmit] Failed to send postback message:",e)))}}ql(e,t,s=!1){if(t){const i=this.util,o=i.createTextSpan(["field-error",s?"form-error":d]),a=i.createImageIcon({icon:r.iconError,iconCss:["form-error-icon"]}),n=i.createTextSpan(["error-text"]);if(n.innerText=t,o.appendChild(a),o.appendChild(n),s)e.appendChild(o),this.Bl=o;else{const t=e.parentElement;i.addCSSClass(t,"error"),t.appendChild(o),this.Hl++}}}eh(e,t){this.th(e,t,!0)}Kl(e,t){this.th(e,t,!1)}th(e,t,s){if(t){const t=this.util,i=t.createTextSpan(["field-required-tip"+(s?"-end":"")]),o=t.createTextSpan(["required-tip-text"]);o.innerText=this.ni.requiredTip,i.appendChild(o);e.parentElement.appendChild(i)}}}function u(e,t,s,i=!0){e&&(i?s.addCSSClass(e,"disabled"):s.removeCSSClass(e,"disabled")),t.forEach((e=>{switch(e.tagName.toLowerCase()){case"form":const t=e.getElementsByTagName("input");i?s.addCSSClass(e,"disabled"):s.removeCSSClass(e,"disabled");for(let e=0;e<t.length;e++){t[e].disabled=i}break;case"input":const o=e;o.disabled=i,"checkbox"===o.type&&(i?s.addCSSClass(e.parentElement,"disabled"):s.removeCSSClass(e.parentElement,"disabled"));break;case"textarea":e.disabled=i;break;case"div":i?(s.addCSSClass(e,"disabled"),s.addCSSClass(e.parentElement,"disabled")):(s.removeCSSClass(e,"disabled"),s.removeCSSClass(e.parentElement,"disabled"))}}))}t.EditFormMessageComponent=p},3276:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.FieldComponent=void 0,t.applyFontStyles=c,t.applyMarginTop=l;const i=s(6246),o=s(6064),r=s(8098),a=s(9780),n=s(8216);function c(e,t,s,i){switch(t){case"large":i.addCSSClass(e,"font-size-lg");break;case"small":i.addCSSClass(e,"font-size-sm");break;default:i.addCSSClass(e,"font-size-md")}switch(s){case"bold":i.addCSSClass(e,"font-weight-bold");break;case"light":i.addCSSClass(e,"font-weight-light");break;default:i.addCSSClass(e,"font-weight-md")}}function l(e,t,s){let i="";switch(t){case"none":break;case"medium":i="margin-top-md";break;case"large":i="margin-top-lg";break;default:i="margin-top-default"}return i&&s.addCSSClass(e,i),e}function h(e,t,s,i,o){if(t){const r=a.MessageComponentFactory.fromMessage(s,i,{messagePayload:t},o);if(r){const t=i.createDiv(),s=i.createDiv(["popupContent"]);s.appendChild(r.render()),s.setAttribute("role","tooltip"),t.appendChild(s),e.style.cursor="pointer",e.appendChild(t)}}}t.FieldComponent=class{constructor(e,t,s,o,r,n){this.ei=e,this.ri=t,this.sh=s,this.le=r,this.ih=n,this.isTableField=!1,this.isColumnField=!1,s.displayType===i.DisplayType.Action&&(this.action=a.ActionComponentFactory.fromActionPayload(s.action,t,e,o,this.le))}render(){var e;const t=this.ri,s=this.sh,a=(this.isTableField?"table":"form")+"-message",n=this.le,p=this.ei,{alignment:u,label:g,labelFontSize:m,labelFontWeight:b,marginTop:f,onHoverPopupContent:v}=s,w=t.createTextDiv([`${a}-value`]),x=null===(e=s.value)||void 0===e?void 0:e.toString();switch(s.displayType){case i.DisplayType.Link:const e=t.createDiv(),{imageUrl:a,linkLabel:n}=s,l=t.createAnchor(x,n?"":"ellipsis");if(a){const e=t.createImage(a,["video-wrapper"],x);e.alt=n||"",l.appendChild(e),g&&t.addCSSClass(w,"with-top-margin")}else l.innerHTML=n||(0,o.stripHTTP)(x)||"";l.setAttribute("target","_blank"),e.appendChild(l),p.linkHandler?(0,r.setEmbeddedLinksHandler)(e,p.linkHandler):p.openLinksInNewWindow&&(0,r.setLinksOpenInNewWindow)(e),w.appendChild(l);break;case i.DisplayType.Text:const{fontSize:h,fontWeight:m,truncateAt:b}=s;x&&b?(w.innerHTML=`${x.slice(0,b)}...`,w.title=x):w.innerHTML=x||"",c(w,h,m,t);break;case i.DisplayType.Media:const f=s.mediaType,v=g&&x;switch(f){case"image":const e=t.createImage(x,["video-wrapper"],x);v&&t.addCSSClass(w,"with-top-margin"),w.appendChild(e);break;case"video":(0,r.getEmbeddedVideo)(x,t.cssPrefix)?(w.innerHTML=(0,r.linkify)(x,t.cssPrefix,p.embeddedVideo),p.embeddedVideo&&v&&t.addCSSClass(w,"with-top-margin")):w.appendChild(d(f,x,w,v,t));break;case"audio":w.appendChild(d(f,x,w,v,t))}break;case i.DisplayType.Action:t.addCSSClass(w,"flex"),w.style.justifyContent=u,g&&t.addCSSClass(w,"with-top-margin"),w.appendChild(this.action.render())}if(this.isTableField)return h(w,v,p,t,n),w;const k=`${a}-field`,y=[k,`${k}-col-${this.ih}`],_=t.createDiv(y),O=t.createDiv([`${a}-key`]);return O.innerHTML=g||"",u&&(O.style.textAlign=u,w.style.textAlign=u),c(O,m,b,t),_.appendChild(O),_.appendChild(w),h(_,v,p,t,n),this.isColumnField?l(_,f,t):_}disableActions(){this.action.disable()}disablePostbacks(){(0,n.getPostActions)([this.action]).forEach((e=>{e.disable()}))}enableActions(){this.action.enable()}enablePostbacks(){(0,n.getPostActions)([this.action]).forEach((e=>{e.enable()}))}};const d=(e,t,s,i,o)=>{const r=o.createMedia(e,t,["video-wrapper"]);return r.controls=!0,r.preload="metadata",i&&o.addCSSClass(s,"with-top-margin"),r}},9608:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.FormMessageComponent=void 0,t.applySelectAction=d,t.getFormItem=l,t.getFormRow=h,t.getFormRowColumn=p,t.setMaxColumnWidth=u;const i=s(6246),o=s(8098),r=s(9780),a=s(4773),n=s(3276);class c extends a.C2SQLBaseMessageComponent{getContent(){const e=this.util,t=this.settings,s=this.la,i="form-message",o=e.createDiv([i]);s.formColumns>2&&(s.formColumns=2);const r=s.forms;return r.forEach(((a,n)=>{if(a.title){const t=e.createTextDiv([`${i}-header`]);t.innerText=a.title,o.appendChild(t)}const[c,h]=l(a,s.formColumns,e,t,this.le);this.Dl=this.Dl.concat(h);const d=n+1;d===r.length||r[d].title||e.addCSSClass(c,"with-border"),o.appendChild(c)})),super.getContent(o)}}function l(e,t,s,a,c){var l;const g="form-message",m=`${g}-actions-col`,b=null===(l=e.channelExtensions)||void 0===l?void 0:l.c2kReferences,f=s.createDiv([`${g}-item`,b?"c2k-reference":""]),v=c.shareText||(0,o.getFormShareText)(e,!0),w=function(e,t,s,i,o){var a;const n=[];if((null===(a=e.actions)||void 0===a?void 0:a.length)>0)for(const a of e.actions){const e=r.ActionComponentFactory.fromActionPayload(a,t,s,i,o);e&&n.push(e)}return n}(e,s,a,v,c);let x;if(w.length&&(x=function(e,t,s,i){const o=t.createDiv("horizontal"!==s.formActionsLayout?["form-actions","col",i]:["form-actions"]);for(const t of e){const e=t.render();o.appendChild(e)}return o}(w,s,a,m)),(0,i.isFormEntityWithRows)(e)?e.formRows.forEach(((e,t)=>{const o=h(e,w,s,a,v,c),r=e.columns.length;if(e.columns.forEach((e=>{const t=p(e,s);e.fields.forEach((o=>{if((0,i.isReadOnlyField)(o)){const i=new n.FieldComponent(a,s,o,v,c);i.isColumnField=!0,i.action&&w.push(i.action),u(e.width,o.displayType,t,r),t.appendChild(i.render())}})),o.appendChild(t)})),b&&0!==t){const e=s.createTextSpan(["delimiter"]);e.innerHTML="&bull;",o.firstElementChild.firstElementChild.lastElementChild.prepend(e)}f.appendChild(o)})):e.fields.forEach((e=>{const i=new n.FieldComponent(a,s,e,v,c,t);i.action&&w.push(i.action),f.appendChild(i.render())})),x&&f.appendChild(x),e.selectAction){d(r.ActionComponentFactory.fromActionPayload(e.selectAction,s,a,v,c),w,f,e.selectAction.label)}return[f,w]}function h(e,t,s,i,o,a){const n=s.createDiv(["form-row",e.separator?"separator":""]);if(e.selectAction){d(r.ActionComponentFactory.fromActionPayload(e.selectAction,s,i,o,a),t,n,e.selectAction.label)}return n}function d(e,t,s,i){e&&(t.push(e),s.onclick=t=>e.handleOnClick(t),s.title=i||"",s.style.cursor="pointer")}function p(e,t){const{width:s,verticalAlignment:i}=e,o=t.createDiv(["form-row-column",s||""]);return"center"===i?t.addCSSClass(o,"align-center"):"bottom"===i?t.addCSSClass(o,"align-end"):t.addCSSClass(o,"align-start"),o}function u(e,t,s,o){"stretch"===e||t!==i.DisplayType.Media||s.style.maxWidth||(s.style.maxWidth=`calc((100% - ${16*(o-1)}px)/${o})`)}t.FormMessageComponent=c},849:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(4773),t),o(s(1875),t),o(s(3276),t),o(s(9608),t),o(s(3330),t),o(s(6452),t)},3330:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.TableMessageComponent=void 0,t.createTableCell=l,t.applyHeadingWidth=h;const i=s(9780),o=s(4773),r=s(3276),a=s(9608),n=100;class c extends o.C2SQLBaseMessageComponent{getContent(){const e=this.util,t=this.la,s=h(t.headings),o="table-message",n=e.createDiv([`${o}-wrapper`]),c=t.tableTitle;if(c){const t=e.createDiv([`${o}-table-title-wrapper`]),s=e.createElement("strong",[`${o}-table-title`],!0);s.textContent=c,t.append(s),n.append(t)}const d=e.createElement("table",[o]);n.appendChild(d);const p=e.createElement("tr",[`${o}-headings`]);return s.forEach((t=>{const s=l(e,[`${o}-heading`],t.width,t.alignment);s.innerText=t.label,p.appendChild(s)})),d.appendChild(p),t.rows.forEach((t=>{const n=e.createElement("tr",[`${o}-row`]);if(t.selectAction){const s=i.ActionComponentFactory.fromActionPayload(t.selectAction,e,this.settings,this.shareText,this.le);(0,a.applySelectAction)(s,this.Dl,n,t.selectAction.label)}t.fields.forEach(((t,i)=>{const a=l(e,[`${o}-item`],s[i].width,t.alignment),c=new r.FieldComponent(this.settings,e,t,this.shareText,this.le);c.isTableField=!0,c.action&&this.Dl.push(c.action),a.appendChild(c.render()),n.appendChild(a)})),d.appendChild(n)})),super.getContent(n)}}function l(e,t,s,i){const o=e.createElement("td",t,!0);return o.style.textAlign=i,o.style.width=`${s}%`,o}function h(e){let t;if(e.every((e=>!e.width||e.width>=0&&e.width<=n))){let s=0,i=0;if(e.forEach((e=>{e.width?i+=e.width:s++})),s)if(i<n){const o=(n-i)/s;t=e.map((e=>(e.width||(e.width=o),e)))}else t=d(e);else if(i===n)t=e;else{const s=n/i;t=e.map((e=>(e.width=e.width*s,e)))}}else t=d(e);return t}function d(e){const t=n/e.length;return e.map((e=>(e.width=t,e)))}t.TableMessageComponent=c},6452:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.TableFormMessageComponent=void 0;const i=s(8098),o=s(4773),r=s(3276),a=s(9608),n=s(3330);class c extends o.C2SQLBaseMessageComponent{getContent(){const e=this.util,t=this.la,s=(0,n.applyHeadingWidth)(t.headings.concat({alignment:"center",label:""})),o="table-message",c=e.createDiv([`${o}-wrapper`]),l=t.tableTitle;if(l){const t=e.createDiv([`${o}-table-title-wrapper`]),s=e.createElement("strong",[`${o}-table-title`],!0);s.textContent=l,t.append(s),c.append(t)}const h=e.createElement("table",[o,"tableform-message"]);c.appendChild(h);const d=e.createElement("tr",[`${o}-headings`]);s.forEach((t=>{const s=(0,n.createTableCell)(e,[`${o}-heading`],t.width,t.alignment);s.innerText=t.label,d.appendChild(s)})),h.appendChild(d);return d.lastElementChild.style.width="32px",t.rows.forEach(((c,l)=>{const d=e.createElement("tr",[`${o}-row`]);c.fields.forEach(((t,i)=>{const a=(0,n.createTableCell)(e,[`${o}-item`],s[i].width,t.alignment),c=new r.FieldComponent(this.settings,e,t,this.shareText,this.le);c.isTableField=!0,c.action&&this.Dl.push(c.action),a.appendChild(c.render()),d.appendChild(a)})),t.formColumns>2&&(t.formColumns=2);const p=t.forms[l],u=(0,n.createTableCell)(e,[`${o}-item`,"button-cell"]),g=e.createIconButton({css:[`${o}-item`,`${o}-item-form-toggle`],icon:i.iconChevronDown,iconCss:[],title:p.title||""});u.appendChild(g),d.appendChild(u);const m="none",b="rotate-180",[f,v]=(0,a.getFormItem)(p,t.formColumns,e,this.settings,this.le);this.Dl=this.Dl.concat(v),e.addCSSClass(f,m);let w=!1;d.onclick=()=>{w?(e.addCSSClass(f,m),e.removeCSSClass(g,b)):(e.removeCSSClass(f,m),e.addCSSClass(g,b)),w=!w},h.appendChild(d),h.appendChild(f)})),super.getContent(c)}}t.TableFormMessageComponent=c},9811:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.CardMessageComponent=void 0;const i=s(8098),o=s(9020),r=s(8216);class a extends r.MessageComponent{constructor(e,t,s,i,r,a){super(e,t,s,i,r,a),this.oh=[],this.rh=s.layout,this.ah=s.cards.length,s.cards.forEach((e=>{this.oh.push(new o.CardComponent(this.settings,t,e,this.le))})),this.globalActions=this.actions.concat(this.globalActions),this.actions=[],this.nh=!1,this.dh=!0}hasActions(){return this.oh[0].hasActions()||this.actions.length>0||this.globalActions.length>0}disableActions(){super.disableActions(),this.oh.forEach((e=>{e.disableActions()}))}disablePostbacks(){super.disablePostbacks(),this.oh.forEach((e=>{e.disablePostbacks()}))}enableActions(){super.enableActions(),this.oh.forEach((e=>{e.enableActions()}))}enablePostbacks(){super.enablePostbacks(),this.oh.forEach((e=>{e.enablePostbacks()}))}render(){const e=this.util,t=this.settings.name,s=[`card-message-${this.rh}`],i=super.render();if(i.querySelector(`.${t}-icon-wrapper`)){s.push("has-message-icon");const o=i.querySelector(`.${t}-content-wrapper`);e.addCSSClass(o,"with-icon")}return e.addCSSClass(i,...s),i}setCardsScrollAttributes(e){this.nh="rtl"===getComputedStyle(this.ph).direction,this.dh="default"===e}getContent(){const e=this.util,t=this.ah,s=e.createDiv(["card-message-content"]),o=e.createDiv(["card-message-cards"]);let r=!0;if(this.oh.forEach((e=>{const t=e.render();r&&e.hasActions()&&(this.firstActionButton=e.getFirstActionButton(),r=!1),o.appendChild(t)})),s.appendChild(o),"horizontal"===this.rh&&t>1){let e;s.appendChild(this.uh()),this.gh=0,o.addEventListener("scroll",(()=>{window.clearTimeout(e),e=window.setTimeout((()=>{let e=0;for(let s=0;s<t;s++){const i=this.nh?t-s-1:s,r=o.children[i];if(o.scrollLeft<=r.offsetLeft+5){e=i;break}}e!==this.gh&&(this.gh=e,this.mh())}),100)})),window.addEventListener("resize",(0,i.debounce)((()=>{this.bh()}),500))}this.fh=s,this.ph=o;const a=this.settings.name;return new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&this.bh()}))}),{root:document.querySelector(`.${a}-conversation`)}).observe(o),s}uh(){if(!this.wh){const e=this.util,t=this.translations.cardNavNext;this.wh=e.createDiv(["next-wrapper"]);const s=e.createIconButton({css:["round","next"],icon:i.iconChevronNext,iconCss:[],title:t});s.onclick=this.xh.bind(this),this.wh.appendChild(s)}return this.wh}kh(){if(!this.yh){const e=this.util,t=this.translations.cardNavPrevious;this.yh=e.createDiv(["prev-wrapper"]);const s=e.createIconButton({css:["round","previous"],icon:i.iconChevronPrevious,iconCss:[],title:t});s.onclick=this._h.bind(this),this.yh.appendChild(s)}return this.yh}xh(){this.gh<this.ah&&(this.gh++,this.mh())}_h(){this.gh>0&&(this.gh--,this.mh())}mh(){var e,t,s,i;const o=this.ph.children[this.gh];if(o){const r=52,a=68;this.ph.scrollLeft=o.offsetLeft-(this.dh?r:a),0===this.gh?null===(e=this.yh)||void 0===e||e.remove():(null===(t=this.yh)||void 0===t?void 0:t.parentElement)||this.fh.prepend(this.kh()),this.gh===this.ah-1?null===(s=this.wh)||void 0===s||s.remove():(null===(i=this.wh)||void 0===i?void 0:i.parentElement)||this.fh.appendChild(this.uh())}}bh(){this.ph.scrollWidth===this.ph.offsetWidth?(this.wh&&(this.wh.hidden=!0),this.yh&&(this.yh.hidden=!0)):(this.wh&&(this.wh.hidden=!1),this.yh&&(this.yh.hidden=!1))}}t.CardMessageComponent=a},5696:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(9811),t)},9020:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.CardComponent=void 0;const o=s(6246),r=s(6064),a=s(8098),n=s(9780),c=s(8216);t.CardComponent=class{constructor(e,t,s,a){var l;this.ei=e,this.ri=t,this.le=a,this.Dl=[],this.Oh=[],this.jh=e=>{var t,s;e.type===o.ActionType.Client&&e.actionType===o.ClientActionType.COPY_MESSAGE_TEXT&&(e.getPayload=()=>i(this,void 0,void 0,(function*(){return this.getCopyContent()})));const r=e;r.messageComponent=this,null===(s=(t=this.le).onMessageActionClicked)||void 0===s||s.call(t,r)},this.getCopyContent=()=>{var e;return(0,r.replaceButtonsWithDivs)(null===(e=this.Jt)||void 0===e?void 0:e.cloneNode(!0))},this.Ic=s.title,this.Mh=s.description,this.wl=s.imageUrl,this.X=s.url,null!==(l=s.actions)&&void 0!==l||(s.actions=[]),this.Dl=s.actions.map((s=>{var i;const o=(this.Ic?`${this.Ic} - `:"")+(this.Mh?`${this.Mh} - `:"")+(null!==(i=this.X)&&void 0!==i?i:"");return n.ActionComponentFactory.fromActionPayload(s,t,e,o,Object.assign(Object.assign({},a),{onMessageActionClicked:this.jh}))})).filter(Boolean),this.Oh=(0,c.getPostActions)(this.Dl)}render(){const e=this.ri,t=this.ei,s=t.embeddedVideo,i=t.locale,o=this.X,r=e.createDiv(["card"]),n=o?e.createAnchor(o,"",["card-component"],t.openLinksInNewWindow,t.linkHandler):e.createDiv(["card-content"]);if(this.X&&(n.innerText=""),this.wl){const s=t.i18n;let o=s[i].cardImagePlaceholder;if(this.le&&this.le.locale){const e=s[this.le.locale];o=e?e.cardImagePlaceholder:o}n.appendChild(e.createImage(this.wl,["card-image"],o))}const c=e.createTextDiv(["card-title"]);if(c.innerHTML=(0,a.linkify)(this.Ic,e.cssPrefix,s),n.appendChild(c),this.Mh){const t=e.createTextDiv(["card-description"]);t.innerHTML=(0,a.linkify)(this.Mh,e.cssPrefix,s),n.appendChild(t)}if(r.appendChild(n),t.linkHandler?(0,a.setEmbeddedLinksHandler)(n,t.linkHandler):t.openLinksInNewWindow&&(0,a.setLinksOpenInNewWindow)(n),this.Dl.length>0){const s=e.createDiv("horizontal"!==t.cardActionsLayout?["card-actions","col"]:["card-actions"]);let i=!0;for(const e of this.Dl){const t=e.render();i&&(this.zh=t,i=!1),s.appendChild(t)}r.appendChild(s)}return this.Jt=r,r}hasActions(){return this.Dl.length>0}disableActions(){this.Dl.forEach((e=>e.disable()))}disablePostbacks(){this.Oh.forEach((e=>e.disable()))}enableActions(){this.Dl.forEach((e=>e.enable()))}enablePostbacks(){this.Oh.forEach((e=>e.enable()))}getFirstActionButton(){return this.zh}}},7874:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.ErrorMessageComponent=void 0;const i=s(6246),o=s(2467);class r extends o.TextMessageComponent{constructor(e,t,s,o,r,a){super(e,t,{type:i.MessageType.Text,text:s.errorMessage},o,r,a)}getContent(){const e=super.getContent();return this.util.addCSSClass(e,"error"),e}}t.ErrorMessageComponent=r},5915:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(7007),t),o(s(5601),t),o(s(5686),t),o(s(849),t),o(s(5696),t),o(s(9020),t),o(s(7874),t),o(s(8036),t),o(s(5174),t),o(s(2835),t),o(s(8216),t),o(s(5611),t),o(s(4266),t),o(s(2971),t),o(s(8766),t),o(s(8145),t),o(s(2467),t),o(s(402),t),o(s(5793),t)},5174:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(909),t)},909:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.LoadingMessageComponent=void 0;const i=s(8036),o=s(8216);t.LoadingMessageComponent=class{constructor(e,t,s,i){this.$h=e,this.Ch=t,this.ei=s,this.ri=i}render(){const e=this.ri,t=this.ei,s=t.icons,r=e.createDiv(["attachment"]),a=this.Ch===o.MESSAGE_SIDE.LEFT?s.avatarBot:s.avatarUser,n=e.createDiv(["attachment-footer","flex"]),c=e.createTextDiv(["attachment-title"]);c.innerText=this.$h,n.appendChild(c);const l=e.createDiv(["attachment-placeholder","flex"]);return l.appendChild(new i.SpinnerComponent(e).render()),r.appendChild(l),r.appendChild(n),this.Jt=t.searchBarMode?e.getMessage(r):e.getMessageBlock(this.Ch,r,a),this.Jt}remove(){this.Jt.remove()}}},8036:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(184),t)},184:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.SpinnerComponent=void 0;t.SpinnerComponent=class{constructor(e){this.ri=e}render(){const e=this.ri.createDiv(["spinner"]);return e.innerHTML='<svg viewBox="0 0 64 64"><circle transform="translate(32,32)" r="26"></circle></svg>',e}}},2835:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.LocationMessageComponent=void 0;const i=s(8098),o=s(8216);class r extends o.MessageComponent{constructor(e,t,s,i,o,r){super(e,t,s,i,o,r);const a=s.location;this.Ic=a.title,this.X=a.url,this.Sh=a.longitude,this.Ih=a.latitude}render(){const e=this.util,t=e.createDiv(["message"]);t.lang=this.locale;const s=e.createDiv(["message-wrapper"]);t.appendChild(s);const o=e.createDiv(["attachment"]),r=e.createDiv(["attachment-placeholder","flex"]),a=e.createDiv(["attachment-icon"]),n=e.createImageIcon({icon:this.settings.icons.shareMenuLocation||i.iconShareLocation}),c=e.createDiv(["attachment-footer","flex"]),l=e.createLabel(["attachment-title"]);if(l.innerText=this.Ic?this.Ic:`${this.Ih.toFixed(4)}, ${this.Sh.toFixed(4)}`,c.appendChild(l),a.appendChild(n),r.appendChild(a),!this.actions.length){const t=e.createDiv(["attachment-controls"]),s=e.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:this.settings.icons.externalLink||i.iconExternalLink,iconCss:[],title:this.translations.openMap}),o=e.createAnchor(this.X||`https://www.google.com/maps/@${this.Ih},${this.Sh},12z`,"",[],this.settings.openLinksInNewWindow,this.settings.linkHandler);s.onclick=()=>{o.click()},t.appendChild(s),c.appendChild(t)}return o.appendChild(r),o.appendChild(c),s.appendChild(this.getContent(o)),t}}t.LocationMessageComponent=r},5611:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(7249),t)},7249:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.MessageStringComponent=void 0;const i=s(8216);t.MessageStringComponent=class{constructor(e,t,s,i,o,r=!0){this.Ic=e,this.$h=t,this.Ch=s,this.ei=i,this.ri=o,this.Th=r}render(e){const t=this.ri,s=this.ei,o=s.icons,r="message",a=t.createDiv([`${r}-content`]),n=this.Ch===i.MESSAGE_SIDE.LEFT?o.avatarBot:o.avatarUser;if(e){t.addCSSClass(a,`${r}-with-icon`);const s=t.createImageIcon({icon:e}),i=t.createDiv([`${r}-icon`]);i.appendChild(s),a.appendChild(i)}const c=t.createDiv([`${r}-text`]),l=t.createTextDiv([`${r}-title`]),h=t.createTextDiv([`${r}-description`]);return l.innerText=this.Ic,h.innerText=this.$h,c.appendChild(l),c.appendChild(h),a.appendChild(c),s.searchBarMode?t.getMessage(a,this.Th):t.getMessageBlock(this.Ch,a,n,this.Th)}}},8216:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(7989),t),o(s(3457),t)},7989:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.getPostActions=function(e){return e.filter((e=>{const t=e.getActionType();return t===i.ActionType.Postback||t===i.ActionType.Location||t===i.ActionType.SubmitForm}))};const i=s(6246)},3457:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.MESSAGE_SIDE=t.MessageComponent=void 0;const o=s(6064),r=s(8098),a=s(9780),n=s(7989);t.MESSAGE_SIDE={LEFT:"left",RIGHT:"right"};function c(e,t,s,i){const o=s.createDiv(["message-bubble",t]),a=s.createTextDiv();return a.innerHTML=(0,r.linkify)(e,s.cssPrefix,i),o.appendChild(a),o}function l(e,t,s){const i=s.createTextDiv(t);return e.forEach((e=>{i.appendChild(e.render())})),i}t.MessageComponent=class{constructor(e,t,s,a,c,l){this.settings=e,this.util=t,this.payload=s,this.side=a,this.source=c,this.actions=[],this.globalActions=[],this.Oh=[],this.appendedComponents=[],this.jh=e=>{var t,s;(0,r.isActionEventCopyMessageType)(e)&&(e.getPayload=()=>i(this,void 0,void 0,(function*(){return this.getCopyContent()})));const o=e;o.messageComponent=this,null===(s=(t=this.le).onMessageActionClicked)||void 0===s||s.call(t,o)},this.getCopyContent=()=>(0,o.pipe)(this.element.cloneNode(!0),this.Ah,o.replaceButtonsWithDivs),this.Ah=e=>{const t=e.querySelectorAll(`.${this.settings.name}-footer-form`);return null==t||t.forEach((e=>{e.remove()})),e},this.locale=e.locale,this.translations=e.i18n[this.locale],this.shareText=(0,r.getShareText)(s),this.le=Object.assign(Object.assign({},l),{shareText:this.shareText}),this.Eh=Object.assign(Object.assign({},this.le),{onMessageActionClicked:this.jh}),l.locale&&(this.locale=l.locale,this.translations=Object.assign(Object.assign({},this.translations),this.settings.i18n[l.locale])),s.actions&&(this.actions=this.buildActions(s.actions,this.shareText)),s.globalActions&&(this.globalActions=this.buildActions(s.globalActions,this.shareText)),this.headerText=s.headerText,this.footerText=s.footerText,s.footerForm&&(this.footerFormComponent=(0,r.getFooterFormComponent)(t,s.footerForm,e,this.Eh)),this.Oh=(0,n.getPostActions)(this.actions).concat((0,n.getPostActions)(this.globalActions))}hasActions(){return this.actions.length>0||this.globalActions.length>0||this.appendedComponents.length>0&&this.appendedComponents.some((e=>e.hasActions()))}focusFirstAction(){var e;this.firstActionButton?this.firstActionButton.focus():this.appendedComponents.length&&(null===(e=this.appendedComponents.find((e=>e.hasActions())))||void 0===e||e.focusFirstAction())}disableActions(){this.actions.forEach((e=>{e.disable()})),this.globalActions.forEach((e=>{e.disable()})),this.footerFormComponent&&this.footerFormComponent.disableActions(),this.appendedComponents.forEach((e=>e.disableActions()))}disablePostbacks(){this.Oh.forEach((e=>{e.disable()})),this.footerFormComponent&&this.footerFormComponent.disablePostbacks(),this.appendedComponents.forEach((e=>e.disablePostbacks()))}enableActions(){this.actions.forEach((e=>{e.enable()})),this.globalActions.forEach((e=>{e.enable()})),this.footerFormComponent&&this.footerFormComponent.enableActions(),this.appendedComponents.forEach((e=>e.enableActions()))}enablePostbacks(){this.Oh.forEach((e=>{e.enable()})),this.footerFormComponent&&this.footerFormComponent.enablePostbacks(),this.appendedComponents.forEach((e=>e.enablePostbacks()))}render(e){const t=this.util;this.element&&(this.element.innerHTML="");const s=this.element?this.element:t.createDiv(["message"]);s.lang=this.locale;const i=t.createDiv(["message-wrapper"]);s.appendChild(i),this.renderheader(i);const o=this.renderMainContent(i,e);this.mainView=o;const r=this.settings.displayActionsAsPills?i:o;return this.renderLocalActions(r),this.renderFooter(i),this.renderFooterForm(i),this.renderGlobalActions(s),this.setupEmbeddedActions(s),this.element=s,s}append(e){this.appendedComponents.push(e),this.appendComponent(e)}appendComponent(e){const t=this.element,s=t.querySelector(`${this.settings.name}-message-wrapper`),i=this.mainView;if(!i)return;e.renderMainContent(i);const o=this.settings.displayActionsAsPills?s:i;e.renderLocalActions(o),e.renderFooter(s),e.renderFooterForm(s),e.renderGlobalActions(t),e.setupEmbeddedActions(t)}renderheader(e){this.payload.headerText&&e.append(this.getHeader())}renderMainContent(e,t){const s=this.getContent(t);return e.append(s),s}renderLocalActions(e){const t=this.payload.actions;if(t&&t.length){const t=this.getActions();e.appendChild(t),this.firstActionButton||(this.firstActionButton=t.firstElementChild),this.actionsWrapper=t}}renderFooter(e){this.payload.footerText&&e.appendChild(this.getFooter())}renderFooterForm(e){const t=this.footerFormComponent;if(t){const s=this.util.createDiv(["footer-form"]);s.appendChild(t.render()),e.appendChild(s)}}renderGlobalActions(e){const t=this.payload.globalActions;if(null==t?void 0:t.length){const t=this.getGlobalActions();e.appendChild(t),this.firstActionButton||(this.firstActionButton=t.firstElementChild)}}getHeader(){return c(this.headerText,"message-header",this.util,this.settings.embeddedVideo)}getContent(e){const t=this.util.createDiv(["message-bubble"]);return t.style.padding=this.settings.messagePadding||t.style.padding,e&&t.appendChild(e),t}getActions(){const e=this.settings,t=e.displayActionsAsPills?["message-global-actions"]:["message-actions"];return"horizontal"!==e.actionsLayout&&t.push("col"),l(this.actions,t,this.util)}getFooter(){return c(this.footerText,"message-footer",this.util,this.settings.embeddedVideo)}getGlobalActions(){const e=["message-global-actions"];return this.settings.icons.avatarBot&&e.push("has-message-icon"),"horizontal"!==this.settings.globalActionsLayout&&e.push("col"),l(this.globalActions,e,this.util)}buildActions(e,t){return function(e,t,s,i,o){const r=[];return e.forEach((e=>{const n=a.ActionComponentFactory.fromActionPayload(e,t,s,i,o);n&&r.push(n)})),r}(e,this.util,this.settings,t,this.Eh)}setupEmbeddedActions(e){const t=this.payload.embeddedActions;if(!t)return;const s=this.util,i="embeddedAction",o=e.querySelectorAll(`span.${i}`);o&&o.forEach((e=>{const o=t.find((t=>t.id===e.id));if(!o)return;const n=[i];o.displayType&&n.push(`display-${o.displayType}`),s.addCSSClass(e,...n);const c=a.ActionComponentFactory.fromActionPayload(o,s,this.settings,this.shareText,this.Eh);c&&(c.render(),(0,r.on)(e,"click",c.handleOnClick.bind(c)))}))}}},4266:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.RawMessageComponent=void 0;const i=s(8216);class o extends i.MessageComponent{constructor(e,t,s,i,o,r){super(e,t,s,i,o,r),this.la=JSON.stringify(s.payload)}getContent(){const e=this.util.createTextSpan();return e.innerText=this.la,super.getContent(e)}}t.RawMessageComponent=o},2971:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.RelativeTimestampComponent=void 0;const i=s(6246),o=window.setTimeout,r=window.setInterval,a=36e5,n=864e5,c=30*n,l=365*n,h="relTimeNow",d="relTimeMoment";t.RelativeTimestampComponent=class{constructor(e,t){this.ri=t,this.ni=Object.assign(Object.assign({},e.i18n.en),e.i18n[e.locale]);const s=e.icons,i=e.name,o="-has-message-icon";this.Ft=i,this.Ph=`${i}-left ${s.avatarBot?`${i}${o}`:""}`,this.Lh=`${i}-right ${s.avatarUser?`${i}${o}`:""}`}render(){const e=this.ri;let t=this.Jt;return t?(t.setAttribute("aria-live","off"),t.setAttribute("aria-hidden","true")):t=e.createTextDiv(),t.className=`${this.Ft}-relative-timestamp ${this.Fh}`,this.Jt=t,t}setLocale(e){if(this.ni=e,this.Rh)switch(this.Rh){case h:case d:this.Dh(e[this.Rh]);break;default:this.Dh(e[this.Rh].replace("{0}",`${this.Nh}`))}}setRelativeTime(e){const t=(new Date).getTime()-e.getTime(),s=Math.floor(t/1e3),i=Math.floor(s/60),o=Math.floor(i/60),r=Math.floor(o/24),a=Math.floor(r/30),n=Math.floor(a/12);n>0?this.Hh(n):a>0?this.Vh(a):r>0?this.Uh(r):o>0?this.Bh(o):i>0?this.Wh(i):this.qh(s)}refresh(e){this.Fh=e===i.SenderType.Skill?this.Ph:this.Lh,this.Jt.className=`${this.Ft}-relative-timestamp ${this.Fh}`,this.Gh()}remove(){var e;(null===(e=this.Jt)||void 0===e?void 0:e.parentElement)&&this.Jt.remove()}Gh(){this.Zh(h,1e4,this.qh.bind(this))}qh(e=10){e*=1e3,this.Zh(d,6e4-e,this.Wh.bind(this))}Wh(e=1){this.Yh("relTimeMin",6e4,60,this.Bh.bind(this),e)}Bh(e=1){this.Yh("relTimeHr",a,24,this.Uh.bind(this),e)}Uh(e=1){this.Yh("relTimeDay",n,30,this.Vh.bind(this),e)}Vh(e=1){this.Yh("relTimeMon",c,12,this.Hh.bind(this),e)}Hh(e=1){this.Yh("relTimeYr",l,60,(()=>{}),e)}Zh(e,t,s){this.Jh(),this.Dh(this.ni[e]),this.Rh=e,this.Kh=o((()=>{s()}),t)}Yh(e,t,s,i,o=1){this.Jh(),this.Dh(this.ni[e].replace("{0}",`${o}`)),this.Rh=e,this.Nh=o,this.Kh=r((()=>{o++,this.Nh=o,o>s?(clearInterval(this.Kh),i()):this.Dh(this.ni[e].replace("{0}",`${o}`))}),t)}Dh(e){this.Jt||this.render(),this.Jt.innerText=e}Jh(){clearTimeout(this.Kh),clearInterval(this.Kh)}}},8766:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(4783),t)},4783:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.StatusComponent=void 0;t.StatusComponent=class{constructor(e,t,s){const i="status-message",o=e.createDiv([`${i}-container`]);o.setAttribute("role","alert");const r=e.createDiv([`${i}-wrapper`]);if(s){const t=e.createImage(s,["status-image"],"");r.appendChild(t)}const a=e.createTextDiv([i]);a.textContent=t,r.appendChild(a),o.appendChild(r),this.Jt=o}remove(){this.Jt.remove()}render(){return this.Jt}}},8145:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.FeedbackComponent=void 0;const i=s(8098),o=s(2467);class r extends o.TextMessageComponent{constructor(e,t,s,i,o,r){super(e,t,s,i,o,r),this.Xh=0,this.Qh=s.actions,this.ratingId=Date.now()}focusFirstAction(){this.ed[0].focus()}disableActions(){this.td(!0),super.disableActions()}disablePostbacks(){this.td(!0),super.disablePostbacks()}enableActions(){this.td(!1),super.enableActions()}enablePostbacks(){this.td(!1),super.enablePostbacks()}highlightRating(e){if(!this.actions||!this.ed)return;const t=this.util,s="active",i="string"==typeof e?this.sd(e):e;for(let e=1;e<=this.ed.length;e++){const o=this.ed[e-1];if(!o)break;i&&e<=i||0===i&&e<=this.Xh?t.addCSSClass(o,s):t.removeCSSClass(o,s)}}getActions(){const e=this.util,t=this.settings,s=t.i18n[t.locale].ratingStar,o=e.createDiv(["rating-wrapper"]);this.ed=this.Qh.map((r=>{const a=e.createElement("input",["star-input","rating-hidden"]);a.id=`rating-${r.label}-${this.ratingId}`,a.type="radio",a.name=`rating-${this.ratingId}`,a.value=r.label;const n=e.createLabel(["star-label"]);n.htmlFor=`rating-${r.label}-${this.ratingId}`,n.setAttribute("data-rating",r.label);const c=e.createTextSpan(["rating-hidden"]),l=s.replace("{0}",`${r.label}`);c.innerText=l;const h=t.icons&&t.icons.rating||i.iconRating,d=e.createImageIcon({icon:h,iconCss:["rating-star-icon"]});return n.appendChild(c),n.appendChild(d),a.onfocus=()=>{a.disabled||(this.Xh=this.od(a))},a.onkeydown=e=>{"Enter"===e.key&&this.rd(r)},n.onclick=()=>{a.disabled||(this.Xh=this.od(n),this.rd(r))},n.onmouseover=()=>{a.disabled||this.od(n)},n.onmouseleave=()=>{a.disabled||this.od(null)},o.appendChild(a),o.appendChild(n),a})),this.Xh&&this.od(null);const r=e.createDiv(["rating-root"]);return r.appendChild(o),r}td(e){this.ed&&this.ed.forEach((t=>{t.disabled=e}))}rd(e){const t={getPayload:()=>Promise.resolve(e.postback),label:e.label,type:e.type};this.jh(t)}od(e){let t=0;if(e){const s="value"in e?e.value:null==e?void 0:e.getAttribute("data-rating");t=s?parseInt(s,10):0}return this.highlightRating(t),t}sd(e){let t=0;if(/^\d+$/.exec(e)){const s=parseInt(e,10);s>0&&s<=this.actions.length&&(t=s)}return t}}t.FeedbackComponent=r},2467:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.TextMessageComponent=void 0;const i=s(6246),o=s(8098),r=s(8216);class a extends r.MessageComponent{constructor(e,t,s,i,o,r){super(e,t,s,i,o,r),this.$h=s.text}getContent(){const e=this.settings,t=this.util,s=this.$h,a=t.createTextDiv(["message-text"]);return this.side===r.MESSAGE_SIDE.RIGHT?(0,i.isPostbackPayload)(this.payload)&&(n(s)||(0,o.isSVG)(s))?(t.addCSSClass(a,"message-user-postback"),a.innerHTML=s):a.textContent=c(s):(a.innerHTML=(0,o.linkify)(s,t.cssPrefix,e.embeddedVideo),e.linkHandler?(0,o.setEmbeddedLinksHandler)(a,e.linkHandler):e.openLinksInNewWindow&&(0,o.setLinksOpenInNewWindow)(a)),super.getContent(a)}}t.TextMessageComponent=a;const n=e=>!!e&&/^<img\s+/i.test(e),c=e=>e.replace(/&#x([0-9a-f]+);/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))},402:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.TextStreamMessageComponent=void 0;const i=s(8098),o=s(8216),r="start",a="end";class n extends o.MessageComponent{constructor(e,t,s,o,r,n){var l;super(e,t,s,o,r,n),this.ad="",this.nd=!0,this.ld=s.streamState,this.$h=s.text,this.ad=s.text,this.nd=null!==(l=n.isFresh)&&void 0!==l?l:this.nd;let h="";this.hd=c((s=>{h+=s;const o=h.length%20?h:(0,i.linkify)(h,t.cssPrefix,e.embeddedVideo),r=(0,i.convertBreakTagsToNewLines)(o);this.textElement&&(this.textElement instanceof HTMLInputElement||this.textElement instanceof HTMLTextAreaElement?(this.textElement.focus(),this.textElement.value=r,this.textElement instanceof HTMLTextAreaElement&&(this.textElement.scrollTop=this.textElement.scrollHeight)):this.textElement.innerHTML=r)}),(()=>{var e;this.ld===a&&(this.isCoPilot?this.showDone():(this.$h=null===(e=this.textElement)||void 0===e?void 0:e.innerHTML,this.render()))}),e.typingDelay||1)}update(e){const t=e.streamState;switch(this.ld=t,t){case r:this.renderClean(e),this.isCoPilot&&this.hd.push(e.text.split(""));break;case"running":this.hd.push(e.text.split("")),this.ad=e.text;break;case a:if(this.nd){const t=this.ad;if(this.ad="",t.length){const s=e.text.lastIndexOf(t);if(s>=0){const i=e.text.substring(s+t.length);this.hd.push(i.split("")),this.isCoPilot||this.setAddOnComponents(e);break}}}this.renderClean(e)}}freeze(){return this.hd.clear(),this.ad="",this.textElement.innerHTML}getContent(){var e;const t=this.settings,s=this.util,o=s.createTextDiv();return o.setAttribute("aria-hidden","true"),!this.nd||this.ld!==r&&this.textElement?(o.innerHTML=(0,i.linkify)(this.$h,s.cssPrefix,t.embeddedVideo),this.ld===a&&o.removeAttribute("aria-hidden"),t.linkHandler?(0,i.setEmbeddedLinksHandler)(o,t.linkHandler):t.openLinksInNewWindow&&(0,i.setLinksOpenInNewWindow)(o)):(this.textElement=o,this.hd.push(null===(e=this.$h)||void 0===e?void 0:e.split(""))),super.getContent(o)}renderClean(e){this.hd.clear(),this.$h=e.text,this.isCoPilot||(this.setAddOnComponents(e),this.render())}setAddOnComponents(e){this.headerText=e.headerText,e.actions&&(this.actions=this.buildActions(e.actions)),this.footerText=e.footerText,e.footerForm&&(this.footerFormComponent=(0,i.getFooterFormComponent)(this.util,e.footerForm,this.settings,Object.assign(Object.assign({},this.le),{shareText:this.shareText}))),e.globalActions&&(this.globalActions=this.buildActions(e.globalActions)),this.Oh=(0,o.getPostActions)(this.actions).concat((0,o.getPostActions)(this.globalActions))}}t.TextStreamMessageComponent=n;const c=(e,t,s)=>{const i=[];let o=!0;const r=()=>{if(!i.length)return o=!0,void setTimeout((()=>t()));setTimeout((()=>{i.length&&(e(i.shift()),r())}),s)};return{push:e=>{i.push(...e),o&&(o=!1,r())},clear:()=>{i.length=0}}}},5793:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.TypingIndicatorComponent=void 0;const i=s(4557);class o extends i.Component{constructor(e,t,s){super(),this.Ch=e,this.ei=t,this.ri=s,this.element=this.render(),this.dd=!1,this.pd=!0}append(e){!this.isVisible()&&e&&(e.appendChild(this.element),this.dd=!0,this.ud&&clearTimeout(this.ud),this.pd&&(this.ud=window.setTimeout((()=>{this.remove()}),1e3*this.ei.typingIndicatorTimeout)))}remove(){this.isVisible()&&(this.element.remove(),this.dd=!1)}isVisible(){return this.dd}render(){const e=this.ri,t=this.ei,s=e.createDiv(["typing-cue-wrapper"]),i=t.icons.avatarBot;if(t.icons.typingIndicator){const i=t.icons.typingIndicator,o=e.createImageIcon({icon:i});o.style.height=t.chatBubbleIconHeight||o.style.height,o.style.width=t.chatBubbleIconWidth||o.style.width,s.appendChild(o)}else{const t=e.createDiv(["typing-cue"]);s.appendChild(t)}return s.setAttribute("aria-live","polite"),this.fh=s,this.updateTypingCueLocale(t.i18n[t.locale].typingIndicator),t.searchBarMode?e.getMessage(s):e.getMessageBlock(this.Ch,s,i)}updateTypingCueLocale(e){this.fh.setAttribute("aria-label",e)}resetTypingCueIcon(){this.element.remove(),this.element=this.render()}updateTypingCueIcon(e){e.style.marginTop="0px",this.element.firstChild.replaceWith(e)}setAutoTimeout(e){this.pd=e}}t.TypingIndicatorComponent=o},2854:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(1456),t)},1456:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.WebViewComponent=void 0;const i=s(6064),o=s(8098),r=s(5915),a=["no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","same-origin","strict-origin","strict-origin-when-cross-origin","unsafe-url"],n=["allow-downloads-without-user-activation","allow-downloads","allow-forms","allow-modals","allow-orientation-lock","allow-pointer-lock","allow-popups","allow-popups-to-escape-sandbox","allow-presentation","allow-same-origin","allow-scripts","allow-storage-access-by-user-activation","allow-top-navigation","allow-top-navigation-by-user-activation"],c="none",l="webview-container",h=`${l}-open`,d=`${l}-close`;t.WebViewComponent=class{constructor(e,t,s){this.ri=t,this.ei=s,this.gd=.8,this.cs={closeButtonIcon:o.iconClose,closeButtonType:"icon",errorInfoBar:!0,referrerPolicy:"no-referrer-when-downgrade",sandbox:[],size:"tall"},this.md=!1,this.bd=!1,this.setProps(e||{}),this.Ft=s.name}setProps(e){Array.isArray(e.sandbox)&&e.sandbox.length&&(e.sandbox=e.sandbox.map((e=>e.toLowerCase())).filter((e=>n.includes(e))));const t=Object.assign(Object.assign({},this.cs),e);var s;t.closeButtonIcon||(t.closeButtonIcon=this.cs.closeButtonIcon),t.closeButtonType||(t.closeButtonType="icon"),t.size||(t.size="tall"),s=t.referrerPolicy,a.includes(null==s?void 0:s.toLowerCase())||(t.referrerPolicy="no-referrer-when-downgrade"),"full"===t.size&&(this.gd=1),this.cs=t,this.md=!1,this.bd=!1}open(e){if(this.Jc){const t=this.ri,s=100;this.Jc.style.height=s*this.gd+"%",t.removeCSSClass(this.Jc,d,c),t.addCSSClass(this.Jc,h),this.Jc.insertBefore(this.fd,this.vd),this.vd.onload=()=>{this.fd.remove(),t.removeCSSClass(this.vd,c)},this.cs.title||(this.Ic.textContent=e),this.cs.errorInfoBar&&setTimeout((()=>{this.md&&!this.bd&&(this.wd=this.xd(),e&&(this.kd.href=e),t.removeCSSClass(this.wd,c),this.Jc.appendChild(this.wd),this.bd=!0)}),1e3),this.md=!0}}close(){const e=this.ri;this.md=!1,e.removeCSSClass(this.Jc,h),e.addCSSClass(this.Jc,d),this.yd(),this.vd.setAttribute("src",""),setTimeout((()=>{e.addCSSClass(this.Jc,c),e.removeCSSClass(this.vd,c)}),400)}render(){const e=this.ri,t=this.cs;return this.Jc=e.createDiv(["webview-container"]),this.qs=e.createDiv(["header","webview-header","flex"]),this.Ic=e.createTextDiv(["title","webview-title","ellipsis"]),this._d=e.createIconButton({css:["header-button","webview-button-close"],icon:t.closeButtonIcon,iconCss:[],title:t.closeButtonLabel}),this._d.id=`${this.Ft}-webview-button-close`,this.fd=this.Od(),this.vd=e.createElement("iframe",["iframe","webview"]),this.vd.name=`${this.ei.name}-webview`,this.vd.title=t.accessibilityTitle,t.title&&(this.Ic.textContent=t.title),"label"===t.closeButtonType?(this._d.classList.add(`${this.Ft}-label-only`),this._d.appendChild(document.createTextNode(t.closeButtonLabel))):"iconWithLabel"===t.closeButtonType&&(this._d.classList.add(`${this.Ft}-with-label`),this._d.appendChild(document.createTextNode(t.closeButtonLabel))),this.vd.setAttribute("referrerpolicy",t.referrerPolicy),this.cs.sandbox.length&&this.cs.sandbox.forEach((e=>{this.vd.sandbox.add(e)})),e.addCSSClass(this.Jc,c),this._d.onclick=()=>{this.close()},this.qs.appendChild(this.Ic),this.qs.appendChild(this._d),this.Jc.appendChild(this.qs),this.Jc.appendChild(this.vd),this.Jc}Od(){return new r.SpinnerComponent(this.ri).render()}xd(){const e=this.ri,t=e.createDiv(["webview-error","flex"]);this.jd=e.createDiv(["webview-error-text"]),t.appendChild(this.jd),this.Md(this.cs.errorInfoText);const s=e.createIconButton({css:["webview-error-button-close"],icon:this.cs.closeButtonIcon,iconCss:[],title:this.cs.errorInfoDismissLabel});return s.onclick=this.yd.bind(this),t.appendChild(s),t}Md(e){var t;const s=this.ri,r=(0,o.sanitizeText)(e);let a;const n=/\{0\}(.*)\{\/0\}/g,c=null===(t=n.exec(r))||void 0===t?void 0:t[1];if(c){const e=s.createAnchor("",c,["webview-alt-link"]);a=r.replace((0,i.resetRegex)(n),e.outerHTML)}else a=s.createAnchor("",r,["webview-alt-link"]).outerHTML;this.jd.innerHTML=a,this.kd=this.jd.querySelector("a")}yd(){const e=this.ri;this.bd&&(e.addCSSClass(this.wd,c),setTimeout((()=>{this.Jc.removeChild(this.wd),this.bd=!1}),600))}}},5398:(e,t,s)=>{t.l=t.k=t.j=t.i=t.h=t.g=t.f=t.e=t.d=t.c=t.b=t.a=void 0;const i=s(8098);Object.defineProperty(t,"a",{enumerable:!0,get:function(){return i.ChatEvent}}),Object.defineProperty(t,"c",{enumerable:!0,get:function(){return i.DOMUtil}}),Object.defineProperty(t,"e",{enumerable:!0,get:function(){return i.SDK_VERSION}}),Object.defineProperty(t,"i",{enumerable:!0,get:function(){return i.addDefaultSettings}}),Object.defineProperty(t,"j",{enumerable:!0,get:function(){return i.getFieldInputValues}}),Object.defineProperty(t,"k",{enumerable:!0,get:function(){return i.isAnyVoiceAvailable}}),Object.defineProperty(t,"l",{enumerable:!0,get:function(){return i.syncTTSLocaleIfUnavailable}});const o=s(5430);Object.defineProperty(t,"b",{enumerable:!0,get:function(){return o.ContextualWidgetComponent}}),Object.defineProperty(t,"d",{enumerable:!0,get:function(){return o.Logger}}),Object.defineProperty(t,"f",{enumerable:!0,get:function(){return o.StorageType}}),Object.defineProperty(t,"g",{enumerable:!0,get:function(){return o.WidgetComponent}}),Object.defineProperty(t,"h",{enumerable:!0,get:function(){return o.WidgetTheme}})},5229:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.redwoodStyles=void 0;t.redwoodStyles='@keyframes scale-in-center{0%{opacity:1;transform:scale(0)}100%{opacity:1;transform:scale(1)}}@keyframes scale-out-center{0%{display:flex;opacity:1;transform:scale(1)}100%{display:none;opacity:1;transform:scale(0)}}@keyframes scale-in-br{0%{opacity:1;transform:scale(0);transform-origin:100% 100%}100%{opacity:1;transform:scale(1);transform-origin:100% 100%}}@keyframes scale-in-bl{0%{opacity:1;transform:scale(0);transform-origin:0 100%}100%{opacity:1;transform:scale(1);transform-origin:0 100%}}@keyframes scale-in-tl{0%{opacity:1;transform:scale(0);transform-origin:0 0}100%{opacity:1;transform:scale(1);transform-origin:0 0}}@keyframes scale-in-tr{0%{opacity:1;transform:scale(0);transform-origin:100% 0}100%{opacity:1;transform:scale(1);transform-origin:100% 0}}@keyframes scale-out-br{0%{opacity:1;transform:scale(1);transform-origin:100% 100%}99%{opacity:1;transform:scale(0.01);transform-origin:100% 100%}100%{display:none;opacity:1;transform:scale(0);transform-origin:100% 100%}}@keyframes scale-out-bl{0%{opacity:1;transform:scale(1);transform-origin:0 100%}99%{opacity:1;transform:scale(0.01);transform-origin:0 100%}100%{display:none;opacity:1;transform:scale(0);transform-origin:0 100%}}@keyframes popup-suggestion{0%{box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0);transform:scaleY(0.4);transform-origin:0 100%}100%{box-shadow:0 -12px 15px -12px rgba(0,0,0,.35);transform:scaleY(1);transform-origin:0 100%}}@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes dialog-in{0%{transform:translateY(-20px);opacity:0}100%{transform:translateY(0);opacity:1}}@keyframes dialog-out{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-20px);opacity:0}}@keyframes typing-cue{0%{opacity:1}30%{opacity:.1}50%{opacity:1}100%{opacity:.1}}@keyframes webview-slide-out-bottom{0%{transform:translateY(0);opacity:1}95%{opacity:1}100%{transform:translateY(100%);opacity:0}}@keyframes webview-slide-in-bottom{0%{transform:translateY(100%);opacity:0}1%{opacity:1}100%{transform:translateY(0%);opacity:1}}@keyframes cancel-button-entrance{0%{transform:translateZ(-64px);opacity:0}100%{transform:translateZ(0);opacity:1}}@keyframes cancel-button-exit{0%{transform:translateZ(0);opacity:1}100%{transform:translateZ(-64px);opacity:0}}@keyframes icon-enter{0%{opacity:.4;transform:rotateY(-85deg)}100%{opacity:1;transform:rotateY(0)}}@keyframes icon-exit{0%{opacity:1;transform:rotateY(0)}100%{opacity:.4;transform:rotateY(-85deg)}}.flex{display:flex;justify-content:space-between;align-items:center}.col{flex-direction:column}.none{display:none !important}.wrapper{--color-branding: #c0533f;--color-branding-light: #ca4d3c;--color-branding-dark: #9b382a;--color-launch-icon-background: #c0533f;--color-text: #161513;--color-text-light: #161513;--color-header-background: #F1EFED;--color-header-button-fill: #161513;--color-header-text: #161513;--color-header-button-background-hover: rgba(22, 21, 19, 0.04);--color-header-button-fill-hover: #161513;--color-conversation-background: #F5F4F2;--color-timestamp: rgba(22, 21, 19, 0.65);--color-border: #1615131F;--color-typing-indicator: #161513;--color-agent-initials: #FFFFFF;--color-agent-avatar-background: #A890B6;--color-agent-name: rgba(22, 21, 19, 0.65);--color-bot-message-background: #FFFFFF;--color-bot-text: #161513;--color-user-message-background: #E4E1DD;--color-user-text: #161513;--color-error-message-background: #FFF8F7;--color-error-border: #DC5C5E;--color-error-title: #D63B25;--color-error-text: #161513;--color-card-background: #FFFFFF;--color-card-nav-button: #FFF;--color-card-nav-button-focus: #FBF9F8;--color-card-nav-button-hover: #FBF9F8;--color-actions-background: #fff;--color-actions-background-focus: #fff;--color-actions-background-hover: rgba(22, 21, 19, 0.04);--color-actions-border: rgba(22, 21, 19, 0.5);--color-actions-outline-focus: rgb(22, 21, 19);--color-actions-text: #161513;--color-actions-text-focus: #161513;--color-actions-text-hover: #161513;--color-global-actions-background: transparent;--color-global-actions-background-focus: transparent;--color-global-actions-background-hover: rgba(22, 21, 19, 0.04);--color-global-actions-border: rgba(22, 21, 19, 0.5);--color-global-actions-text: #161513;--color-global-actions-text-focus: #161513;--color-global-actions-text-hover: #161513;--color-primary-actions-background: rgb(49, 45, 42);--color-primary-actions-background-focus: rgb(49, 45, 42);--color-primary-actions-background-hover: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-actions-border: transparent;--color-primary-actions-text: #fff;--color-primary-actions-text-focus: #fff;--color-primary-actions-text-hover: #fff;--color-danger-actions-background: rgb(214, 59, 37);--color-danger-actions-background-focus: rgb(214, 59, 37);--color-danger-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-actions-border: transparent;--color-danger-actions-text: #fff;--color-danger-actions-text-focus: #fff;--color-danger-actions-text-hover: #fff;--color-links: #c0533f;--color-user-links: #c0533f;--color-rating-star: #ececec;--color-rating-star-fill: #f0cc71;--color-horizontal-rule-background: #cbc5bf;--color-attachment-placeholder: #e3e1dc;--color-attachment-footer: #fff;--color-attachment-text: #161513;--color-footer-form-label: rgba(22, 21, 19, 0.65);--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-footer-button-background-hover: rgba(22, 21, 19, 0.04);--color-footer-button-fill-hover: #161513;--color-input-background: #fff;--color-input-border: #fff;--color-input-text: #161513;--color-recognition-view-text: #fff;--color-visualizer: #161513;--color-visualizer-container-background: #fff;--color-notification-badge-background: #312d2a;--color-notification-badge-text: #fff;--color-popup-background: #fff;--color-popup-text: #161513;--color-popup-button-background: #fff;--color-popup-button-text: #161513;--color-popup-horizontal-rule: #cbc5bf;--color-popup-item-background-hover: rgba(22, 21, 19, 0.04);--color-table-header-background: #f1efec;--color-table-header-text: #161513;--color-table-title-separator: #b3b1af;--color-table-background: #fff;--color-table-text: #161513;--color-table-separator: rgba(22, 21, 19, 0.1);--color-table-row-background-hover: rgba(22, 21, 19, 0.04);--color-table-actions-background: transparent;--color-table-actions-background-focus: transparent;--color-table-actions-background-hover: rgba(22, 21, 19, 0.04);--color-table-actions-border: rgba(22, 21, 19, 0.5);--color-table-actions-text: #161513;--color-table-actions-text-focus: #161513;--color-table-actions-text-hover: #161513;--color-form-header-background: #f1efec;--color-form-header-text: #161513;--color-form-background: #fff;--color-form-text: #161513;--color-form-input-background: #fff;--color-form-input-border: rgba(22, 21, 19, 0.5);--color-form-input-border-focus: rgb(14, 114, 151);--color-form-input-text: #161513;--color-form-label: rgba(22, 21, 19, 0.65);--color-form-required-tip: rgba(22, 21, 19, 0.65);--color-form-error: rgba(179, 49, 31);--color-form-error-text: rgba(22, 21, 19, 0.65);--color-form-actions-background: transparent;--color-form-actions-background-focus: transparent;--color-form-actions-background-hover: rgba(22, 21, 19, 0.04);--color-form-actions-border: rgba(22, 21, 19, 0.5);--color-form-actions-text: #161513;--color-form-actions-text-focus: #161513;--color-form-actions-text-hover: #161513;--color-primary-form-actions-background: rgb(49, 45, 42);--color-primary-form-actions-background-focus: rgb(49, 45, 42);--color-primary-form-actions-background-hover: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-form-actions-border: transparent;--color-primary-form-actions-text: #fff;--color-primary-form-actions-text-focus: #fff;--color-primary-form-actions-text-hover: #fff;--color-danger-form-actions-background: rgb(214, 59, 37);--color-danger-form-actions-background-focus: rgb(214, 59, 37);--color-danger-form-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-form-actions-border: transparent;--color-danger-form-actions-text: #fff;--color-danger-form-actions-text-focus: #fff;--color-danger-form-actions-text-hover: #fff;--bubble-max-width: 680px;--width-full-screen: 375px;--widget-max-height: calc(100vh - 60px);--position-top: 0;--position-left: 0;--position-right: 20px;--position-bottom: 20px;--font-family: "Oracle Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", sans-serif;--color-search-bar-separator: rgba(22, 21, 19, .12);position:fixed;box-sizing:border-box;text-transform:none;z-index:10000;color:var(--color-text);font-size:13.75px;line-height:16px;font-family:var(--font-family);-webkit-font-smoothing:antialiased}.wrapper.classic{--color-branding: #025e7e;--color-branding-light: #0e7295;--color-branding-dark: #06485f;--color-launch-icon-background: #025e7e;--color-text: #161513;--color-text-light: #3a3631;--color-header-background: #025e7e;--color-header-button-fill: #fff;--color-header-button-fill-hover: #fff;--color-header-text: #fff;--color-conversation-background: #fff;--color-timestamp: #5b5652;--color-border: #1615131F;--color-typing-indicator: #227e9e;--color-bot-message-background: #e5f1ff;--color-user-message-background: #ececec;--color-card-background: #e5f1ff;--color-card-nav-button: #4190ac;--color-card-nav-button-focus: #5fa2ba;--color-card-nav-button-hover: #0e7295;--color-actions-background: transparent;--color-actions-background-focus: transparent;--color-actions-background-hover: rgba(14, 114, 149, 0.04);--color-actions-border: rgb(14, 114, 149);--color-actions-text: rgb(14, 114, 149);--color-actions-text-focus: rgb(14, 114, 149);--color-actions-text-hover: rgb(14, 114, 149);--color-global-actions-background: #fff;--color-global-actions-background-focus: #fff;--color-global-actions-background-hover: rgba(14, 114, 149, 0.04);--color-global-actions-border: rgb(14, 114, 149);--color-global-actions-text: rgb(14, 114, 149);--color-global-actions-text-focus: rgb(14, 114, 149);--color-global-actions-text-hover: rgb(14, 114, 149);--color-primary-actions-background: rgb(14, 114, 149);--color-primary-actions-background-focus: rgb(14, 114, 149);--color-primary-actions-background-hover: rgba(14, 114, 149, 0.95);--color-links: #0e7295;--color-user-links: #0e7295;--color-agent-name: #5b5652;--color-attachment-footer: #e5f1ff;--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-footer-button-fill-hover: #025e7e;--color-visualizer: #025e7e;--color-primary-form-actions-background: rgb(14, 114, 149);--color-primary-form-actions-background-focus: rgb(14, 114, 149);--color-primary-form-actions-background-hover: rgba(14, 114, 149, 0.95);--color-notification-badge-background: #9a0007;--color-notification-badge-text: #fff;--color-popup-button-text: #025e7e}.wrapper.redwood-dark{--color-branding: #c0533f;--color-branding-light: #ca4d3c;--color-branding-dark: #9b382a;--color-launch-icon-background: #c0533f;--color-text: #161513;--color-text-light: #fcfbfa;--color-header-background: #201e1c;--color-header-button-fill: #fff;--color-header-button-fill-hover: #fff;--color-header-button-background-hover: rgba(255, 255, 255, 0.04);--color-header-text: #fff;--color-conversation-background: #3a3631;--color-timestamp: #fcfbfa;--color-border: #FCFBFA1F;--color-typing-indicator: #fff;--color-bot-message-background: #655f5c;--color-bot-text: #fff;--color-user-message-background: #fff;--color-user-text: #161513;--color-card-background: #655f5c;--color-card-nav-button: #d5b364;--color-card-nav-button-focus: #f7e0a1;--color-card-nav-button-hover: #b39554;--color-actions-background: #655f5c;--color-actions-background-focus: #655f5c;--color-actions-background-hover: rgba(22, 21, 19, 0.3);--color-actions-border: #fff;--color-actions-text: #fff;--color-actions-text-focus: #fff;--color-actions-text-hover: #fff;--color-global-actions-background: #3a3631;--color-global-actions-background-focus: #3a3631;--color-global-actions-background-hover: rgba(22, 21, 19, 0.3);--color-global-actions-border: #fff;--color-global-actions-text: #fff;--color-global-actions-text-focus: #fff;--color-global-actions-text-hover: #fff;--color-primary-actions-background: #fff;--color-primary-actions-background-focus: #fff;--color-primary-actions-background-hover: #fff linear-gradient(rgb(251, 249, 248), rgb(251, 249, 248));--color-primary-actions-text: #161513;--color-primary-actions-text-focus: #161513;--color-primary-actions-text-hover: #161513;--color-danger-actions-background-focus: rgb(214, 59, 37);--color-danger-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08));--color-links: #f7e0a1;--color-user-links: #c0533f;--color-agent-name: #fcfbfa;--color-footer-form-label: #fcfbfa;--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-input-background: #fff;--color-input-text: #161513;--color-recognition-view-text: #fff;--color-visualizer-container-background: #fff;--color-notification-badge-background: #312d2a;--color-notification-badge-text: #fff;--color-popup-button-text: #201e1c}.wrapper:not(.embedded):not(.contextual-widget):not(.search-bar-widget-wrapper){bottom:var(--position-bottom);left:var(--position-left);top:var(--position-top);right:var(--position-right)}.wrapper *{box-sizing:border-box}.wrapper .widget-button{position:relative;max-width:100%;padding:9px 16px;margin:0 0 8px;min-height:36px;line-height:16px;font-size:13.75px;font-weight:600;font-family:inherit;border-radius:4px;border-width:thin;border-style:solid;cursor:pointer;overflow:hidden;flex-shrink:0;word-break:normal;overflow-wrap:anywhere}.wrapper .widget-button:disabled{opacity:.5;cursor:not-allowed}.wrapper .widget-button.icon{width:36px;height:36px;padding:8px;margin:0;margin-inline-start:4px;border:none;border-radius:4px;color:var(--color-text);background-color:rgba(0,0,0,0);justify-content:center}.wrapper .widget-button.icon.with-label{width:auto;max-width:200px}.wrapper .widget-button.icon.with-label svg,.wrapper .widget-button.icon.with-label img{margin-right:4px}.wrapper .widget-button.icon.label-only{width:auto;max-width:200px}.wrapper .widget-button.icon.label-only svg,.wrapper .widget-button.icon.label-only img{display:none}.wrapper .widget-button:not(:disabled):focus{outline:1px dotted var(--color-actions-outline-focus);outline-offset:1px}.wrapper .widget-button svg,.wrapper .widget-button img{width:20px;height:20px;flex-shrink:0}.wrapper .button{position:absolute;right:0;bottom:0;height:48px;width:48px;max-width:unset;padding:0;margin:0;border:none;background-position:center center;background-repeat:no-repeat;cursor:pointer;justify-content:center;align-items:center;z-index:10000;color:var(--color-text);background-color:var(--color-launch-icon-background);border-radius:0;overflow:visible}.wrapper .button svg,.wrapper .button img{height:unset;width:unset;max-width:100%;max-height:100%}.wrapper .button:not(:disabled):hover,.wrapper .button:not(:disabled):focus,.wrapper .button:not(:disabled):active{background-color:var(--color-launch-icon-background)}@media screen and (min-width: 769px){.wrapper .button{height:64px;width:64px}}.wrapper .dialog-wrapper{position:absolute;top:0;left:0;right:0;width:100%;height:100%}.wrapper .dialog-wrapper .dialog-backdrop{position:absolute;background:rgba(0,0,0,.2);height:100%;width:100%;z-index:5}.wrapper .dialog-wrapper .dialog{box-shadow:rgba(0,0,0,.16) 0px 4px 8px 0px;border-radius:6px;position:relative;max-width:450px;min-height:48px;max-height:60%;top:30%;left:0;right:0;padding:8px 16px;margin:8px auto;width:calc(100% - 16px);z-index:5;animation:dialog-in .2s cubic-bezier(0.22, 0.45, 0.42, 0.92) both;background-color:var(--color-popup-background);overflow-y:auto}.wrapper .dialog-wrapper .dialog.dialog-out{animation:dialog-out .2s cubic-bezier(0.5, 0.07, 0.68, 0.48) both}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper{margin:16px 0}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-icon{width:20px;height:20px;max-width:20px;max-height:20px;margin-inline-end:8px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-icon img,.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-icon svg{max-width:20px;max-height:20px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-content{line-height:1.4;margin-inline-end:28px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-content .dialog-title{font-family:var(--font-family);font-size:18px;font-weight:bold;color:var(--color-popup-text);word-break:normal;overflow-wrap:anywhere}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-content .dialog-description{color:var(--color-popup-text);opacity:.6;font-size:13px;margin-top:8px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-label{color:var(--color-popup-text);font-size:large}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-input{font-size:medium;min-height:36px;width:100%;margin:0 0 10px 0;padding:10px;color:var(--color-form-input-text);border:1px solid var(--color-form-input-border);border-radius:4px}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-input:focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid rgba(0,0,0,0)}.wrapper .dialog-wrapper .dialog .dialog-icon-content-wrapper .dialog-input:invalid{border:1px solid var(--color-form-error)}.wrapper .dialog-wrapper .dialog .dialog-close-button{margin-inline-start:0}.wrapper .dialog-wrapper .dialog .action-wrapper{width:100%;margin:16px 0 6px;gap:16px}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action{background-color:var(--color-popup-button-background);border-color:var(--color-popup-button-text);color:var(--color-popup-button-text);border-style:solid;margin:0;height:34px;justify-content:center;flex:1 0 auto}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action:hover{background-color:var(--color-footer-button-background-hover)}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action:last-child{margin:0}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action.filled{background-color:var(--color-popup-button-text);color:var(--color-popup-button-background)}.wrapper .dialog-wrapper .dialog .action-wrapper .popup-action.filled:hover{opacity:.9}.wrapper .dialog-wrapper.modeless{top:56px;height:auto}.wrapper .dialog-wrapper.modeless .dialog{gap:16px;top:0}.wrapper .dialog-wrapper.modeless .dialog .dialog-icon-content-wrapper{margin:0}.wrapper .dialog-wrapper.modeless .dialog .dialog-icon-content-wrapper .dialog-content{margin:0}.wrapper .dialog-wrapper.modeless .dialog .dialog-icon-content-wrapper .dialog-content .dialog-title{font-size:16px;line-height:1.3333;font-weight:normal}.wrapper .header{height:56px;padding:0 8px;background-color:var(--color-header-background);color:var(--color-header-text)}.wrapper .header .logo{flex:0 0 auto;max-width:100px;height:36px;max-height:36px;overflow:hidden;padding:0}.wrapper .header .header-info-wrapper{flex-direction:column;flex-wrap:nowrap;width:100%;min-width:0;padding:0;margin:0 8px}.wrapper .header .header-info-wrapper .title{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:1.125em;font-weight:700}.wrapper .header .header-info-wrapper .subtitle{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wrapper .header .header-info-wrapper .connection-status{font-weight:bold;font-size:10px;justify-content:center;padding:0;margin:0;text-transform:uppercase;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.wrapper .header .header-gap{flex:auto}.wrapper .header-actions{flex:1 0 auto;justify-content:flex-end;flex-direction:inherit}.wrapper .header-button svg>path{fill:var(--color-header-button-fill)}.wrapper .header-button:not(:disabled):hover{background-color:var(--color-header-button-background-hover)}.wrapper .header-button:not(:disabled):hover svg>path{fill:var(--color-header-button-fill-hover)}.wrapper .conversation{display:flex;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;overflow-x:hidden;overflow-y:auto;position:relative;scroll-behavior:smooth;width:100%;padding:16px}.wrapper .conversation .conversation-pane .message-date,.wrapper .conversation .conversation-pane .relative-timestamp{font-size:12px;margin:8px 0 8px;color:var(--color-timestamp);text-align:start}.wrapper .conversation .conversation-pane .message-date.right,.wrapper .conversation .conversation-pane .relative-timestamp.right{text-align:end}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal{margin-inline-start:-52px}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-global-actions{margin-inline-start:52px}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .card-message-content .card-message-cards{padding-inline-start:52px}.wrapper .conversation .conversation-pane.bot-icon .relative-timestamp.left{margin-inline-start:36px}.wrapper .conversation .conversation-pane.user-icon .relative-timestamp.right{margin-inline-end:36px}.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper{max-width:calc(.9*(100% - 36px))}.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:calc(.9*(100% - 68px))}.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper{max-width:calc(.9*(100% - 72px))}.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:calc(.9*(100% - 104px))}.wrapper .conversation .cancel-response-button{background-color:var(--color-branding);border-radius:10000px;bottom:0;box-shadow:0 0 4px 0 rgba(0,0,0,.25);height:36px;inset-inline-start:100%;position:sticky;width:36px;z-index:100;animation:cancel-button-entrance .25s ease-in forwards;transition:all .25s ease-in-out}[dir=rtl] .wrapper .conversation .cancel-response-button{inset-inline-start:calc(100% - 36px)}.wrapper .conversation .cancel-response-button .cancel-response-button-icon path{fill:#fff}.wrapper .conversation .cancel-response-button:hover{background-color:var(--color-branding-light);box-shadow:0 0 4px 0 rgba(0,0,0,.25)}.wrapper .conversation .cancel-response-button:active{background-color:var(--color-branding-dark);box-shadow:0 0 4px 0 rgba(0,0,0,.25)}.wrapper .conversation .cancel-response-button:focus{outline:none;box-shadow:0 0 4px 0 rgba(0,0,0,.25)}.wrapper .conversation .cancel-response-button:focus:not(:focus-visible){box-shadow:0 0 4px 0 rgba(0,0,0,.25)}.wrapper .conversation .cancel-response-button.hide{animation:cancel-button-exit .2s ease-out forwards}.wrapper .timestamp-container{display:inline-block;position:relative;text-align:center;width:100%}.wrapper .timestamp-container .timestamp-header{background-color:var(--color-conversation-background);color:var(--color-timestamp);display:inline-block;font-size:12px;font-weight:700;padding:0 8px;margin:16px 0;position:relative;text-align:center;text-transform:capitalize;z-index:1}.wrapper .timestamp-container .conversation-separator{border:none;border-top:1px solid var(--color-border);position:absolute;margin:0;top:50%;width:100%}.wrapper .hr{margin:24px 0;font-size:12px;color:var(--color-horizontal-rule-background)}.wrapper .hr:before{content:"";background-color:var(--color-horizontal-rule-background);height:1px;flex-grow:1;margin-inline-end:10px}.wrapper .hr:after{content:"";background-color:var(--color-horizontal-rule-background);height:1px;flex-grow:1;margin-inline-start:10px}.wrapper .card-actions,.wrapper .form-actions,.wrapper .message-actions,.wrapper .message-global-actions{margin-top:6px;display:flex;align-items:flex-start;justify-content:flex-start;flex-wrap:wrap}.wrapper .card-actions.form-message-actions-col,.wrapper .form-actions.form-message-actions-col,.wrapper .message-actions.form-message-actions-col,.wrapper .message-global-actions.form-message-actions-col{flex-basis:100%;max-width:100%}.wrapper .card-actions:not(.col) .action-postback,.wrapper .form-actions:not(.col) .action-postback,.wrapper .message-actions:not(.col) .action-postback,.wrapper .message-global-actions:not(.col) .action-postback{margin-inline-end:8px}.wrapper .card-actions:not(.col) .action-postback:last-child,.wrapper .form-actions:not(.col) .action-postback:last-child,.wrapper .message-actions:not(.col) .action-postback:last-child,.wrapper .message-global-actions:not(.col) .action-postback:last-child{margin-inline-end:0}.wrapper .action-postback{background:var(--color-actions-background);border-color:var(--color-actions-border);color:var(--color-actions-text);display:flex;flex-direction:row;gap:10px;text-align:start}.wrapper .action-postback:not(:disabled):hover{color:var(--color-actions-text-hover);background-color:var(--color-actions-background-hover)}.wrapper .action-postback:not(:disabled):hover svg>path{fill:var(--color-actions-text-hover)}.wrapper .action-postback:not(:disabled):focus,.wrapper .action-postback:not(:disabled):active{background-color:var(--color-actions-background-focus);color:var(--color-actions-text-focus)}.wrapper .action-postback:not(:disabled):focus svg>path,.wrapper .action-postback:not(:disabled):active svg>path{fill:var(--color-actions-text-focus)}.wrapper .action-postback.primary{background:var(--color-primary-actions-background);color:var(--color-primary-actions-text);border:var(--color-primary-actions-border)}.wrapper .action-postback.primary:not(:disabled):hover{background:var(--color-primary-actions-background-hover);color:var(--color-primary-actions-text-hover)}.wrapper .action-postback.primary:not(:disabled):hover svg>path{fill:var(--color-primary-actions-text-hover)}.wrapper .action-postback.primary:not(:disabled):focus,.wrapper .action-postback.primary:not(:disabled):active{background:var(--color-primary-actions-background-focus);color:var(--color-primary-actions-text-focus)}.wrapper .action-postback.primary:not(:disabled):focus svg>path,.wrapper .action-postback.primary:not(:disabled):active svg>path{fill:var(--color-primary-actions-text-focus)}.wrapper .action-postback.danger{background:var(--color-danger-actions-background);color:var(--color-danger-actions-text);border:var(--color-danger-actions-border)}.wrapper .action-postback.danger:not(:disabled):hover{background:var(--color-danger-actions-background-hover);color:var(--color-danger-actions-text-hover)}.wrapper .action-postback.danger:not(:disabled):hover svg>path{fill:var(--color-danger-actions-text-hover)}.wrapper .action-postback.danger:not(:disabled):focus,.wrapper .action-postback.danger:not(:disabled):active{background:var(--color-danger-actions-background-focus);color:var(--color-danger-actions-text-focus)}.wrapper .action-postback.danger:not(:disabled):focus svg>path,.wrapper .action-postback.danger:not(:disabled):active svg>path{fill:var(--color-danger-actions-text-focus)}.wrapper .action-postback.display-link{outline:1px solid rgba(0,0,0,0);border:none;min-height:unset;background:rgba(0,0,0,0) !important;padding:0}.wrapper .action-postback.display-link:hover{text-decoration:underline}.wrapper .action-postback.c2k-action{border-radius:0;color:#227e9e !important;border:none;padding:0;min-height:unset;font-size:16px;background:rgba(0,0,0,0) !important;margin-bottom:0}.wrapper .action-postback .icon-enter{animation:icon-enter .2s ease-in}.wrapper .action-postback .icon-exit{animation:icon-exit .2s ease-out}.wrapper .message-global-actions{margin-top:8px}.wrapper .message-global-actions.stars{display:block}.wrapper .message-global-actions .widget-button{background:var(--color-global-actions-background);color:var(--color-global-actions-text);border-color:var(--color-global-actions-border)}.wrapper .message-global-actions .widget-button:not(:disabled):hover{background-color:var(--color-global-actions-background-hover);color:var(--color-global-actions-text-hover)}.wrapper .message-global-actions .widget-button:not(:disabled):hover svg>path{fill:var(--color-global-actions-text-hover)}.wrapper .message-global-actions .widget-button:not(:disabled):focus,.wrapper .message-global-actions .widget-button:not(:disabled):active{background-color:var(--color-global-actions-background-focus);color:var(--color-global-actions-text-focus)}.wrapper .message-global-actions .widget-button:not(:disabled):focus svg>path,.wrapper .message-global-actions .widget-button:not(:disabled):active svg>path{fill:var(--color-global-actions-text-focus)}.wrapper .message-bubble{position:relative;display:flex;flex-direction:column;align-items:flex-start;margin:0;padding:6px 16px;color:var(--color-bot-text);background:var(--color-bot-message-background);min-height:28px;line-height:16px;overflow:hidden;max-width:100%;border-radius:2px 10px 10px 2px;margin-top:2px;word-break:normal;overflow-wrap:anywhere}.wrapper .message-bubble>*{width:100%}.wrapper .message-bubble.before-card{border-radius:2px 10px 10px 10px}.wrapper .message-bubble .video-wrapper{max-width:100%}.wrapper .message-bubble.error{background-color:var(--color-error-message-background);color:var(--color-error-text);border:1px dashed var(--color-error-border)}.wrapper .message-bubble.error .message-icon path{fill:var(--color-error-title)}.wrapper .message-bubble.error .message-title{color:var(--color-error-title)}.wrapper .message-bubble span.highlight{background-color:rgba(143,191,208,.4)}.wrapper .message-bubble .message-with-icon{display:flex;align-items:flex-start;justify-content:space-between}.wrapper .message-bubble .message-with-icon .message-icon{width:24px;height:24px;align-items:center;margin-inline-end:16px}.wrapper .message-bubble .message-with-icon .message-text{word-break:normal;overflow-wrap:anywhere}.wrapper .message-bubble.message-header{margin-bottom:2px}.wrapper .message-bubble.message-footer{margin-top:2px}.wrapper .message-bubble .message-user-postback>img{max-height:32px;max-width:32px}.wrapper .message-bubble .message-bubble{border:0;margin-top:8px;padding:0}.wrapper .message-bubble .message-bubble:not(:first-child){margin-top:8px}.wrapper .messages-wrapper{max-width:90%;align-items:flex-start}.wrapper .messages-wrapper .agent-name{position:relative;bottom:3px;max-width:111.1111111111%;height:16px;font-size:12px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--color-agent-name)}.wrapper .messages-wrapper .screen-reader-only{height:1px;left:-20000px;overflow:hidden;position:absolute;top:auto;width:1px}.wrapper .messages-wrapper .message-list{width:100%;align-items:flex-start}.wrapper .message{width:100%;white-space:pre-wrap}.wrapper .message .embeddedAction{padding:2px 6px;border-radius:4px;cursor:pointer;display:inline-block;font-size:12px;font-weight:600;height:20px;line-height:16px;border:1px solid rgba(122,115,110,.2509803922)}.wrapper .message .embeddedAction.display-link{color:var(--color-links);padding:2px 0;outline:1px solid rgba(0,0,0,0);border:none}.wrapper .message .embeddedAction.display-link:hover{text-decoration:underline}.wrapper .message .embeddedAction.display-icon{padding:0;outline:1px solid rgba(0,0,0,0);border:none}.wrapper .message .action-wrapper{display:flex;flex-direction:column;position:relative}.wrapper .message .action-wrapper .widget-button:not(:disabled):hover+div>.tooltip{display:block;position:absolute;background-color:var(--color-bot-message-background);max-width:296px;border-radius:2px;box-shadow:0px 1px 4px 0px rgba(0,0,0,.1215686275);padding:8px;z-index:3;font-size:13px;font-weight:400;inset-inline-start:-16px;line-height:20px;margin-top:-4px;word-break:normal;overflow-wrap:anywhere}.wrapper .message a{color:var(--color-links)}.wrapper .message b{font-weight:700}.wrapper .message .widget-button.anchor-btn{padding:0}.wrapper .message .widget-button.anchor-btn a{display:block;text-decoration:inherit;color:inherit;padding:10px 20px}.wrapper .message .widget-button:last-child{margin-bottom:0}.wrapper .message .message-wrapper{display:flex;align-items:flex-start;flex-direction:column;width:100%;max-width:100%}.wrapper .message:first-child .message-bubble:not(.message-footer){margin-top:0}.wrapper .message:first-child .message-bubble:not(.message-footer) .message-bubble{margin-top:8px}.wrapper .message:first-child .card-message-content:first-child .card-message-cards{margin-top:0}.wrapper .message:last-child .message-bubble:last-child{border-radius:2px 10px 10px 10px}.wrapper .message:last-child .message-bubble:last-child .message-bubble{border-radius:0}.wrapper .message:last-child .message-bubble:last-child.edit-form-message .form-message-header{border-radius:1px 9px 0 0}.wrapper .message:last-child .message-bubble:last-child.edit-form-message .form-message-item{border-radius:1px 9px 9px 9px}.wrapper .message:last-child .card-message-content:last-child .card-message-cards{margin-bottom:-8px}.wrapper .message.card-message-horizontal{margin-inline-start:-16px;width:calc(var(--width-full-screen) - 12px)}.wrapper .message.card-message-horizontal .message-header,.wrapper .message.card-message-horizontal .message-footer,.wrapper .message.card-message-horizontal .message-global-actions{margin-inline-start:16px;max-width:calc(.9*(100% - 28px))}.wrapper .message.card-message-horizontal .message-header{border-radius:2px 10px 10px 10px}.wrapper .message.card-message-horizontal .card-message-cards{flex-direction:row;overflow-x:auto;padding-inline-start:16px}.wrapper .message.card-message-horizontal .card{border:1px solid rgba(22,21,19,.12);box-shadow:0px 1px 4px 0px rgba(0,0,0,.12);margin-inline-end:8px}.wrapper .message.card-message-horizontal .next-wrapper,.wrapper .message.card-message-horizontal .prev-wrapper{position:absolute;height:100%;top:0;width:52px;z-index:1}.wrapper .message.card-message-horizontal .next-wrapper{inset-inline-end:0;background:linear-gradient(90deg, rgba(255, 255, 255, 0), var(--color-conversation-background) 60%)}.wrapper .message.card-message-horizontal .prev-wrapper{inset-inline-start:0;background:linear-gradient(90deg, var(--color-conversation-background) 40%, rgba(255, 255, 255, 0))}[dir=rtl] .wrapper .message.card-message-horizontal .next-wrapper{background:linear-gradient(90deg, var(--color-conversation-background) 40%, rgba(255, 255, 255, 0))}[dir=rtl] .wrapper .message.card-message-horizontal .prev-wrapper{background:linear-gradient(90deg, rgba(255, 255, 255, 0), var(--color-conversation-background) 60%)}[dir=rtl] .wrapper .message.card-message-horizontal .next,[dir=rtl] .wrapper .message.card-message-horizontal .previous{transform:rotate(180deg)}.wrapper .message.card-message-horizontal .next,.wrapper .message.card-message-horizontal .previous{position:absolute;z-index:10;width:36px;height:36px;left:8px;padding:0;overflow:hidden;background-color:var(--color-card-nav-button);border:none;box-shadow:0px 2px 4px rgba(0,0,0,.1);top:calc(50% - 18px);justify-content:center}.wrapper .message.card-message-horizontal .next:hover,.wrapper .message.card-message-horizontal .previous:hover{background-color:var(--color-card-nav-button-hover)}.wrapper .message.card-message-horizontal .next:focus,.wrapper .message.card-message-horizontal .next:active,.wrapper .message.card-message-horizontal .previous:focus,.wrapper .message.card-message-horizontal .previous:active{background-color:var(--color-card-nav-button-focus)}.wrapper .message-block{justify-content:flex-start;align-items:flex-start;margin-bottom:8px}.wrapper .message-block.right{flex-direction:row-reverse}.wrapper .message-block.right .icon-wrapper{margin:unset;margin-inline-start:8px}.wrapper .message-block.right .messages-wrapper{align-items:flex-end}.wrapper .message-block.right .messages-wrapper .message a{color:var(--color-user-links)}.wrapper .message-block.right .messages-wrapper .message .message-wrapper{align-items:flex-end}.wrapper .message-block.right .messages-wrapper .message .message-bubble{border-radius:10px 2px 2px 10px}.wrapper .message-block.right .messages-wrapper .message .message-bubble:not(.error){color:var(--color-user-text);background:var(--color-user-message-background)}.wrapper .message-block.right .messages-wrapper .message:last-child .message-bubble:last-child{border-radius:10px 2px 10px 10px}.wrapper .message-block.right .message-date{text-align:right}.wrapper .icon-wrapper{margin-inline-end:8px;width:28px;height:28px;min-height:28px;min-width:28px;border-radius:4px;overflow:hidden;z-index:1;display:flex;align-items:center;justify-content:center}.wrapper .icon-wrapper.agent-avatar{background:var(--color-agent-avatar-background);margin-top:16px}.wrapper .icon-wrapper .message-icon{height:100%;max-height:100%;max-width:100%;width:100%;color:var(--color-timestamp);overflow:hidden;text-overflow:ellipsis}.wrapper .icon-wrapper .agent-icon{position:relative;min-width:20px;min-height:20px;font-weight:700;font-size:16px;line-height:20px;text-align:center;color:var(--color-agent-initials)}.wrapper .attachment{width:100%}.wrapper .attachment .attachment-placeholder{background-color:var(--color-attachment-placeholder);max-width:calc(100% + 32px);min-width:228px;min-height:88px;max-height:230px;margin:-6px -16px 0;justify-content:center;overflow:hidden}.wrapper .attachment .attachment-placeholder>*{max-width:100%}.wrapper .attachment .attachment-placeholder .attachment-icon{height:48px;width:48px}.wrapper .attachment .attachment-placeholder .attachment-icon svg{height:48px;width:48px}.wrapper .attachment .attachment-placeholder .attachment-icon img{width:100%}.wrapper .attachment .attachment-placeholder .attachment-audio{height:50px;width:100%}.wrapper .attachment .attachment-placeholder .attachment-audio::-webkit-media-controls-enclosure{background-color:rgba(0,0,0,0)}.wrapper .attachment .attachment-placeholder .attachment-video{aspect-ratio:1}.wrapper .attachment .attachment-footer{background-color:var(--color-attachment-footer);color:var(--color-attachment-text);margin:0 -16px -6px;height:50px;padding:16px}.wrapper .attachment .attachment-footer.with-actions{border-bottom:thin solid rgba(22,21,19,.1);margin-bottom:6px}.wrapper .attachment .attachment-footer .attachment-title{flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wrapper .card{width:252px;border-radius:6px;padding:12px 16px;margin-block-end:8px;justify-content:flex-start;flex-shrink:0;color:var(--color-bot-text);background:var(--color-card-background);overflow:hidden}.wrapper .card .card-content{margin-bottom:12px}.wrapper .card .card-image{display:block;width:calc(100% + 32px);margin:-12px -16px 10px;min-height:88px;background-color:var(--color-attachment-placeholder)}.wrapper .card .card-title{margin-bottom:4px;font-weight:700;word-break:normal;overflow-wrap:anywhere}.wrapper .card .card-description{color:var(--color-text-light)}.wrapper .card-message-content{width:100%;position:relative}.wrapper .card-message-content .card-message-cards{width:100%;align-items:stretch;display:flex;scroll-behavior:smooth;overflow-x:visible;flex-direction:column;margin:8px 0 0;scrollbar-width:none}.wrapper .card-message-content .card-message-cards::-webkit-scrollbar{display:none}.wrapper .message-bubble-tabular-message,.wrapper .message-bubble-form-message{width:111%;max-width:unset;border-radius:0 8px 8px 8px;padding:0;background-color:var(--color-table-background);color:var(--color-table-text);border:1px solid var(--color-table-header-background);overflow:hidden}.wrapper .message-bubble-tabular-message .popupContent,.wrapper .message-bubble-form-message .popupContent{max-width:280px;position:absolute;height:auto;border-radius:8px;z-index:3;box-shadow:0px 4px 4px 0px rgba(0,0,0,.1019607843);border:1px solid rgba(22,21,19,.1215686275);background:var(--color-bot-message-background);display:none;inset-inline-start:-4px}.wrapper .message-bubble-tabular-message .results-page-status,.wrapper .message-bubble-form-message .results-page-status{align-items:center;background-color:var(--color-table-background);color:var(--color-table-text);display:flex;flex-direction:row;font-size:13.75px;justify-content:flex-end;line-height:16px;padding:12px 16px;border-top:1px solid var(--color-table-separator)}.wrapper .message-bubble-tabular-message~.message-footer,.wrapper .message-bubble-form-message~.message-footer{margin-top:8px}.wrapper .message-bubble-tabular-message .message-actions .action-postback,.wrapper .message-bubble-tabular-message .table-message-item .action-postback{background:var(--color-table-actions-background);color:var(--color-table-actions-text);border-color:var(--color-table-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover{color:var(--color-table-actions-text-hover);background:var(--color-table-actions-background-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover svg>path{fill:var(--color-table-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active{background:var(--color-table-actions-background-focus);color:var(--color-table-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active svg>path{fill:var(--color-table-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions,.wrapper .message-bubble-form-message .message-actions{border-top:1px solid var(--color-table-separator);padding:12px 16px;margin-top:auto}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary,.wrapper .message-bubble-form-message .message-actions .action-postback.primary,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary,.wrapper .message-bubble-form-message .form-actions .action-postback.primary,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary{background:var(--color-primary-form-actions-background);color:var(--color-primary-form-actions-text);border:var(--color-primary-form-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover{background:var(--color-primary-form-actions-background-hover);color:var(--color-primary-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path{fill:var(--color-primary-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active{background:var(--color-primary-form-actions-background-focus);color:var(--color-primary-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active svg>path{fill:var(--color-primary-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger,.wrapper .message-bubble-form-message .message-actions .action-postback.danger,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger,.wrapper .message-bubble-form-message .form-actions .action-postback.danger,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger{background:var(--color-danger-form-actions-background);color:var(--color-danger-form-actions-text);border:var(--color-danger-form-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover{background:var(--color-danger-form-actions-background-hover);color:var(--color-danger-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path{fill:var(--color-danger-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active{background:var(--color-danger-form-actions-background-focus);color:var(--color-danger-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active svg>path{fill:var(--color-danger-form-actions-text-focus)}.wrapper .message-bubble-form-message{background-color:var(--color-form-background);color:var(--color-form-text)}.wrapper .message-bubble-form-message.edit-form-message{overflow:visible}.wrapper .message-bubble-form-message.edit-form-message .message-actions{border-top:none;padding-top:0}.wrapper .message-bubble-form-message.edit-form-message .form-message-header{border-radius:0 7px 0 0}.wrapper .message-bubble-form-message.edit-form-message .form-message-item{border-radius:0 7px 7px 7px}.wrapper .message-bubble-form-message .results-page-status{background-color:var(--color-form-background);color:var(--color-form-text)}.wrapper .message-bubble-form-message .message-actions .action-postback{background:var(--color-form-actions-background);color:var(--color-form-actions-text);border-color:var(--color-form-actions-border)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover{color:var(--color-form-actions-text-hover);background:var(--color-form-actions-background-hover)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover svg>path{fill:var(--color-form-actions-text-hover)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):active{background:var(--color-form-actions-background-focus);color:var(--color-form-actions-text-focus)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):active svg>path{fill:var(--color-form-actions-text-focus)}.wrapper .form-message-field,.wrapper .table-message-heading,.wrapper .table-message-item{word-break:normal;overflow-wrap:anywhere}.wrapper .form-message-field:hover .popupContent,.wrapper .table-message-heading:hover .popupContent,.wrapper .table-message-item:hover .popupContent{display:flex}.wrapper .table-message-wrapper{overflow:auto}.wrapper .table-message-wrapper .table-message-table-title-wrapper{background-color:var(--color-table-header-background);border-bottom:1px solid var(--color-table-title-separator);padding:8px}.wrapper .table-message-wrapper .table-message-table-title-wrapper .table-message-table-title{color:var(--color-table-header-text);font-size:14px;font-weight:600;line-height:16px;margin:4px 8px}.wrapper .table-message-wrapper .table-message{min-width:100%;max-width:200%;border-collapse:collapse}.wrapper .table-message-wrapper .table-message .table-message-headings{align-items:center;color:var(--color-table-header-text);background-color:var(--color-table-header-background);display:flex}.wrapper .table-message-wrapper .table-message .table-message-headings .table-message-heading{font-size:12px;font-weight:600;line-height:16px;padding:16px;min-width:120px}.wrapper .table-message-wrapper .table-message .table-message-row{border-top:1px solid var(--color-table-separator);display:flex;align-items:center}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item{color:var(--color-table-text);font-size:16px;line-height:20px;min-width:120px;padding:10px 16px}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-lg{font-size:18px;line-height:23.5px}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-md{font-size:16px;line-height:21px}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-size-sm{font-size:13.8px;line-height:18px}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-bold{font-weight:600}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-md{font-weight:400}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item .table-message-value.font-weight-light{font-weight:300}.wrapper .form-message-header{align-items:center;background-color:var(--color-form-header-background);color:var(--color-form-header-text);display:flex;font-weight:700;line-height:20px;padding:16px;text-align:start}.wrapper .form-message-item{color:var(--color-form-text);background-color:var(--color-form-background);display:flex;flex-flow:row wrap;justify-content:space-between;padding:16px}.wrapper .form-message-item .form-row{display:flex;flex:1 0 100%;margin:2px}.wrapper .form-message-item .form-row.separator{border-top:1px solid var(--color-table-separator);margin-top:8px}.wrapper .form-message-item .form-row .form-row-column{display:flex;flex-flow:column wrap;flex:0 1 auto;min-width:0}.wrapper .form-message-item .form-row .form-row-column.stretch{flex-grow:1}.wrapper .form-message-item .form-row .form-row-column.align-center{justify-content:center}.wrapper .form-message-item .form-row .form-row-column.align-start{justify-content:flex-start}.wrapper .form-message-item .form-row .form-row-column.align-end{justify-content:flex-end}.wrapper .form-message-item .form-row .form-row-column:not(:last-child){margin-inline-end:4px}.wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-lg{margin-top:28px}.wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-md{margin-top:16px}.wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-default{margin-top:8px}.wrapper .form-message-item .form-row .form-row-column .edit-form-message-field .listbox{min-width:100%;inset-inline-start:0;max-width:unset}.wrapper .form-message-item.c2k-reference{justify-content:flex-start}.wrapper .form-message-item.c2k-reference .form-row{margin-inline-end:8px;flex-basis:auto;width:auto;line-height:16px;color:rgba(22,21,19,.6509803922)}.wrapper .form-message-item.c2k-reference .form-row .form-row-column:not(:last-child){margin-inline-end:6px}.wrapper .form-message-item.c2k-reference .form-row span.delimiter{margin-inline-end:8px}.wrapper .form-message-item.with-border{border-bottom:1px solid var(--color-table-separator)}.wrapper .form-message-item .form-message-key{color:var(--color-form-label);line-height:16px}.wrapper .form-message-item .form-message-key.font-size-lg{font-size:14px;line-height:18px}.wrapper .form-message-item .form-message-key.font-size-md{font-size:12px;line-height:15.5px}.wrapper .form-message-item .form-message-key.font-size-sm{font-size:10px;line-height:13px}.wrapper .form-message-item .form-message-key.font-weight-bold{font-weight:700}.wrapper .form-message-item .form-message-key.font-weight-md{font-weight:600}.wrapper .form-message-item .form-message-key.font-weight-light{font-weight:400}.wrapper .form-message-item .form-message-key.with-margin{cursor:auto;margin-bottom:8px}.wrapper .form-message-item>.form-message-field:not(:last-child){margin-bottom:16px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-lg{font-size:18px;line-height:23.5px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-md{font-size:16px;line-height:21px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-sm{font-size:13.8px;line-height:18px}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-bold{font-weight:600}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-md{font-weight:400}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-light{font-weight:300}.wrapper .form-message-item .form-message-field .form-message-value.with-top-margin{margin-top:2px}.wrapper .form-message-item .form-message-field .form-message-value button.action-postback{margin-inline-start:0}.wrapper .form-message-item .form-message-field.form-message-field-col-1{flex-basis:100%;max-width:100%}.wrapper .form-message-item .form-message-field.form-message-field-col-2{flex-basis:calc(50% - 12px);max-width:calc(50% - 12px);height:100%}.wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-last-child(2){margin-bottom:0}.wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-child(even) .popupContent{inset-inline-start:calc(50% - 7px)}.wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field:nth-child(even) .listbox{inset-inline:auto 16px}.wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field .listbox{min-width:calc(50% - 28px)}.wrapper .form-message-item .form-message-field.edit-form-message-field{display:flex;flex-direction:column;overflow:visible;width:100%}.wrapper .form-message-item .form-message-field.edit-form-message-field.disabled{cursor:not-allowed}.wrapper .form-message-item .form-message-field.edit-form-message-field .input.form-message-value,.wrapper .form-message-item .form-message-field.edit-form-message-field .textarea.form-message-value,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value{border-radius:4px;background-color:var(--color-form-input-background);color:var(--color-form-input-text);border:1px solid var(--color-form-input-border);font-size:16px}.wrapper .form-message-item .form-message-field.edit-form-message-field .input.form-message-value:focus,.wrapper .form-message-item .form-message-field.edit-form-message-field .textarea.form-message-value:focus,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value:focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field .input:disabled,.wrapper .form-message-item .form-message-field.edit-form-message-field .textarea:disabled,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:disabled{opacity:.5;cursor:not-allowed}.wrapper .form-message-item .form-message-field.edit-form-message-field .input:disabled~.field-error,.wrapper .form-message-item .form-message-field.edit-form-message-field .textarea:disabled~.field-error,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:disabled~.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.input:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.textarea:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.select-wrapper:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.text-field-container:not(:disabled,.disabled){border-color:var(--color-form-error)}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value{height:42px;padding:0 12px}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=date]::-webkit-calendar-picker-indicator,.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=time]::-webkit-calendar-picker-indicator,.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=number]::-webkit-inner-spin-button{cursor:pointer;width:20px;height:20px;margin-inline-end:-8px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper{align-items:center;display:flex;height:44px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.disabled{opacity:.5;pointer-events:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.disabled~.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .input{width:calc(100% - 36px);border:none;box-shadow:none !important;outline:1px solid rgba(0,0,0,0);height:40px;margin-inline-start:1px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .select-icon{margin-inline-start:0;color:var(--color-form-input-text)}.wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value{overflow:auto;padding:11px 12px;resize:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container{display:flex;max-width:max-content}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container.disabled{cursor:not-allowed;opacity:.5}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container.disabled+.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .label{display:flex;min-height:36px;align-items:center;padding:7.5px 0;border-bottom:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .radio-input{margin-inline-end:8px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container{background-color:var(--color-form-input-background);border-radius:4px;border:1px solid var(--color-form-input-border);display:flex;min-height:44px;flex-direction:row;cursor:text}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container.disabled{opacity:.5;pointer-events:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container.disabled~.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container:focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options{padding:0 12px 5px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty{padding-top:5px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty:before{content:attr(data-placeholder)}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option{float:left;line-height:16px;display:flex;align-items:center;cursor:default;border-radius:4px;border:1px solid var(--color-form-input-border);color:var(--color-form-input-text);background-clip:padding-box;font-size:12px;margin-inline-end:6px;margin-top:5px;padding-inline:6px 4px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option .opt-close{cursor:pointer;height:16px;width:16px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox{border:1px solid var(--color-table-separator);border-radius:4px;display:flex;flex-direction:column;margin-top:3px;inset-inline-start:16px;max-width:calc(100% - 32px);min-width:calc(100% - 32px);z-index:3}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box{display:flex;flex-direction:column;padding:0 12px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box .filter-message-text{color:var(--color-form-label);font-size:13.75px;height:42px;padding:12px 0;border-bottom:1px solid var(--color-table-separator)}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .listbox-search{flex-shrink:0;margin:12px;padding-inline-end:36px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper{position:relative;height:0}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper .search-icon{position:absolute;inset-inline-end:21px;bottom:23px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list{animation:none;display:block;max-height:400px;margin:1px 0 2px 0;overflow-y:auto;padding:8px 0;z-index:3}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li{height:auto;margin:0;padding:12px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected{border-top:1px solid #227e9e;background-color:#e4f1f7}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected:last-child,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected:last-child{box-shadow:inset 0 -1px 0 0 #227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list .li:not(.none).selected+li,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list .li:not(.none).selected+li{border-top:1px solid #227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle{position:relative;width:36px;height:20px}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle.disabled+.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:disabled+.round-slider{cursor:not-allowed;opacity:.5}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:checked+.round-slider{background-color:#227e9e;border-color:#227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .input:checked+.round-slider:before{inset-inline:auto 1px;transition:height .3s cubic-bezier(0, 0, 0.2, 1),width .3s cubic-bezier(0, 0, 0.2, 1),right .3s cubic-bezier(0, 0, 0.2, 1)}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider{position:absolute;cursor:pointer;background-color:#8b8580;transition:background-color .2s linear .1s,opacity .2s linear .1s,border-color .2s linear .1s;border:1px solid rgba(0,0,0,0);border-radius:4px;height:20px;width:36px}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider:before{border-radius:4px;width:16px;height:16px;inset-inline:1px auto;position:absolute;content:"";bottom:1px;background-color:var(--color-form-background);transition:height .3s cubic-bezier(0, 0, 0.2, 1),width .3s cubic-bezier(0, 0, 0.2, 1),left .3s cubic-bezier(0, 0, 0.2, 1)}.wrapper .form-message-item span.field-error{display:flex;margin-top:2px;line-height:16px}.wrapper .form-message-item span.field-error .error-text{color:var(--color-form-error-text);font-size:12px;margin-inline-start:4px}.wrapper .form-message-item span.field-error svg.form-error-icon{position:relative;height:16px;width:16px;fill:var(--color-form-error);flex-shrink:0}.wrapper .form-message-item span.field-error.form-error{padding:8px;background:var(--color-error-message-background);border-radius:4px;margin:10px 0;border:thin dashed var(--color-error-border);width:100%}.wrapper .form-message-item span.field-error.form-error.disabled{display:none}.wrapper .form-message-item span.field-error.form-error svg.form-error-icon{top:0}.wrapper .form-message-item span.field-error.form-error .error-text{font-weight:600;color:var(--color-error-title);margin-inline-start:8px;font-size:14px}.wrapper .form-message-item span.field-required-tip-end,.wrapper .form-message-item span.field-required-tip{display:flex;flex-direction:column;margin-top:2px;line-height:16px}.wrapper .form-message-item span.field-required-tip-end .required-tip-text,.wrapper .form-message-item span.field-required-tip .required-tip-text{color:var(--color-form-required-tip);font-size:12px;margin-inline-start:4px;margin-inline-end:4px}.wrapper .form-message-item span.field-required-tip-end{align-items:end}.wrapper .form-message-item .form-actions .action-postback,.wrapper .form-message-item .form-message-value .action-postback{background:var(--color-form-actions-background);color:var(--color-form-actions-text);border-color:var(--color-form-actions-border)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover{color:var(--color-form-actions-text-hover);background:var(--color-form-actions-background-hover)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover svg>path{fill:var(--color-form-actions-text-hover)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus,.wrapper .form-message-item .form-actions .action-postback:not(:disabled):active,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active{background:var(--color-form-actions-background-focus);color:var(--color-form-actions-text-focus)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus svg>path,.wrapper .form-message-item .form-actions .action-postback:not(:disabled):active svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active svg>path{fill:var(--color-form-actions-text-focus)}.wrapper .tableform-message .table-message-row{cursor:pointer}.wrapper .tableform-message .table-message-row:hover{background-color:var(--color-table-row-background-hover)}.wrapper .tableform-message .table-message-row .widget-button:hover,.wrapper .tableform-message .table-message-row .widget-button:active,.wrapper .tableform-message .table-message-row .widget-button:focus{background-color:unset}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child,.wrapper .tableform-message .table-message-row .table-message-item:last-child{min-width:unset;padding:0}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child .widget-button,.wrapper .tableform-message .table-message-row .table-message-item:last-child .widget-button{margin:0 2px;transition:transform .25s ease-in-out}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child .widget-button.rotate-180,.wrapper .tableform-message .table-message-row .table-message-item:last-child .widget-button.rotate-180{transform:rotate3d(0, 0, 1, 180deg)}.wrapper .tableform-message .form-message-item{margin:0;padding:16px;transition:all .25s ease-in-out;border-bottom:none}.wrapper .tableform-message .form-message-item:last-child{border-top:1px solid var(--color-table-bottom)}.wrapper .footer-form{width:100%}.wrapper .footer-form .message-bubble-form-message{background:rgba(0,0,0,0);border:none;width:100%}.wrapper .footer-form .message-bubble-form-message .form-message-item{background:rgba(0,0,0,0);padding:0}.wrapper .footer-form .message-bubble-form-message .form-message-item .form-message-key{color:var(--color-footer-form-label)}.wrapper .footer{max-width:100%;padding:0;position:relative;background-color:var(--color-footer-background);z-index:3;box-shadow:0px -1px 4px 0px rgba(0,0,0,.1019607843);border-top:1px solid rgba(22,21,19,.1)}.wrapper .footer .footer-mode-keyboard{margin:5px;background-color:var(--color-input-background);color:var(--color-input-text);border:1px solid var(--color-input-border);border-radius:6px}.wrapper .footer .footer-mode-voice{height:60px;padding:14px 0;background:var(--color-visualizer-container-background);justify-content:center}.wrapper .footer .footer-mode-voice .footer-visualizer-wrapper{max-width:296px;height:32px}.wrapper .footer .footer-logo{flex:0 0 auto;max-width:100px;max-height:36px;overflow:hidden;padding:0}.wrapper .footer.mode-keyboard .button-switch-kbd{display:none}.wrapper .footer.mode-keyboard .footer-mode-voice{display:none}.wrapper .footer.mode-voice .button-switch-voice{display:none}.wrapper .user-input{flex:1 1 auto;min-height:44px;min-width:0;padding:14px 4px 14px 10px;margin:0;font-size:16px;font-family:inherit;text-align:start;line-height:16px;outline:1px solid rgba(0,0,0,0);resize:none;border:none;background-color:rgba(0,0,0,0);color:var(--color-input-text)}.wrapper .user-input:focus,.wrapper .user-input:focus-visible{outline:1px solid rgba(22,21,19,0)}.wrapper .footer-actions{margin-inline-end:2px}.wrapper .footer-button.button-send{background-color:var(--color-footer-button-fill);border-radius:50%}.wrapper .footer-button.button-send svg>path{fill:var(--color-input-background)}.wrapper .footer-button.button-send:not(:disabled):hover{background-color:var(--color-footer-button-fill-hover)}.wrapper .footer-button.button-send:not(:disabled):hover svg>path{fill:var(--color-input-background)}.wrapper .footer-button svg>path{fill:var(--color-footer-button-fill)}.wrapper .footer-button:not(:disabled):hover{background-color:var(--color-footer-button-background-hover)}.wrapper .footer-button:not(:disabled):hover svg>path{fill:var(--color-footer-button-fill-hover)}.wrapper .autocomplete-items{position:absolute;bottom:56px;width:100%;max-height:280px;overflow-y:auto;background-color:var(--color-input-background);box-shadow:0px -1px 4px 0px rgba(0,0,0,.1019607843);margin:0 -5px;padding:0}.wrapper .autocomplete-items .autocomplete-item{align-items:center;display:flex;margin:0;min-height:40px;padding:8px 16px;cursor:pointer}.wrapper .autocomplete-items .autocomplete-item:hover,.wrapper .autocomplete-items .autocomplete-item.autocomplete-active{background-color:var(--color-card-nav-button-hover)}.wrapper .autocomplete-items .autocomplete-item:first-of-type{margin-top:8px}.wrapper .autocomplete-items .autocomplete-item:last-of-type{margin-bottom:8px}.wrapper .autocomplete-items .autocomplete-item .strong{font-weight:700}.wrapper .autocomplete-items .autocomplete-item::marker{content:none}.wrapper.embedded .open{width:100%;height:100%}.wrapper.embedded .open .widget{border-radius:0;width:100%;min-width:100%;max-width:100%;height:100%;position:inherit;box-shadow:none;max-height:unset}.wrapper.popup-content-wrapper{background:rgba(22,21,19,.4);width:100vw;height:100vh;position:fixed;z-index:10000;top:0 !important;left:0 !important;display:flex;align-items:center;justify-content:center}.wrapper.popup-content-wrapper .popup-dialog{overflow:hidden;max-width:600px;border-radius:6px;box-shadow:0px 6px 12px 0px rgba(0,0,0,.2);max-height:calc(100vh - 16px)}.wrapper.popup-content-wrapper .popup-dialog .popup-header{justify-content:flex-end;background-color:#fff;height:56px;padding:0 8px}.wrapper.popup-content-wrapper .popup-dialog .message-bubble{width:auto;padding:32px;margin-top:0;border-radius:0;overflow:auto;max-height:calc(100vh - 16px)}.wrapper.popup-content-wrapper .popup-dialog .message-bubble:last-child{border-radius:0}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-header{display:none}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message{padding:0}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message:last-child .form-message-header{border-radius:0}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message:last-child .form-message-item{border-radius:0}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message .form-message-header{padding:32px 32px 12px;border-radius:0;justify-content:space-between}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message .form-message-item{padding:0 32px 32px;border-radius:0}.wrapper .full-screen-modal{position:fixed;top:0;left:0;width:100%;height:100vh;z-index:1000000;background-color:rgba(0,0,0,.8)}.wrapper .modal-header{background:linear-gradient(180deg, rgba(0, 0, 0, 0.5), transparent);color:#fff;display:flex;justify-content:space-between;position:relative;padding:10px 20px;z-index:1000001}.wrapper .modal-header .close-btn{border:none;background:rgba(0,0,0,0);cursor:pointer}.wrapper .full-screen-image{position:absolute;max-width:100vw;max-height:100vh;margin:auto;top:0;bottom:0;left:0;right:0}.wrapper .typing-cue-wrapper{width:32px;margin:auto;display:flex}.wrapper .typing-cue-wrapper .typing-cue{position:relative;left:0;right:0;margin:auto;width:8px;height:8px;border-radius:50%;background-color:var(--color-typing-indicator);animation:typing-cue 1550ms infinite linear alternate;animation-delay:250ms;opacity:.1}.wrapper .typing-cue-wrapper .typing-cue::before,.wrapper .typing-cue-wrapper .typing-cue::after{content:"";display:inline-block;position:absolute;width:8px;height:8px;border-radius:50%;background-color:var(--color-typing-indicator);animation:typing-cue 1550ms infinite linear alternate;opacity:.1}.wrapper .typing-cue-wrapper .typing-cue::before{left:-12px;animation-delay:0s}.wrapper .typing-cue-wrapper .typing-cue::after{left:12px;animation-delay:500ms}.wrapper .hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.wrapper .rating-root{display:flex}.wrapper [dir=rtl] .rating-root{flex-direction:row-reverse}.wrapper .rating-wrapper{display:flex;margin-top:8px}.wrapper [dir=rtl] .rating-wrapper{flex-direction:row-reverse}.wrapper .rating-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.wrapper .star-label{background-color:rgba(0,0,0,0);border:0;cursor:pointer;padding:0}.wrapper .star-label>svg>path{fill:var(--color-rating-star)}.wrapper .star-input.active+label>svg>path{fill:var(--color-rating-star-fill)}.wrapper .star-input:disabled+.star-label{cursor:not-allowed;filter:brightness(0.8)}.wrapper .rating-star-icon{height:32px;width:32px}.wrapper.expanded .widget:not(.drag){animation:scale-in-br .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper.expanded .widget.sidepanel{animation:unset}.wrapper.expanded .widget .resizable{width:4px;height:100%;top:0;left:0;background-color:rgba(0,0,0,0);position:absolute;z-index:10000;cursor:col-resize}.wrapper.expanded .widget .resizable.right-resize{right:0;left:unset}.wrapper.expanded .widget .resizable.top-resize{width:100%;height:4px;cursor:row-resize}.wrapper.expanded .widget .resizable.corner{height:8px;width:8px;cursor:nwse-resize}.wrapper.expanded .widget .resizable.corner.right-resize{cursor:nesw-resize}.wrapper.expanded:not(.pos-left) .right-resize{display:none}.wrapper.expanded .button:not(.drag){animation:scale-out-center .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}.wrapper.collapsed .widget:not(.drag){animation:scale-out-br .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}.wrapper.collapsed .widget.sidepanel{animation:unset}.wrapper.collapsed .notification-badge{background-color:var(--color-notification-badge-background);color:var(--color-notification-badge-text);right:-5px;top:-5px;align-items:center;border-radius:24px;display:flex;font-size:14px;height:24px;justify-content:center;position:absolute;text-align:center;width:32px}.wrapper.collapsed .button:not(.drag){animation:scale-in-center .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper.pos-left .widget{right:unset;left:calc(var(--position-left)*-1);max-width:100vw}.wrapper.pos-left.expanded .widget:not(.drag){animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper.pos-left.expanded .widget .left-resize{display:none}.wrapper.pos-left.collapsed .widget{animation:scale-out-bl .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}.wrapper .ellipsis{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.wrapper .popup{position:absolute;background-color:var(--color-popup-background);color:var(--color-popup-text);min-width:140px;max-height:280px;display:none;padding:4px 0;border-radius:6px;box-shadow:rgba(0,0,0,.16) 0px 4px 8px 0px;overflow-y:auto;z-index:5}.wrapper .popup .li{display:flex;align-items:center;height:48px;margin:4px 0;cursor:pointer;overflow:hidden;color:var(--color-popup-button-text)}.wrapper .popup .li svg>path{fill:var(--color-popup-text)}.wrapper .popup .li#action-menu-option-lang{border-top:1px solid var(--color-popup-horizontal-rule)}.wrapper .popup .li.disable{pointer-events:none;cursor:not-allowed;opacity:.5}.wrapper .popup .li:focus{outline:1px dotted var(--color-actions-outline-focus);outline-offset:1px}.wrapper .popup .li:hover,.wrapper .popup .li:focus,.wrapper .popup .li.active{background-color:var(--color-popup-item-background-hover)}.wrapper .popup .li .icon{margin-inline-start:16px;height:20px;width:20px}.wrapper .popup .li .text{padding:0 16px 0 16px}.wrapper .popup.expand{display:block;-webkit-animation:scale-in-br .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-br .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper .popup.action-menu,.wrapper .popup.language-selection-menu{top:50px;bottom:unset}.wrapper .popup.action-menu.expand,.wrapper .popup.language-selection-menu.expand{display:block;-webkit-animation:scale-in-tr .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-tr .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper .popup.language-selection-menu{max-height:calc(100% - 280px)}.wrapper .popup.share-popup-list{bottom:50px;left:unset}.wrapper .spinner{height:48px;width:48px}.wrapper .spinner svg{animation-duration:750ms;-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite}.wrapper .spinner svg circle{fill:rgba(0,0,0,0);stroke:var(--color-user-text);stroke-width:2px;stroke-dasharray:128px;stroke-dashoffset:82px}.wrapper .webview-container{position:absolute;width:100%;height:80%;bottom:0;box-shadow:0px -4px 32px rgba(0,0,0,.1);z-index:10}.wrapper .webview-container .webview-header svg{fill:var(--color-actions-text)}.wrapper .webview-container .webview-header .widget-button{color:var(--color-actions-text)}.wrapper .webview-container .spinner{position:absolute;margin:auto;left:0;right:0;top:40%}.wrapper .webview-container .iframe{width:100%;height:100%;background:var(--color-conversation-background);border:none}.wrapper .webview-container .webview-error{position:absolute;bottom:0;background:var(--color-popup-background);width:calc(100% - 32px);margin:10px 16px;padding:6px 16px;border-radius:6px;display:flex;align-items:center;box-shadow:0px -4px 32px rgba(0,0,0,.1)}.wrapper .webview-container .webview-error .webview-error-button-close{border:none}.wrapper .webview-container .webview-alt-link{color:var(--color-links)}.wrapper .webview-container.webview-container-close{animation:webview-slide-out-bottom .4s cubic-bezier(0.55, 0.085, 0.68, 0.53) both}.wrapper .webview-container.webview-container-open{animation:webview-slide-in-bottom .4s cubic-bezier(0.25, 0.46, 0.45, 0.94) both}.widget{position:absolute;bottom:calc(var(--position-bottom)*-1);border-radius:6px 6px 0 0;box-shadow:0px -4px 32px rgba(0,0,0,.1);right:calc(var(--position-right)*-1);width:100vw;min-width:100vw;max-width:100vw;max-height:var(--widget-max-height);margin:0;overflow:hidden;text-decoration:none;text-transform:none;z-index:10000;align-items:stretch;background:var(--color-conversation-background)}.widget.large-size{--bubble-max-width: 780px}.wrapper .widget.large-size{font-size:18px;line-height:24px}.wrapper .widget.large-size .card{padding:24px}.wrapper .widget.large-size .card .card-content{margin-bottom:24px}.wrapper .widget.large-size .card .card-image{margin:-24px -24px 10px;width:calc(100% + 48px)}.wrapper .widget.large-size .message-bubble{line-height:24px;padding:16px 24px}.wrapper .widget.large-size .attachment .attachment-placeholder{margin:-16px -24px 0;max-width:calc(100% + 48px)}.wrapper .widget.large-size .attachment .attachment-footer{margin:0 -24px -16px}.wrapper .widget.large-size .widget-button:not(.icon){height:44px}.wrapper .widget.large-size .footer{border-radius:20px 20px 0 0;margin:0 24px;overflow:hidden}.wrapper .widget.large-size .footer.left{margin-inline-start:68px}.wrapper .widget.large-size .footer.right{margin-inline-end:68px}.wrapper .widget.large-size .footer-actions{margin-inline-end:10px}.wrapper .widget.large-size .user-input{font-size:18px;line-height:24px;min-height:60px;padding:18px 12px 18px 18px}.wrapper .widget.medium-size{font-size:16px;line-height:20px}.wrapper .widget.medium-size .card{padding:16px}.wrapper .widget.medium-size .card .card-content{margin-bottom:16px}.wrapper .widget.medium-size .card .card-image{margin-top:-16px}.wrapper .widget.medium-size .message-bubble{line-height:20px;padding:8px 16px}.wrapper .widget.medium-size .attachment .attachment-placeholder{margin:-8px -16px 0}.wrapper .widget.medium-size .attachment .attachment-footer{margin:0 -16px -8px}.wrapper .widget.medium-size .footer{border-radius:20px 20px 0 0;margin:0 24px;overflow:hidden}.wrapper .widget.medium-size .user-input{font-size:16px;line-height:20px;min-height:60px;padding:20px 12px 20px 10px}.wrapper .widget.large-size .icon-wrapper,.wrapper .widget.medium-size .icon-wrapper{height:36px;width:36px;min-height:36px;min-width:36px}.wrapper .widget.large-size .message.card-message-horizontal,.wrapper .widget.medium-size .message.card-message-horizontal{margin-inline-start:-24px}.wrapper .widget.large-size .message.card-message-horizontal .message-header,.wrapper .widget.large-size .message.card-message-horizontal .message-footer,.wrapper .widget.large-size .message.card-message-horizontal .message-global-actions,.wrapper .widget.medium-size .message.card-message-horizontal .message-header,.wrapper .widget.medium-size .message.card-message-horizontal .message-footer,.wrapper .widget.medium-size .message.card-message-horizontal .message-global-actions{margin-inline-start:24px;max-width:calc(.9*(100% - 36px))}.wrapper .widget.large-size .message.card-message-horizontal .card-message-cards,.wrapper .widget.medium-size .message.card-message-horizontal .card-message-cards{padding-inline-start:24px}.wrapper .widget.large-size .card,.wrapper .widget.medium-size .card{width:344px}.wrapper .widget.large-size .conversation,.wrapper .widget.medium-size .conversation{padding:16px 24px}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal{margin-inline-start:-68px}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-header,.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-footer,.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-global-actions,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-header,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-footer,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-global-actions{margin-inline-start:68px}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .card-message-content .card-message-cards,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message.card-message-horizontal .card-message-content .card-message-cards{padding-inline-start:68px}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .relative-timestamp.left,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .relative-timestamp.left{margin-inline-start:44px}.wrapper .widget.large-size .conversation .conversation-pane.user-icon .relative-timestamp.right,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon .relative-timestamp.right{margin-inline-end:44px}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.wrapper .widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper{max-width:min(var(--bubble-max-width),.9*(100% - 44px))}.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.large-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.large-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.medium-size .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:min(var(--bubble-max-width),.9*(100% - 92px))}.wrapper .widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper{max-width:min(var(--bubble-max-width),.9*(100% - 88px))}.wrapper .widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.large-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .widget.medium-size .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:min(var(--bubble-max-width),.9*(100% - 136px))}.wrapper .widget.large-size .message-bubble-tabular-message,.wrapper .widget.large-size .message-bubble-form-message,.wrapper .widget.medium-size .message-bubble-tabular-message,.wrapper .widget.medium-size .message-bubble-form-message{padding:0}.widget .alert-wrapper{position:absolute;top:48px;width:100%}.widget .alert-wrapper .alert-prompt{position:relative;left:0;right:0;width:auto;margin:6px;padding:10px;border-radius:10px;z-index:11}.widget .msg-icon{padding:5px 10px 0 0}.widget .msg{flex-grow:1}.sidepanel-content-wrapper{display:flex;width:100vw}.sidepanel-content-wrapper>*{flex-grow:1}.sidepanel-content-wrapper .wrapper:not(.contextual-widget){position:absolute;bottom:0;right:0;height:100vh;flex-grow:unset;width:0;min-width:0;max-width:0;flex-shrink:0;--width-full-screen: 375px}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded{min-width:100vw;max-width:100vw}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded::after{content:"";background-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:4px;height:100%;cursor:col-resize;z-index:10000}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded.drag{transition:unset}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded.drag::after{background-color:#ccc}.sidepanel-content-wrapper .widget{position:relative;bottom:0;right:0;left:0;top:0;width:100%;min-width:unset;max-width:unset;height:100%;max-height:100%;box-shadow:none;border-radius:0}.contextual-widget-wrapper{position:relative}.contextual-widget-wrapper .widget-wrapper{position:sticky;height:0;z-index:1;top:8px;max-width:100%}.contextual-widget-wrapper .widget-wrapper .container{position:absolute;right:-44px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget{position:relative;width:272px;border-radius:6px;background-color:#f5f4f2;box-shadow:0px 6px 12px 0px rgba(0,0,0,.2)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size{width:36px;box-shadow:0px 1px 4px 0px rgba(0,0,0,.1215686275);border-radius:4px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size.no-feedback>:first-child{border-bottom:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size.no-feedback>:not(:first-child){display:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size>:not(:last-child){border-bottom:1px solid rgba(22,21,19,.1215686275)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size .widget-button{background:#f5f4f2;margin-inline-start:0;border-radius:0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size{width:416px;display:block}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size .conversation .message-wrapper{border-bottom:1px solid rgba(22,21,19,.1215686275)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size .footer.enabled{display:block}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget:not(.full-size) .message-actions>:only-child,.contextual-widget-wrapper .widget-wrapper .container .contextual-widget:not(.full-size) .message-actions>:nth-child(2){border:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header{height:44px;background:#f5f4f2;padding:8px 12px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header .logo{height:16px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header .title{height:16px;font-weight:400;font-size:12px;line-height:16px;color:rgba(22,21,19,.6980392157)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message{display:flex;height:76px;border-radius:6px;border:1px solid rgba(22,21,19,.1215686275);margin:0 12px 12px;background:#fef9f2;padding:8px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-icon{height:18px;margin:8px;padding-top:2px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info{margin:8px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info .error-text{color:#8f520a;line-height:20px;font-weight:700}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info .reset-button{cursor:pointer;line-height:16px;font-size:13.75px;font-weight:600;margin-top:8px;color:#161513}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-global-actions{margin-top:0px;padding:12px 12px 4px;background:#fff}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-global-actions button.action-postback{height:auto}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper{padding:0 12px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper .message-actions{margin-top:0;margin-bottom:4px;padding:0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper .message-actions .action-postback{background:rgba(0,0,0,0)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-bubble{font-size:13.75px;line-height:16px;margin-top:0;margin-bottom:0;background:rgba(0,0,0,0);border-radius:0;min-height:unset;padding:0 !important}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-bubble .message-text{margin-bottom:12px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .footer,.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .footer-form{display:none}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner{background-color:#f5f4f2;box-sizing:border-box;width:154px;height:52px;padding:8px 12px;border-radius:6px;box-shadow:0px 6px 12px 0px rgba(0,0,0,.2);position:sticky;top:8px;bottom:8px;z-index:1;display:flex;align-items:center}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-icon{height:16px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-icon.spin{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-text{width:70px;height:16px;font-size:12px;line-height:16px;color:rgba(22,21,19,.6980392157)}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .close-button{border:rgba(0,0,0,0);cursor:pointer;background:#f5f4f2;width:36px;height:36px;padding:8px}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner>:not(:last-child){margin-inline-end:4px}.contextual-widget-wrapper .widget-wrapper .widget{position:relative;bottom:0;right:0;left:0;top:0;width:100%;height:100%;border-radius:6px}.search-bar-widget-wrapper{display:flex;gap:8px;height:100%;min-height:44px;position:relative}.search-bar-widget-wrapper .dialog-wrapper{position:relative}.search-bar-widget-wrapper .dialog-wrapper .dialog{position:relative}.search-bar-widget-wrapper .footer{border:none;box-shadow:none;background:rgba(0,0,0,0);height:100%;width:100%;display:flex}.search-bar-widget-wrapper .footer.mode-voice+.search-bar-widget .search-bar-popup{display:none}.search-bar-widget-wrapper .footer .footer-mode-keyboard{display:flex;align-items:flex-start;min-height:unset;margin:0;border:0;background:rgba(0,0,0,0);height:100%;top:0;position:relative;width:100%}.search-bar-widget-wrapper .footer .footer-mode-voice{position:absolute;left:0;right:0;top:calc(100% + 2px);border:1px solid rgba(22,21,19,.12)}.search-bar-widget-wrapper .footer .user-input{height:100%;min-height:unset;padding:4px;line-height:unset}.search-bar-widget-wrapper .footer .footer-actions{height:100%}.search-bar-widget-wrapper .footer .footer-actions .share-popup-list{max-height:unset;bottom:unset;animation:none}.search-bar-widget-wrapper .autocomplete-items{max-height:unset;top:56px;bottom:unset}.search-bar-widget-wrapper .search-bar-widget{position:absolute;bottom:0;height:0;width:100%}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content{position:relative;top:4px;background:#fff;min-width:100%;width:100%;max-width:100%;border-radius:6.06px;border:1px solid #000;padding:8px;box-shadow:0 12px 20px rgba(0,0,0,0.2784313725);max-height:40vh;overflow:hidden auto;scroll-behavior:smooth;transition:all .2s ease-in-out}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup{position:relative;display:flex;flex-direction:column;--color-conversation-background: #fff}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup:empty{display:none !important}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .user-message{font-weight:bold}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message{max-width:100%}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message.card-message-horizontal{margin-inline:0;width:100vw}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message-bubble.error{background:var(--color-bot-message-background);border:none;color:var(--color-bot-text)}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message-bubble-tabular-message,.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .search-bar-popup .message-bubble-form-message{width:100%}.search-bar-widget-wrapper .search-bar-widget .search-bar-widget-content .input-popup-slot{position:relative}.search-bar-widget-wrapper .search-bar-popup-separator{border:1px solid var(--color-search-bar-separator);height:0;margin:8px 0}.search-bar-widget-wrapper .input-start-slot,.search-bar-widget-wrapper .input-end-slot,.search-bar-widget-wrapper .input-popup-slot{word-break:normal;overflow-wrap:anywhere}.search-bar-widget-wrapper .input-end-slot{flex:1 1 auto;overflow-x:auto}.image-preview-wrapper{background:rgba(0,0,0,.8);height:100%;position:fixed;top:0;left:0;width:100%;z-index:10000}.image-preview-wrapper .image-preview-header{align-items:center;background:linear-gradient(180deg, rgba(0, 0, 0, 0.5), transparent);color:#fff;display:flex;justify-content:space-between;position:relative;padding:10px 20px;z-index:1000001}.image-preview-wrapper .image-preview-header .image-preview-close{background:rgba(0,0,0,0);border:none;cursor:pointer;height:36px;width:36px}.image-preview-wrapper .image-preview-header .image-preview-close .image-preview-close-icon{fill:#fff;height:100%;width:100%}.image-preview-wrapper .image-preview{bottom:0;left:0;margin:auto;max-height:100vh;max-width:100vw;position:absolute;right:0;top:0}.arrow-icon{margin-inline-end:2px;width:32px;height:32px;display:flex;align-items:center;flex-shrink:0}@media screen and (min-width: 426px){.wrapper.pos-left .widget{left:0}.wrapper:not(.embedded) .widget:not(.sidepanel){max-width:calc(100vw - var(--position-right))}.wrapper:not(.embedded).pos-left .widget:not(.sidepanel){max-width:calc(100vw - var(--position-left))}.widget:not(.sidepanel){width:var(--width-full-screen);min-width:unset;max-height:var(--widget-max-height);bottom:0;right:0}.user-input{font-size:13.75px}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget){position:sticky;top:0}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget).expanded{min-width:375px;max-width:800px}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget) .widget{border-left:thin solid #ccc}}@media(prefers-reduced-motion){.open{animation:none}.close{animation:none}}[dir=rtl] .wrapper *{direction:rtl}[dir=rtl] .multi-select-option{float:right !important}[dir=rtl] .wrapper{text-align:right}[dir=rtl] .wrapper .widget.open{animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}[dir=rtl] .wrapper .widget.close{animation:scale-out-bl .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}[dir=rtl] .wrapper .message-bubble{border-radius:10px 2px 2px 10px}[dir=rtl] .wrapper .message-block .message:last-child .message-bubble:last-child{border-radius:10px 2px 10px 10px}[dir=rtl] .wrapper .message-block.right .messages-wrapper .message .message-bubble{border-radius:2px 10px 10px 2px}[dir=rtl] .wrapper .message-block.right .messages-wrapper .message:last-child .message-bubble:last-child{border-radius:2px 10px 10px 10px}[dir=rtl] .wrapper .button{left:0;right:unset}[dir=rtl] .wrapper .popup.expand{-webkit-animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}[dir=rtl] .wrapper .popup.action-menu.expand,[dir=rtl] .wrapper .popup.language-selection-menu.expand{-webkit-animation:scale-in-tl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-tl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}'},5565:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(833),t),o(s(3693),t)},833:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.UserAudioEvent=void 0;t.UserAudioEvent={AudioData:"uae:audiodata",AnalyserData:"uae:analyserdata"}},3693:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.UserAudioProviderService=void 0;const o=s(6064),r=s(7262),a=s(833),n=s(7585);class c{static getInstance(){return this.zd||(this.zd=new c),this.zd}constructor(){this.$d=(0,n.createAudioWorklet)(l),this.$=!1,this.Cd=new Float32Array(p),this.Sd=0,this.Id=!0,this.Td=new Float32Array(0),this.Ad=(0,o.generateEventDispatcher)(),this.Ed=e=>{this.Pd&&(this.Pd.resolve(),this.Pd=void 0),this.Ld()&&this.Fd(),e.data&&this.Rd(e.data)}}start(){return i(this,void 0,void 0,(function*(){if(this.$)return;this.$=!0;const e=yield(0,r.getAudioResources)();this.Dd=e.context,this.Nd=e.streamNode;const{analyserNode:t,processorNode:s}=yield this.Hd(e);this.Vd=t,this.Ud=s,s.port.onmessage=this.Ed,this.Pd=new o.Deferred,yield this.Pd.promise}))}stop(){return i(this,void 0,void 0,(function*(){return this.se()}))}getAnalyser(){return this.Vd}on(e,t){this.Ad.bind(e,t)}Hd(e){return i(this,void 0,void 0,(function*(){const{context:t,streamNode:s}=e;yield t.audioWorklet.addModule(this.$d);const i=new AudioWorkletNode(t,l),o=t.createAnalyser();return o.smoothingTimeConstant=h,o.fftSize=d,this.Bd=window.setInterval((()=>{this.Wd()}),u),s.connect(o).connect(i).connect(t.destination),{analyserNode:o,processorNode:i}}))}Ld(){return this.Sd===p}Fd(){const e=this.Sd<p?this.Cd.slice(0,this.Sd):this.Cd;this.Sd=0,this.qd(e)}Rd(e){for(const t of e)this.Cd[this.Sd++]=t}qd(e){var t,s;const i=null!==(s=null===(t=this.Dd)||void 0===t?void 0:t.sampleRate)&&void 0!==s?s:g;try{const t=this.Gd(e,i,b);this.Ad.trigger(a.UserAudioEvent.AudioData,t)}catch(e){this.stop()}}Gd(e,t,s){if(s===t)return e.buffer;if(s>t)throw Error();let i=[];switch(t){case g:i=f;break;case m:i=v;break;default:throw Error()}const o=t/s;let r,a,n;const c=this.Id,l=this.Td;c?(r=Math.floor(e.length%o),a=e.length-r,n=0===r?Array.from(e):e.slice(0,a)):(r=Math.floor((e.length+l.length-i.length)%o),a=e.length+l.length-i.length-r,n=new Float32Array(l.length+a),n.set(l),n.set(e.slice(0,a),l.length));const h=Math.floor(a/o),d=new Int16Array(h);if(t===g)for(let e=i.length;e<n.length;e+=o){let t=0;for(let s=0;s<i.length;s++)t+=n[e-s]*i[s];const s=32767*Math.max(Math.min(t,1),-1);d[(e-i.length)/o]=s}else{const e=[];for(let t=i.length;t<n.length;t++){let s=0;for(let e=0;e<i.length;e++)s+=n[t-e]*i[e];e[t-i.length]=s}for(let t=0;t<h;t++){const s=3,i=t*o,r=Math.floor(i)-s+1,a=Math.floor(i)+s;let n=0;for(let t=r;t<=a;t++){n+=(t<0?e[0]:t>=e.length?e[e.length-1]:e[t])*w(s,i-t)}d[t]=32767*Math.max(Math.min(n,1),-1)}}return this.Td=c?e.slice(a-i.length-l.length):e.slice(a-i.length-(l.length-i.length)),this.Id=!1,d.buffer}Wd(){const e=this.Vd;if(e){const t=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(t),this.Ad.trigger(a.UserAudioEvent.AnalyserData,t)}}se(){return i(this,void 0,void 0,(function*(){var e,t,s,i,o,r,a;this.$&&(this.$=!1,clearInterval(this.Bd),null===(e=this.Pd)||void 0===e||e.reject(),this.Pd=void 0,null===(t=this.Ud)||void 0===t||t.disconnect(),null===(s=this.Vd)||void 0===s||s.disconnect(),null===(o=null===(i=this.Nd)||void 0===i?void 0:i.mediaStream)||void 0===o||o.getAudioTracks().forEach((e=>{e.stop()})),null===(r=this.Nd)||void 0===r||r.disconnect(),yield null===(a=this.Dd)||void 0===a?void 0:a.suspend(),this.Ud=void 0,this.Vd=void 0,this.Nd=void 0,this.Id=!0,this.Td=new Float32Array(0),this.Cd=new Float32Array(p),this.Sd=0)}))}}t.UserAudioProviderService=c;const l="oda-voice-processor-worklet",h=.8,d=256,p=4096,u=33,g=48e3,m=44100,b=16e3,f=[-25033838264794034e-21,-3645156113737857e-20,-11489993827892933e-21,393243788874656e-19,6998419352067277e-20,37556691270439976e-21,-476966455345305e-19,-.00011379935461751734,-8400957697117619e-20,4208817777607469e-20,.00016391587447478332,.00015508372993570357,-1253765788919669e-20,-.00021258262011091092,-.0002524059896175195,-51874329668708116e-21,.0002479230009768214,.00037351534477673157,.00016157590781788105,-.0002541085239198603,-.000510486865332593,-.0003246104617540939,.00021219136947965464,.0006488877825604561,.0005444416935293036,-.0001016639071691704,-.0007673001147209819,-.0008176720912938691,-972696982411551e-19,.0008376185852528038,.0011319450250252222,.0004008193339799052,-.0008262743020160207,-.0014643282305934196,-.0008183365045047033,.0006964471772153777,.001780467922489105,.0013489288090360295,-.00041122152287042,-.0020347535966250413,-.0019782994815083733,-6247794246099269e-20,.002171643809964705,.0026761621389245617,.00074944268608935,-.00212817775887288,-.003394541347147186,-.0016615884301227524,.001837545335885159,.004067170702246546,.0027936171643976352,-.001233420727213658,-.004610035314537476,-.004119319153202972,.00025459137646049936,.00492286494534436,.005588805700369816,.001150762425755883,-.004891042781491068,-.0071267634777626675,-.003021979039818941,.00438688631315642,.008631467181982988,.005385139236634672,-.003268406079325266,-.009973661255235284,-.008256256502745316,.0013719935383757782,.010993210336541666,.011651337116264694,.0015082475865128093,-.01148872195209017,-.015609515327517686,-.005671504441670989,.011188303272599716,.02024519058502148,.011637590928971467,-.009667754909210324,-.025878090076785515,-.020500381603699786,.006098908137700642,.033428666116203716,.03513487017573178,.001719739622764723,-.046085580848361105,-.06623078150315037,-.023349941728869696,.08292213207159124,.21069217442624302,.2973829711397418,.2973829711397419,.21069217442624305,.08292213207159124,-.023349941728869693,-.06623078150315037,-.046085580848361105,.0017197396227647225,.03513487017573178,.033428666116203716,.006098908137700641,-.020500381603699783,-.025878090076785508,-.009667754909210326,.011637590928971469,.020245190585021472,.011188303272599716,-.00567150444167099,-.015609515327517682,-.01148872195209017,.001508247586512809,.011651337116264699,.010993210336541666,.0013719935383757782,-.008256256502745314,-.009973661255235283,-.0032684060793252657,.00538513923663467,.008631467181982988,.004386886313156419,-.0030219790398189413,-.0071267634777626675,-.0048910427814910715,.0011507624257558842,.005588805700369813,.00492286494534436,.00025459137646049936,-.004119319153202973,-.004610035314537475,-.0012334207272136583,.002793617164397636,.004067170702246546,.0018375453358851592,-.0016615884301227509,-.0033945413471471847,-.0021281777588728797,.0007494426860893505,.0026761621389245612,.0021716438099647056,-6247794246099253e-20,-.001978299481508373,-.0020347535966250404,-.00041122152287042,.0013489288090360292,.0017804679224891048,.0006964471772153777,-.0008183365045047026,-.00146432823059342,-.0008262743020160207,.0004008193339799063,.0011319450250252222,.0008376185852528037,-9726969824115494e-20,-.0008176720912938694,-.0007673001147209783,-.00010166390716916983,.0005444416935293033,.0006488877825604562,.0002121913694796546,-.00032461046175409424,-.000510486865332593,-.00025410852391986036,.0001615759078178811,.0003735153447767315,.00024792300097682137,-5187432966870808e-20,-.0002524059896175194,-.00021258262011091095,-1253765788919669e-20,.0001550837299357036,.0001639158744747833,42088177776074685e-21,-8400957697117623e-20,-.00011379935461751733,-4769664553453051e-20,3755669127044002e-20,699841935206728e-19,393243788874656e-19,-11489993827892933e-21,-3645156113737856e-20,-2503383826479402e-20],v=[-5044267067893139e-21,5738740247594612e-21,1611195555688156e-20,10560179594562795e-21,-1242816862904201e-20,-3084430704328611e-20,-18160396924882423e-21,2303124169528074e-20,5216612702894834e-20,2806026886746509e-20,-389608521587068e-19,-8174245278012476e-20,-4037543061985353e-20,619375276294956e-19,.00012143092661620545,55083199655424166e-21,-9401891583478883e-20,-.00017326981522755043,-7198069055926206e-20,.0001376274218691789,.00023946132645647525,9064030545698025e-20,-.00019557611633250834,-.0003223511502826996,-.00011036322783022617,.0002710935667931249,.00042440564349633953,.00013013140955365376,-.00036784896615780913,-.0005481886438481025,-.00014855826094166272,.0004899798946967381,.000696340560985472,.00016383778624615643,-.0006421263408051642,-.0008715631880363658,-.00017369118859371453,.000829476349448821,.0010766146787146871,.00017530890385814463,-.0010578310750603923,-.001314320458073489,-.0001652844648711556,.0013337004262191077,.0015876076783199174,.000139534308084411,-.0016644454627712116,-.001899573527380014,-9319422024995832e-20,.002058491185395933,.0022536018141979036,20477911370491685e-21,-.0025256449668619525,-.0026535487754524955,8552498376473957e-20,.0030775744811722015,.0031040297261921,-.00023314744969763122,-.003728529808331677,-.003610856230113392,.000432598472497653,.0044964472481822506,.004181705019767344,-.0006966685466235378,-.005404666489478738,-.00482715710731867,.0010418556659416306,.006484667519607787,.00556235368742558,-.0014902159613265254,-.007780573986407925,-.0064097301786953595,.002072517010858728,.009356870546119134,.0074037416266333166,-.00283386009764953,-.011312323822665827,-.008599512596140524,.003844300507349054,.013806774337071994,.01008985372973804,-.005220460312862638,-.01711716324115331,-.01204196749753927,.007174046245357611,.021768247992024713,.01478690833035584,-.010136389804721707,-.02888735624896028,-.019078400739739057,.015146805312378952,.041410446665863104,.027068163980255515,-.025512027260482153,-.07011218378743589,-.04829678433503421,.06041368701604651,.21199607414538668,.3213532652447261,.3213532652447261,.21199607414538668,.060413687016046526,-.04829678433503422,-.07011218378743589,-.025512027260482153,.027068163980255515,.041410446665863104,.015146805312378952,-.019078400739739057,-.02888735624896028,-.010136389804721703,.01478690833035584,.021768247992024713,.007174046245357611,-.01204196749753927,-.01711716324115331,-.005220460312862639,.010089853729738038,.013806774337071994,.0038443005073490553,-.008599512596140524,-.011312323822665827,-.0028338600976495314,.007403741626633317,.009356870546119134,.002072517010858727,-.006409730178695359,-.007780573986407925,-.001490215961326526,.005562353687425577,.006484667519607787,.0010418556659416256,-.004827157107318673,-.005404666489478739,-.0006966685466235378,.004181705019767345,.004496447248182251,.0004325984724976533,-.003610856230113392,-.003728529808331677,-.0002331474496976315,.0031040297261921003,.003077574481172201,8552498376473897e-20,-.002653548775452496,-.002525644966861952,2047791137049164e-20,.002253601814197904,.002058491185395933,-9319422024995909e-20,-.001899573527380014,-.0016644454627712118,.00013953430808441038,.0015876076783199174,.0013337004262191077,-.0001652844648711556,-.0013143204580734896,-.0010578310750603925,.00017530890385814333,.0010766146787146878,.0008294763494488195,-.00017369118859371463,-.00087156318803637,-.0006421263408051633,.00016383778624615698,.0006963405609854716,.0004899798946967381,-.00014855826094166245,-.0005481886438481027,-.00036784896615780924,.00013013140955365368,.00042440564349633964,.00027109356679312505,-.00011036322783022619,-.0003223511502826996,-.00019557611633250842,9064030545698017e-20,.00023946132645647525,.00013762742186917883,-7198069055926207e-20,-.0001732698152275505,-9401891583478886e-20,5508319965542416e-20,.00012143092661620549,6193752762949557e-20,-4037543061985352e-20,-8174245278012477e-20,-38960852158706805e-21,28060268867465078e-21,52166127028948336e-21,2303124169528077e-20,-18160396924882423e-21,-30844307043286126e-21,-12428168629042018e-21,10560179594562806e-21,1611195555688157e-20,5738740247594605e-21,-5044267067893138e-21],w=(e,t)=>{let s;if(0===t)s=1;else if(Math.abs(t)>=e)s=0;else{const i=Math.PI*t;s=e*Math.sin(i)*Math.sin(i/e)/Math.pow(i,2)}return s}},7585:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.createAudioWorklet=void 0;t.createAudioWorklet=e=>{const t=`\nclass VoiceProcessor extends AudioWorkletProcessor {\n    process(inputs) {\n        this.port.postMessage(inputs[0][0]);\n        return true;\n    }\n}\n\nregisterProcessor('${e}', VoiceProcessor);`;return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}},7262:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.getAudioResources=void 0;const o=s(6246);t.getAudioResources=()=>i(void 0,void 0,void 0,(function*(){if(!r())throw Error(o.RecognitionError.RecognitionNoAPI);return a()}));const r=()=>{var e;return!!(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia)},a=()=>i(void 0,void 0,void 0,(function*(){try{const e=yield navigator.mediaDevices.getUserMedia({audio:!0}),t=new AudioContext;return{context:t,streamNode:t.createMediaStreamSource(e)}}catch(e){throw Error(o.RecognitionError.RecognitionNoAPI)}}))},6323:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.drawVisualizer=void 0;t.drawVisualizer=(e,t,o="#000")=>{const r=t.height,a=t.width,n=Math.floor(r/2);let c=s(e,31);c=i(c,r/255);const l=t.getContext("2d");if(l){l.fillStyle=o,l.clearRect(0,0,a,r),l.save();let e=0;c.forEach((t=>{const s=Math.ceil(t/2)+1;l.fillRect(e,n-s,2,2*s),e+=8})),l.save()}};const s=(e,t)=>{const s=Math.ceil(t/2),i=e.length/s,o=[],r=[];for(let t=0;t<e.length;t+=i){const s=e.slice(t,t+i).map((e=>e*e)).reduce(((e,t)=>e+t),0)/i;o.push(s),r.unshift(s)}return o.splice(0,1),r.concat(o)},i=(e,t)=>e.map((e=>e*t))},2175:function(e,t,s){var i=this&&this.v||function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function n(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"p",{value:!0}),t.AuthTokenService=void 0;const o=s(7689),r=s(1590),a=s(9504);class n{static getInstance(){return this._||(this._=new n),this._}get(){return i(this,void 0,void 0,(function*(){if(this.Zd&&d(this.Zd))return this.Zd;const e=yield this.Yd();this.Zd=new r.JWT(e);try{if(function(e){e||u(o.AuthError.AuthNoToken);const t="iat",s=e.getClaim(t);p(t,l,s);const i=e.getClaim(h);p(h,l,i),i<=s&&u(o.AuthError.AuthExpLessThanIat);const r="channelId",a=e.getClaim(r);p(r,c,a);const n="userId",d=e.getClaim(n);p(n,c,d)}(this.Zd),d(this.Zd))return this.Zd;throw Error(o.AuthError.AuthExpiredToken)}catch(e){throw e}}))}reset(){this.Zd=void 0}setFetch(e){if(!(0,a.isFunction)(e))throw new Error("'generateAuthToken' is not a function. Create a function that returns a Promise that resolves to a new JWT when called.");this.Yd=e,this.reset()}}t.AuthTokenService=n;const c="string",l="number",h="exp";function d(e){const t=Math.floor((Date.now()+2e4)/1e3);return e.getClaim(h)>t}function p(e,t,s){null==s&&u(`AuthNo${e}`),typeof s!==t&&u(`AuthInvalid${e}`),"number"==typeof s?s<=0&&u(`AuthNegative${e}`):s.length||u(`AuthEmpty${e}`)}function u(e){throw Error(e)}},7689:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.AuthError=void 0;t.AuthError={AuthExpiredToken:"AuthExpiredToken",AuthNoToken:"AuthNoToken",AuthNoChannelId:"AuthNochannelId",AuthNoUserId:"AuthNouserId",AuthNoExp:"AuthNoexp",AuthNoIat:"AuthNoiat",AuthInvalidChannelId:"AuthInvalidchannelId",AuthInvalidUserId:"AuthInvaliduserId",AuthInvalidExp:"AuthInvalidexp",AuthInvalidIat:"AuthInvalidiat",AuthEmptyChannelIdClaim:"AuthInvalidchannelId",AuthEmptyUserIdClaim:"AuthInvaliduserId",AuthNegativeExp:"AuthNegativeexp",AuthNegativeIat:"AuthNegativeiat",AuthExpLessThanIat:"AuthExpLessThanIat"}},2003:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(2175),t),o(s(7689),t),o(s(1590),t),o(s(9633),t)},1590:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.JWT=void 0;t.JWT=class{constructor(e){this.token=e;const t=this.token.split(".");this.header=JSON.parse(atob(t[0])),this.payload=JSON.parse(atob(t[1]))}getClaim(e){return this.payload[e]}}},9633:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},8514:(e,t)=>{Object.defineProperty(t,"p",{value:!0})},5277:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.Deferred=void 0;t.Deferred=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),Object.freeze(this)}}},5624:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.isMobile=t.isAndroid=t.isApple=t.getDeviceType=void 0;const s=()=>/Android/i.test(navigator.userAgent);t.isAndroid=s;const i=()=>/iPhone|iPad/i.test(navigator.userAgent)&&!window.MSStream;t.isApple=i;t.isMobile=()=>s()||i();t.getDeviceType=()=>s()?"android":i()?"ios":"desktop"},3392:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.stringToHTML=t.safeHTML=t.replaceButtonsWithDivs=t.removeDisplayNoneAndDecode=t.parseDOM=t.isVisible=t.decodeHTMLEntites=t.copyWithFormatting=void 0;t.removeDisplayNoneAndDecode=e=>{var t;const i=document.createElement("div");i.style.display="none",document.body.appendChild(i),i.innerHTML=e,s(i);const o=null!==(t=i.textContent)&&void 0!==t?t:"";return i.remove(),o};const s=e=>{for(let t=e.childElementCount-1;t>=0;t--){const i=e.children[t],o=window.getComputedStyle(i);"none"===o.display||"hidden"===o.visibility?i.remove():s(i)}},i=e=>{const t=(e=>e.replace(/>\s+</g,"><"))(e),s=t.replace(/\r\n|\n|\r/g,"<br/>");const i=(new DOMParser).parseFromString(s,"text/html");return null==i?void 0:i.body};t.parseDOM=i;t.safeHTML=e=>{const t=i(e);t.querySelectorAll("script, iframe, link, object, embed, meta").forEach((e=>{e.remove()}));return t.querySelectorAll("*").forEach((e=>{const t=[];for(const s of e.attributes)o(s)&&t.push(s);for(const s of t)e.removeAttribute(s.name)})),t.innerHTML};const o=e=>{const t=e.name.toLowerCase(),s=e.value.toLowerCase();return t.startsWith("on")||"style"===t||s.startsWith("javascript")};t.stringToHTML=e=>{const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild};t.decodeHTMLEntites=e=>{const t=document.createElement("textarea");return t.innerHTML=e,t.value};t.isVisible=e=>{if(!e)return!1;const t=window.getComputedStyle(e);return!!("none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity&&e.offsetHeight&&e.offsetWidth&&e.getClientRects().length)&&null!==e.offsetParent};t.copyWithFormatting=e=>{const t=new ClipboardItem({"text/html":new Blob([e.outerHTML],{type:"text/html"}),"text/plain":new Blob([e.innerText],{type:"text/plain"})});return navigator.clipboard.write([t])};t.replaceButtonsWithDivs=e=>{var t;return(null!==(t=e.querySelectorAll("button"))&&void 0!==t?t:[]).forEach((e=>{var t,s;const i=e.querySelector("a");if(i){const s=document.createElement("a");return r(i,s),s.innerHTML=i.innerHTML,void(null===(t=e.parentElement)||void 0===t||t.replaceChild(s,e))}const o=document.createElement("div");null===(s=e.parentElement)||void 0===s||s.replaceChild(o,e)})),e};const r=(e,t)=>{Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)}))}},6362:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.KeyCode=void 0;t.KeyCode={Return:"Enter",Esc:"Escape",Space:"Space",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Tab:"Tab",PageDown:"PageDown",PageUp:"PageUp",Home:"Home",End:"End",Backspace:"Backspace"}},604:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.generateEventDispatcher=void 0;const i=s(9504);t.generateEventDispatcher=()=>{const e=new Map;return{bind:(t,s)=>{var o;t&&s&&(0,i.isFunction)(s)&&(e.has(t)||e.set(t,new Set),null===(o=e.get(t))||void 0===o||o.add(s))},trigger:(t,s)=>{const o=e.get(t);o&&o.forEach((e=>{try{e((0,i.clone)(s))}catch(e){console.error(`${String(t)} listener error`,e)}}))},unbind:(t,s)=>{if(t)if(s){const i=e.get(t);i&&(i.delete(s),0===i.size&&e.delete(t))}else e.delete(t);else e.clear()}}}},2050:(e,t,s)=>{Object.defineProperty(t,"p",{value:!0}),t.isSameDay=t.formatDateRelative=t.formatDate=void 0;const i=s(9504),o=(e,{pattern:t,locale:s})=>{const o=new Date(e);if("string"==typeof t)try{return a(o,t)}catch(e){}else if((0,i.isObject)(t))return new Intl.DateTimeFormat(s,t).format(o);return n(o,s)};t.formatDate=o;t.formatDateRelative=(e,t)=>{var s,i;const a=null!==(s=null==t?void 0:t.locale)&&void 0!==s?s:"en",n=new Date(e),l=new Date,h=r(l,n);if(0===h||-1===h)return c(n,h,a);const d=null!==(i=null==t?void 0:t.pattern)&&void 0!==i?i:{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};return o(n,{pattern:d,locale:a})};const r=(e,t)=>{const s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((i-s)/864e5)},a=(e,t)=>{const s=e.getDate(),i=e.getDay(),o=l[i],r=e.getMonth()+1,a=h[r-1],n=`${e.getFullYear()}`,c=e.getHours(),m=e.getMinutes(),b=e.getSeconds(),f=e.getMilliseconds(),v=c>=d?"PM":"AM",w=p(e),x=c%d||d,k={DD:g(s),Do:`${s}${u(s)}`,D:`${s}`,dddd:o,ddd:o.substring(0,3),d:`${i}`,MMMM:a,MMM:a.substring(0,3),MM:g(r),M:`${r}`,YYYY:n,YY:n.slice(-2),HH:g(c),H:`${c}`,hh:g(x),h:`${x}`,mm:g(m),m:`${m}`,ss:g(b),s:`${b}`,SSS:`${f}`,SS:""+f%100,S:""+f%1e3,A:v,a:v.toLowerCase(),ZZ:w.replace(":",""),Z:w};return t.replace(/DD|Do|D|dddd|ddd|d|MMMM|MMM|MM|M|YYYY|YY|HH|H|hh|h|mm|m|ss|s|SSS|SS|S|A|a|ZZ|Z/g,(e=>k[e]))},n=(e,t)=>{const s=null!=t?t:"en";return`${e.toLocaleDateString(s,{weekday:"short",month:"short",day:"numeric"}).replace(/,/g,"")}, ${e.toLocaleTimeString(s,{hour:"numeric",minute:"numeric",hour12:!0})}`},c=(e,t,s)=>{const i=null!=s?s:"en";return`${new Intl.RelativeTimeFormat(i,{numeric:"auto"}).format(t,"day")}, ${e.toLocaleTimeString(i,{hour:"numeric",minute:"numeric",hour12:!0})}`},l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],d=12,p=e=>{const t=e.getTimezoneOffset(),s=Math.abs(t);return`${s===t?"+":"-"}${g(Math.floor(s/60))}:${g(s%60)}`},u=e=>{let t="th";if(e>=11&&e<=13)return t;switch(e%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd"}return t},g=e=>`${e}`.padStart(2,"0");t.isSameDay=(e,t)=>{const s=new Date(e),i=new Date(t);return s.getDate()===i.getDate()&&s.getMonth()===i.getMonth()&&s.getFullYear()===i.getFullYear()}},5287:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.generateID=void 0;t.generateID=(e={})=>{if(null===e)return"";const{prefix:t="",randomPartLength:s=5,separator:i="-",alphanumeric:o=!1}=e,r=o?36:10,a=Date.now().toString(r);let n="";if(o)n=Math.random().toString(r).replace("0.","").substring(0,s);else{const e=Math.pow(10,s);n=Math.floor(Math.random()*e).toString(r).padStart(s,"0")}return`${t}${t?i:""}${a}${i}${n}`}},6064:function(e,t,s){var i=this&&this.t||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.p:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,o)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),o=this&&this.u||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"p",{value:!0}),o(s(6323),t),o(s(2003),t),o(s(8514),t),o(s(5277),t),o(s(5624),t),o(s(3392),t),o(s(6362),t),o(s(604),t),o(s(2050),t),o(s(5287),t),o(s(9487),t),o(s(9504),t),o(s(2930),t),o(s(589),t),o(s(2634),t),o(s(3172),t)},9487:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.isBetween=function(e,t,s){return e>=t&&e<=s},t.isNumber=function(e){return"number"==typeof e}},9504:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.setReadOnly=t.resetRegex=t.pipe=t.isObject=t.isFunction=t.deepFreeze=t.clone=void 0;const s=e=>"object"==typeof e&&null!==e;t.isObject=s;t.isFunction=e=>e instanceof Function;const i=e=>{if(!s(e)||(t=e,ArrayBuffer.isView(t)&&!(t instanceof DataView))||e instanceof ArrayBuffer||e instanceof Event)return e;var t;if(e instanceof Blob)return e.slice(0,e.size,e.type);if(e instanceof Error){const t=new e.constructor(e.message);return t.stack=e.stack,t.name=e.name,t}return e instanceof Array?e.map((e=>i(e))):e instanceof Date?new Date(e):Object.fromEntries(Object.entries(e).map((([e,t])=>[e,i(t)])))};t.clone=i;const o=e=>{if(!s(e))return e;for(const t of Object.values(e))s(t)&&o(t);return Object.freeze(e)};t.deepFreeze=o;t.setReadOnly=e=>{const t={};return Object.keys(e).forEach((s=>{Object.defineProperty(t,s,{get:()=>e[s],enumerable:!0,configurable:!0})})),t};t.pipe=(e,...t)=>t.reduce(((e,t)=>t(e)),e);t.resetRegex=e=>(e.lastIndex=0,e)},2930:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.startTimer=void 0;const s=window.setInterval,i=window.setTimeout,o=36e5,r=864e5,a=30*r,n=365*r;let c;const l=()=>{clearTimeout(c),clearInterval(c)},h=(e,t,i,o,r,a)=>{var n;let h=1;l(),e((null===(n=t[r])||void 0===n?void 0:n.replace("{0}",`${h}`))||""),c=s((()=>{var s;h++,i&&a&&h>=i?a(e,t):e((null===(s=t[r])||void 0===s?void 0:s.replace("{0}",`${h}`))||"")}),o)},d=(e,t)=>{h(e,t,60,6e4,"relTimeMin",p)},p=(e,t)=>{h(e,t,24,o,"relTimeHr",u)},u=(e,t)=>{h(e,t,30,r,"relTimeDay",g)},g=(e,t)=>{h(e,t,12,a,"relTimeMon",m)},m=(e,t)=>{h(e,t,0,n,"relTimeYr")};t.startTimer=(e,t)=>{l(),e(t.relTimeNow||""),c=i((()=>{((e,t)=>{l(),e(t.relTimeMoment||""),c=i((()=>{d(e,t)}),5e4)})(e,t)}),1e4)}},589:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.requestOn=function(e,t,s){e.addEventListener(t,s)},t.setRequestHeader=function(e,t,s){e.setRequestHeader(t,s)}},2634:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.isNonEmptyString=void 0;t.isNonEmptyString=e=>"string"==typeof e&&e.length>0},3172:(e,t)=>{Object.defineProperty(t,"p",{value:!0}),t.stripHTTP=t.getWebSocketURL=t.getLongPollURL=t.buildURL=void 0;const s=(e,t,s,o)=>i(`${e}${t}${o}`,s);t.buildURL=s;t.getWebSocketURL=(e,t,i=!0,o="websdk")=>s(`ws${i?"s":""}://`,e,t,`/chat/v1/chats/sockets/${o}`);t.getLongPollURL=(e,t,i=!0)=>s(`http${i?"s":""}://`,e,t,"/chat/v1/chats/message");const i=(e,t)=>{const s=Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&");return s.length?`${e}?${s}`:e};t.stripHTTP=e=>e.replace(/^https?:\/\//i,"")}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.p?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};s.d(i,{default:()=>c});var o=s(4261),r=s(5398),a=s(6064);const n={};function c(e,t){let s;const i=(0,r.i)(e);let d;const p=(0,a.generateEventDispatcher)();let u=!1;const g=new r.c(i);r.d.logLevel=i.isDebugMode?r.d.LOG_LEVEL.DEBUG:r.d.LOG_LEVEL.ERROR,r.d.appName=i.name,r.d.appVersion=r.e;const m=new r.d("main"),b=new o.WebCore({URI:i.URI,channelId:i.channelId,userId:i.userId,isTLS:i.enableSecureConnection,channel:i.channel,enableAttachment:i.enableAttachment,enableAttachmentSecurity:i.enableAttachmentSecurity,isLongPoll:i.enableLongPolling,isTTS:i.enableBotAudioResponse,TTSService:i.ttsService,tokenGenerator:i.clientAuthEnabled?t:null,recognitionLocale:i.speechLocale,retryInterval:i.reconnectInterval,retryMaxAttempts:i.reconnectMaxAttempts,enableCancelResponse:i.enableCancelResponse});if(i.skillVoices&&(!i.ttsVoice||Array.isArray(i.ttsVoice)&&!i.ttsVoice.length)&&(i.ttsVoice=i.skillVoices),i.enableBotAudioResponse)try{i.ttsVoice&&b.setTTSVoice(i.ttsVoice)}catch(e){m.error("Failed to initialize TTS")}const f=Object.values(o.RecognitionLocale),v=(e,...t)=>{1===t.length?m.error(`Parameter ${t} was not passed for ${e} call. No action processed.`):m.error(`Parameters ${t.join(", ")} were not passed for ${e} call. No action processed.`)},w=e=>{p.trigger(r.a.MESSAGE_SENT,e),p.trigger(r.a.MESSAGE,e)},x=e=>{p.trigger(r.a.MESSAGE_RECEIVED,e),p.trigger(r.a.MESSAGE,e)},k=e=>{p.trigger(r.a.NETWORK,e)},y=()=>{s=new r.g(b,i,{connect:this.connect.bind(this),openChat:this.openChat.bind(this),closeChat:this.closeChat.bind(this),handleSessionEnd:O.bind(this),receivedMessage:x.bind(this),sentMessage:w.bind(this),getUnreadMessagesCount:this.getUnreadMessagesCount.bind(this),onConnectionStatusChange:k.bind(this),util:g,eventDispatcher:p}),s.contextWidgetMap=n,s.render()};let _=()=>{p.trigger(r.a.READY),_=()=>{}};this.configureWidget=(e,t,o=!0)=>{const a=new r.b(i,g,e,t,o,n,b,s,p);return this.isConnected()||this.connect(),n[a.threadId]=a,a},this.updateChatContext=(e,t,s,o,{event:a,semanticObject:n}={})=>(e||v("updateChatContext","appContext"),b.updateChatContext(e,{properties:Object.assign(Object.assign({},(0,r.j)(t)),s),event:a,semanticObject:n},o,i.sdkMetadata?Object.assign({version:r.e},i.sdkMetadata):{version:r.e})),this.connect=({URI:e,channelId:t,userId:o}={})=>{let r;return e||t||o?(((e,t,o)=>{"string"==typeof e&&e.length&&(i.URI=e),"string"==typeof t&&t.length&&(i.channelId=t),"string"==typeof o&&o.length&&(i.userId=o,s.configureStorage())})(e,t,o),r=b.connect(i)):r=b.connect(),r.then((()=>{m.debug("Connection ready")}),(()=>{m.debug("Connection timeout"),s.showConnectionError()})).finally((()=>{_()})),r},this.disconnect=()=>(i.enableSpeech&&this.stopVoiceRecording(),i.enableBotAudioResponse&&this.cancelTTS(),b.disconnect()),this.isConnected=()=>b.isConnected(),this.openChat=()=>{s.isOpen||(s.showChat(),u&&(this.connect(),u=!1)),p.trigger(r.a.WIDGET_OPENED)},this.closeChat=()=>{s.isOpen&&s.onClose(),p.trigger(r.a.WIDGET_CLOSED)},this.endChat=()=>{this.isConnected()&&s.sendExitEvent()},this.showWidget=()=>{null==s||s.showWidget()},this.hideWidget=()=>{null==s||s.hideWidget()};const O=()=>{s.isOpen&&this.closeChat(),this.disconnect(),this.clearConversationHistory(),u=!0,p.trigger(r.a.CHAT_END)};this.isChatOpened=()=>s.isOpen,this.destroy=()=>{if(this.disconnect(),this.closeChat(),s.remove(),document){const e=s.styleSheet;e&&e.remove()}p.trigger(r.a.DESTROY),this.off();for(const e in this)this[e]&&delete this[e]},this.on=(e,t)=>{switch(e){case o.SpeechSynthesisServiceEvent.TTSStart:case o.SpeechSynthesisServiceEvent.TTSStop:b.on(e,t);break;default:p.bind(e,t)}},this.off=(e,t)=>{switch(e){case o.SpeechSynthesisServiceEvent.TTSStart:case o.SpeechSynthesisServiceEvent.TTSStop:b.off(e,t);break;default:p.unbind(e,t)}},this.sendAttachment=e=>e?s.uploadFile(e):(v("sendAttachment","file"),Promise.reject(new Error("Invalid Parameter"))),this.sendMessage=(e,t)=>e?s.sendMessage(e,t):(v("sendMessage","message"),Promise.reject(new Error("Invalid Parameter"))),this.sendUserTypingStatus=(e,t)=>e?b.sendUserTypingStatus(e,t):(v("sendUserTypingStatus","status"),Promise.reject(new Error("Invalid Parameter"))),this.updateUser=e=>e?b.updateUser(e,{sdkMetadata:{version:r.e}}).then((()=>w(e))):(v("updateUser","userDetails"),Promise.reject(new Error("Invalid Parameter"))),this.setUserAvatar=e=>{e?s.setUserAvatar(e):v("setUserAvatar","userAvatar")},this.setAgentDetails=e=>{e?s.setAgentDetails(e):v("setAgentDetails","agentDetails")},this.getAgentDetails=()=>s.getAgentDetails(),this.setSkillVoices=e=>{if(!b.getTTSService())return h();let t=[];return e&&!Array.isArray(e)&&"string"==typeof(null==e?void 0:e.lang)?t=[e]:Array.isArray(e)&&(t=e),this.setTTSVoice(t)},this.setTTSService=e=>{const t=b.getTTSService();t&&t.cancel(),"string"==typeof e?b.setTTSService(e):b.setTTSService(function(e){return e&&(0,a.isFunction)(e.speak)&&(0,a.isFunction)(e.cancel)&&(0,a.isFunction)(e.getVoice)&&(0,a.isFunction)(e.getVoices)&&(0,a.isFunction)(e.setVoice)}(e)?e:null);const o=b.getTTSService();i.ttsService=o,s&&s.refreshTTS(),o&&(i.enableBotAudioResponse=!0,(0,r.k)(o,i.ttsVoice).then((e=>{e||(i.ttsVoice=[]);const t=(0,r.l)({hasRecognition:i.enableSpeech,hasSynthesis:i.enableBotAudioResponse,recognitionLocale:i.speechLocale,synthesisLocales:i.ttsVoice});t&&o.setVoice(t).catch((e=>{m.error(e)})),i.ttsVoice=t})))},this.getTTSVoices=()=>b.getTTSVoices(),this.setTTSVoice=e=>{const t=b.getTTSService();return t?(0,r.k)(t,i.ttsVoice).then((t=>(i.ttsVoice=(0,r.l)({hasRecognition:i.enableSpeech,hasSynthesis:i.enableBotAudioResponse,isReset:t,recognitionLocale:i.speechLocale,synthesisLocales:e}),b.setTTSVoice(e).catch((()=>h()))))):h()},this.getTTSVoice=()=>{try{return b.getTTSVoice()}catch(e){throw Error(l)}},this.speakTTS=e=>{b.speakTTS(e,i.i18n[i.locale])},this.cancelTTS=()=>{b.cancelTTS()},this.setPrimaryChatLanguage=e=>{if(null!==e&&"string"!=typeof e)throw Error("Please pass a language string or null as argument");this.isConnected()?s.setPrimaryChatLanguage(e):m.error("Not connected. Can not call setPrimaryChatLanguage.")},this.setDelegate=e=>{i.delegate=e},this.getConversationHistory=()=>{const e=s.getMessages();return{messages:e,messagesCount:e.length,unreadCount:this.getUnreadMessagesCount(),userId:i.userId}},this.clearConversationHistory=(e,t=!0)=>{e&&"string"!=typeof e?m.error("Argument passed in clearConversationHistory() is not of type string. Returning without execution."):(e&&0!==e.length||(e=i.userId),t&&e===i.userId?s.clearConversationHistory():s.clearMessages(e,r.f.LOCAL))},this.clearAllConversationsHistory=(e=!0)=>{s.clearAllMessage(),e&&s.clearConversationHistory()},this.getSuggestions=e=>i.enableAutocomplete?e?"string"!=typeof e&&"number"!=typeof e?Promise.reject("Invalid query parameter type passed for the getSuggestions call."):s.getSuggestions(e):Promise.reject("No query parameter passed for the getSuggestions call."):Promise.reject("Autocomplete suggestions not enabled."),this.startVoiceRecording=(e,t)=>i.enableSpeech?b.startRecognition({onRecognitionText:t=>{null==e||e(t.message)},onVisualData:null==t?void 0:t.onAnalyserFrequencies}):Promise.reject(new Error("Speech-to-text feature is not enabled. Initialize the widget with enableSpeech: true to use the service.")),this.stopVoiceRecording=()=>{if(!i.enableSpeech)throw new Error("Speech-to-text feature is not enabled. Speech recognition service is not running.");return b.stopRecognition()},this.setSpeechLocale=e=>{if(!i.enableSpeech)return!1;e=e.toLowerCase();const t=f.includes(e);if(i.speechLocale=e,b.setRecognitionLocale(e),s.setVoiceRecognitionService(t),t&&i.enableBotAudioResponse){const e=(0,r.l)({hasRecognition:i.enableSpeech,hasSynthesis:i.enableBotAudioResponse,recognitionLocale:i.speechLocale,synthesisLocales:i.ttsVoice});e!==i.ttsVoice&&(i.ttsVoice=e,e.length&&b.setTTSVoice(e))}return t},this.getUnreadMessagesCount=()=>{if(i.enableHeadless)return 0;const e=s.getUnreadMsgsCount();return e!==d&&(d=e,p.trigger(r.a.UNREAD,e)),e},this.setAllMessagesAsRead=()=>{i.enableHeadless||(this.getUnreadMessagesCount(),s.updateNotificationBadge(0))},this.showTypingIndicator=()=>{if(!i.showTypingIndicator)throw new Error("Typing indicator is configured not to be shown.");if(i.enableHeadless)throw new Error("Typing indicator cannot be shown in headless mode.");this.isConnected()&&s.showTypingIndicator()},this.setWebViewConfig=e=>{if(i.enableHeadless)throw new Error("WebView cannot be configured in headless mode.");s.refreshWebView(e)},this.setUserInputMessage=e=>{if(i.enableHeadless)throw new Error("User input cannot be set in headless mode.");s.setUserInputMessage(e)},this.setUserInputPlaceholder=e=>{if(i.enableHeadless)throw new Error("Placeholder cannot be set in headless mode.");e?s.setUserInputPlaceholder(e):v("setUserInputPlaceholder","placeholder text")},this.setHeight=e=>{e?null==s||s.setHeight(e):v("setHeight","height")},this.setWidth=e=>{e?null==s||s.setWidth(e):v("setWidth","width")},this.setSize=(e,t)=>{e||t?null==s||s.setSize(e,t):v("setSize","width","height")},this.setMessagePadding=e=>{e?null==s||s.setMessagePadding(e):v("setMessagePadding","padding")},this.setChatBubbleIconHeight=e=>{e?null==s||s.setChatBubbleIconHeight(e):v("setChatBubbleIconHeight","height")},this.setChatBubbleIconWidth=e=>{e?null==s||s.setChatBubbleIconWidth(e):v("setChatBubbleIconWidth","width")},this.setChatBubbleIconSize=(e,t)=>{e||!t?null==s||s.setChatBubbleIconSize(e,t):v("setChatBubbleIconSize","width","height")},this.setFont=e=>{e?(g.updateCSSVar("font",e),i.font=e):v("setFont","font")},this.setFontFamily=e=>{e?(g.updateCSSVar("font-family",e),i.fontFamily=e):v("setFontFamily","fontFamily")},this.setFontSize=e=>{e?g.updateCSSVar("font-size",e):v("setFontSize","fontSize")},this.setTextColor=e=>{e?(g.updateCSSVar("--color-bot-text",e),g.updateCSSVar("--color-user-text",e)):v("setTextColor","color")},this.setTextColorLight=e=>{e?(g.updateCSSVar("--color-text-light",e),i.colors.textLight=e):v("setTextColorLight","color")},m.debug("onLoad","load chat widget"),y(),(0,a.setReadOnly)(this);const j=window;j&&"function"==typeof j.define&&j.define.amd&&(j.WebSDK=c)}const l="Text-to-speech is not available.";function h(){return e=l,Promise.reject(Error(e));var e}return c.EVENT=r.a,c.SPEECH_LOCALE=o.RecognitionLocale,c.THEME=r.h,c.TTS=o.CoreTTS,c.Version=r.e,(0,a.deepFreeze)(c),i=i.default})()));